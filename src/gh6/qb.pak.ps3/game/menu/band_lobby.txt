Unknown [1c00000000000000000106140000000000000000]Script band_lobby_does_need_to_show_warning 0x95be02cd [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0b5e07bc	}$		:i $show_warning$ = %i(0)	:i $msg_checksum$ = $leave_msg_net$	:i $choose_script$ = $empty_script$	:i if $InInternetMode$		:i $GetNumPlayersInGame$		:i $total_num_players$ = %GLOBAL%$num_players$		:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = get_party_members		}$				:i $GetArraySize$${StructQBKey connections}$		:i $party_num_players$ = %GLOBAL%$array_size$		:i $GetNumPlayersInGame$${StructQBKey local}$		:i $local_num_players$ = %GLOBAL%$num_players$		:i if NOT $InNetGame$			:i if (%GLOBAL%$party_num_players$ <= %GLOBAL%$local_num_players$)				:i if NOT $is_current_playlist_empty$					:i $show_warning$ = %i(1)					:i $msg_checksum$ = $leave_msg_local_playlist$					:i $choose_script$ = $band_lobby_go_back$				:i else 					:i if (%GLOBAL%$total_num_players$ = %i(1))						:i $show_warning$ = %i(0)					:i else 						:i $show_warning$ = %i(1)						:i $msg_checksum$ = $leave_msg_local$						:i $choose_script$ = $band_lobby_go_back$					:i endif				:i endif			:i else 				:i if $bl_does_have_remote_party_connections$					:i %GLOBAL%$show_warning$ = %i(1)					:i %GLOBAL%$msg_checksum$ = $leave_msg_party$					:i %GLOBAL%$choose_script$ = $band_lobby_leave_party$				:i else 					:i %GLOBAL%$show_warning$ = %i(1)					:i %GLOBAL%$msg_checksum$ = $leave_msg_local$					:i %GLOBAL%$choose_script$ = $band_lobby_go_back$				:i endif			:i endif		:i else 			:i $show_warning$ = %i(1)			:i $msg_checksum$ = $leave_msg_matchmade$			:i $choose_script$ = $quit_online_now$		:i endif	:i else 		:i if NOT $is_current_playlist_empty$			:i $show_warning$ = %i(1)			:i $msg_checksum$ = $leave_msg_local_playlist$			:i $choose_script$ = $band_lobby_go_back$		:i else 			:i $GetNumPlayersInGame$			:i $total_num_players$ = %GLOBAL%$num_players$			:i if (%GLOBAL%$total_num_players$ = %i(1))				:i $show_warning$ = %i(0)			:i else 				:i $show_warning$ = %i(1)				:i $msg_checksum$ = $leave_msg_local$				:i $choose_script$ = $band_lobby_go_back$			:i endif		:i endif	:i endif	:i if (%GLOBAL%$show_warning$ = %i(1))		:i return $true$$msg_checksum$ = %GLOBAL%$msg_checksum$$choose_script$ = %GLOBAL%$choose_script$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_local_leader_leave bd9aa2ff [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x36f59359	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i if $band_lobby_does_need_to_show_warning$		:i if $band_lobby_desc_id$.$desc_resolvealias$${StructQBKey name = alias_pu_cont_parent}$			:i $band_lobby_create_popup_menu$:s{				:i $menu$ = $leave_lobby$				:i $msg_checksum$ = %GLOBAL%$msg_checksum$				:i $choose_script$ = %GLOBAL%$choose_script$				:i $submenu_index$ = %GLOBAL%$submenu_index$				:i $player$ = (~%GLOBAL%$submenu_data$->$player$)				:i $container$ = %GLOBAL%$resolved_id$			:i :s}		:i endif	:i else 		:i $audio_ui_band_lobby_sfx_logic$$generic_back$ = %i(1)$player_num$ = %GLOBAL%$player$		:i $band_lobby_whole_band_autosave$$choose_script$ = $band_lobby_go_back$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$	:i endif	:i endfunction]Script band_lobby_local_player_leave 0x5082ad37 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x8fd6684a	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i if NOT ((~%GLOBAL%$submenu_data$->$menu$) = $join$)		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$in_game$ = %i(0)		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$is_local_client$ = %i(1)		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$net_id_first$ = %i(0)		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$net_id_first$ = %i(0)		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$party_id$ = %i(4294967295)		:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$		:i $NetSessionFunc$$func$ = $removecontroller$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}		:i if NOT $NetSessionFunc$${				StructQBKey obj = party				StructQBKey func = is_host			}$						:i $NetSessionFunc$$obj$ = $party$$func$ = $remove_playr_from_party$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}		:i endif		:i $session_stats_reset$		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $occupied$$value$ = %i(0)		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $net_id$$value$ = :a{%i(0)%i(0):a}		:i if $IsPS3$			:i $change$$globalname$ = (~%GLOBAL%$submenu_data$->$gamertag_checksum$)$newValue$ = ^[00000000]^		:i endif		:i if $band_lobby_find_missing_part$$player$ = (~%GLOBAL%$submenu_data$->$player$)			:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$part$ = %GLOBAL%$missing_part$		:i endif		:i $band_lobby_change_menu$$action$ = $back$$menu$ = $join$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$		:i $band_lobby_kick_leader_out_of_band_manage$		:i $band_lobby_update_player_viewport_assignments$		:i $band_lobby_refresh_band_leader_characters$		:i $band_lobby_update_button_helpers$	:i endif	:i endfunction]Script band_lobby_leave_forced_flow b3dddd00 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $is_managed$	:i if (%GLOBAL%$is_managed$ = %i(1))		:i $band_lobby_manage_band_members$$action$ = $deselect$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$	:i else 		:i $band_lobby_leave$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$	:i endif	:i endfunction]Script band_lobby_can_leave 0x83edf065 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x7848a09d	}$		:i if (~$net_popup_active$ = %i(1))		:i return ${StructQBKey false}$	:i endif	:i if $savegame_async_is_busy$		:i return ${StructQBKey false}$	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_leave 0x92656379 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index				player			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[578a6031]^$c$ = %GLOBAL%$submenu_index$$d$ = %GLOBAL%$player$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i if $band_lobby_can_leave$		:i if (~$g_leader_player_num$ = %i(4294967295))			:i $band_lobby_go_back$		:i elseif (~$g_career_search$ !== $null$)			:i if (~$g_leader_player_num$ = %GLOBAL%$player$)				:i if $NetSessionFunc$${						StructQBKey obj = party						StructQBKey func = is_host					}$										:i if $band_lobby_cancel_matchmaking$						:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}						:i $band_lobby_change_menu$$menu$ = $main$$action$ = $back$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$						:i $band_lobby_update_button_helpers$					:i endif				:i endif			:i endif		:i else 			:i if (~$g_leader_player_num$ = %GLOBAL%$player$)				:i $audio_ui_band_lobby_sfx_logic$$generic_back$ = %i(1)$player_num$ = %GLOBAL%$player$				:i if NOT $GotParam$${StructQBKey controller_pulled}$					:i $band_lobby_local_leader_leave$$submenu_index$ = %GLOBAL%$submenu_index$				:i else 					:i $band_lobby_autosave$$not_on_ps3$$choose_script$ = $band_lobby_local_player_leave$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$				:i endif			:i else 				:i if NOT $InNetGame$					:i $band_lobby_autosave$$not_on_ps3$$choose_script$ = $band_lobby_local_player_leave$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$				:i endif			:i endif		:i endif	:i endif	:i endfunction]Script band_lobby_switch_to_enabled_profile_or_guest_start 0x31c7b907 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				silver_guys_controller			]		}	}$		:i $printf$^[00f41a7c]^$d$ = %GLOBAL%$silver_guys_controller$	:i $printstruct$ isNull 	:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$	:i $optionsarray$ = :a{:a}	:i $item$ = :s{$func$ = $band_lobby_switch_to_enabled_profile_or_guest_signin$		:i $func_params$ = :s{$silver_guys_controller$ = %GLOBAL%$silver_guys_controller$:s}		:i $text$ = (~$band_lobby_strings$->$popup_option_signin$)	:i :s}	:i $AddArrayElement$$array$ = %GLOBAL%$optionsarray$$element$ = %GLOBAL%$item$	:i $optionsarray$ = %GLOBAL%$array$	:i if $IsXenonOrWinDX$		:i if $GotParam$${StructQBKey allow_continue_as_guest}$			:i $item$ = :s{$func$ = $band_lobby_switch_to_enabled_profile_or_guest_continue_as_guest$				:i $func_params$ = :s{$silver_guys_controller$ = %GLOBAL%$silver_guys_controller$:s}				:i $text$ = (~$band_lobby_strings$->$continue_guest$)			:i :s}			:i $AddArrayElement$$array$ = %GLOBAL%$optionsarray$$element$ = %GLOBAL%$item$			:i $optionsarray$ = %GLOBAL%$array$		:i endif	:i endif	:i $item$ = :s{$func$ = $band_lobby_switch_to_enabled_profile_or_guest_cancel$		:i $func_params$ = :s{$silver_guys_controller$ = %GLOBAL%$silver_guys_controller$:s}		:i $text$ = (~$band_lobby_strings$->$popup_option_cancel$)	:i :s}	:i $AddArrayElement$$array$ = %GLOBAL%$optionsarray$$element$ = %GLOBAL%$item$	:i $optionsarray$ = %GLOBAL%$array$	:i $body_text$ = (~$band_lobby_strings$->$switch_to_enabled_profile_or_guest$)	:i if $IsXenonOrWinDX$		:i if $GotParam$${StructQBKey allow_continue_as_guest}$			:i $body_text$ = (~$band_lobby_strings$->$switch_to_enabled_profile_or_continue_as_guest$)		:i endif	:i endif	:i $create_dialog_box$:s{		:i $heading_text$ = (~$band_lobby_strings$->$popup_title_warning$)		:i $body_text$ = %GLOBAL%$body_text$		:i $no_background$		:i $player_device$ = %GLOBAL%$silver_guys_controller$		:i $back_button_script$ = $band_lobby_switch_to_enabled_profile_or_guest_cancel$		:i $parent$ = $band_lobby_desc_id$		:i $options$ = %GLOBAL%$optionsarray$	:i :s}	:i $AssignAlias$$id$ = %GLOBAL%$menu_id$$alias$ = $switch_to_enabled_profile_or_guest$	:i $LaunchEvent$${		StructQBKey type = focus		StructQBKey target = switch_to_enabled_profile_or_guest	}$		:i $printf$${StructQBStringQs 0x4dec4a44}$	:i endfunction]Script band_lobby_switch_to_enabled_profile_or_guest_close c8dc8484 [	:i if $ScreenElementExists$${StructQBKey id = switch_to_enabled_profile_or_guest}$		:i $destroy_dialog_box$	:i endif	:i $band_lobby_update_button_helpers$	:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = focus}$	:i endfunction]Script band_lobby_switch_to_enabled_profile_or_guest_signin 0x856c3e17 [	:i $printf$^[5fc606a4]^$d$ = %GLOBAL%$silver_guys_controller$	:i $printstruct$ isNull 	:i $band_lobby_switch_to_enabled_profile_or_guest_close$	:i $band_lobby_signin$$controller$ = %GLOBAL%$silver_guys_controller$$forceui4$	:i $printf$${StructQBStringQs 0x93333ca6}$	:i endfunction]Script band_lobby_switch_to_enabled_profile_or_guest_continue_as_guest e1bd5b9d [	:i $printf$^[95502f47]^$d$ = %GLOBAL%$silver_guys_controller$	:i $printstruct$ isNull 	:i $band_lobby_switch_to_enabled_profile_or_guest_close$	:i $band_lobby_call_signin_ui_from_popup$$func$ = $showsigninui$$params$ = :s{$convert_offline_to_guest$:s}$device_num$ = %GLOBAL%$silver_guys_controller$	:i $printf$${StructQBStringQs 0x44143a36}$	:i endfunction]Script band_lobby_switch_to_enabled_profile_or_guest_cancel 0x763a6db6 [	:i $printf$${StructQBStringQs 0x35cd0bef}$	:i $printstruct$ isNull 	:i $band_lobby_switch_to_enabled_profile_or_guest_close$	:i $printf$${StructQBStringQs 0x680f4364}$	:i endfunction]Script band_lobby_attempt_to_join 0x15cbc0c1 [	${		StructQBKey HACK_is_pad_handler = false		Unknown [00012400b1b15c3a696969690000002800012400c9428a086969696900000000]	}$		:i $printf$$channel$ = $band_lobby$^[965aa400]^$c$ = %GLOBAL%$device_num$	:i $RemoveParameter$${StructQBKey player}$	:i if (%GLOBAL%$HACK_is_pad_handler$ = $true$)		:i if (~$g_career_search$ !== $null$)			:i return 		:i endif	:i endif	:i if $band_lobby_can_join_local$$controller$ = %GLOBAL%$device_num$$submenu_index$ = %GLOBAL%$submenu_index$ isNull 		:i $NetSessionFunc$$func$ = $addcontrollers$$params$ = :s{$controller$ = %GLOBAL%$device_num$:s}		:i if $InInternetMode$			:i $NetSessionFunc$$obj$ = $party$$func$ = $add_local_player_to_party$$params$ = :s{$controller_index$ = %GLOBAL%$device_num$:s}			:i if NOT $GotParam$${StructQBKey from_main_menu}$				:i $band_lobby_change_menu$$menu$ = $attempt_join$$action$ = $forward$$player$ = (%GLOBAL%$device_num$ + %i(1))$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$$focus$ = %i(0)			:i endif		:i else 			:i $band_lobby_join$$submenu_index$ = %GLOBAL%$submenu_index$$device_num$ = %GLOBAL%$device_num$ isNull 		:i endif	:i else 		:i if $GotParam$${StructQBKey error}$			:i if (%GLOBAL%$error$ = $guest_can_not_lead$)				:i $band_lobby_update_ticker$$msg_checksum$ = %GLOBAL%$error$$msg_count$ = %i(3)				:i return $error$ = %GLOBAL%$error$			:i endif		:i endif	:i endif	:i endfunction]Script band_lobby_join a33c3f83 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index				device_num			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0a9e37ad	}$		:i if $band_lobby_can_join_local$$controller$ = %GLOBAL%$device_num$$submenu_index$ = %GLOBAL%$submenu_index$ isNull 		:i $new_player$ = (%GLOBAL%$device_num$ + %i(1))		:i if $CheckForSignin$$controller_index$ = %GLOBAL%$device_num$$dont_set_primary$			:i $GetNetID$$controller_index$ = %GLOBAL%$device_num$		:i else 			:i $net_id_first$ = %i(0)			:i $net_id_second$ = %i(0)		:i endif		:i $array$ = :a{:a}		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_first$		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_second$		:i $band_lobby_get_is_guest$$device_num$ = %GLOBAL%$device_num$		:i if (~$g_leader_player_num$ = %i(4294967295))			:i $local_primary_joining$ = %i(1)		:i endif		:i $band_lobby_add_player_to_playerinfo$:s{			:i $player_type$ = $local$			:i $playerinfo$ = %GLOBAL%$new_player$			:i $Data$ = :s{				:i $controller$ = %GLOBAL%$device_num$				:i $user_id$ = %GLOBAL%$array$			:i :s}			:i $local_primary_joining$ = %GLOBAL%$local_primary_joining$		:i :s}		:i if $playerinfoequals$%GLOBAL%$new_player$$part$ = $Vocals$			:i if $playerinfoequals$%GLOBAL%$new_player$$is_local_client$ = %i(1)				:i if NOT $playerinfoequals$%GLOBAL%$new_player$$mic_preference$ = $None$					:i $band_lobby_assign_mic$$player$ = %GLOBAL%$new_player$				:i else 					:i if NOT $controller_has_headset$$controller$ = %GLOBAL%$device_num$						:i $band_lobby_set_mic_preference$$mic_preference$ = $mic$$player$ = %GLOBAL%$new_player$						:i $band_lobby_assign_mic$$player$ = %GLOBAL%$new_player$					:i endif				:i endif			:i endif		:i endif		:i $session_stats_reset$		:i if (~$g_leader_player_num$ = %i(4294967295))			:i $band_lobby_change_band_leader$$player$ = %GLOBAL%$new_player$$from_join$		:i endif		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $occupied$		:i if (%GLOBAL%$occupied$ = %i(1))			:i $printf$${StructQBStringQs ac7d58fd}$			:i $band_lobby_find_available_submenu_data$			:i if (%GLOBAL%$submenu_data_index$ !== %i(4294967295))				:i $printf$^[b52f8585]^$d$ = %GLOBAL%$submenu_data_index$				:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $player$				:i $xuid$ = :a{%i(0)%i(0):a}				:i $getplayerinfo$%GLOBAL%$player$$net_id_first$				:i $getplayerinfo$%GLOBAL%$player$$net_id_second$				:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$				:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$				:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_data_index$$element$ = $player$$value$ = %GLOBAL%$player$				:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_data_index$$element$ = $occupied$$value$ = %i(1)				:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_data_index$$element$ = $net_id$$value$ = %GLOBAL%$array$				:i if $IsPS3$					:i $getplayerinfo$%GLOBAL%$player$$gamertag$					:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_data_index$$param$ = $gamertag_checksum$					:i $change$$globalname$ = %GLOBAL%$gamertag_checksum$$newValue$ = (~%GLOBAL%$gamertag$)				:i endif				:i if (%GLOBAL%$submenu_data_index$ < ~$g_num_lobby_local_submenus$)					:i $SetPlayerInfo$%GLOBAL%$player$$controller$ = %GLOBAL%$submenu_data_index$					:i $band_lobby_change_menu$$menu$ = $remote_player$$no_forced$$submenu_index$ = %GLOBAL%$submenu_data_index$$action$ = $forward$$player$ = %GLOBAL%$player$				:i endif			:i else 				:i $scriptassert$${StructQBStringQs 0x18b28ce3}$			:i endif		:i endif		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $player$$value$ = %GLOBAL%$new_player$		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $occupied$$value$ = %i(1)		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $net_id$$value$ = %GLOBAL%$array$		:i if $IsPS3$			:i $getplayerinfo$%GLOBAL%$new_player$$gamertag$			:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $gamertag_checksum$			:i $change$$globalname$ = %GLOBAL%$gamertag_checksum$$newValue$ = (~%GLOBAL%$gamertag$)		:i endif		:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$		:i $persistent_band_refresh_changed_characters$		:i if NOT $GotParam$${StructQBKey from_main_menu}$			:i $band_lobby_join_continue_to_next_menu$:s{				:i $device_num$ = %GLOBAL%$device_num$				:i $player$ = %GLOBAL%$new_player$				:i $submenu_index$ = %GLOBAL%$submenu_index$			:i :s}		:i endif		:i $load_saved_extras_states_for_player$$player$ = %GLOBAL%$new_player$$controller$ = %GLOBAL%$device_num$$leader$ = (~$g_leader_player_num$)	:i else 		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$device_num$$param$ = $menu$		:i if (%GLOBAL%$menu$ = $attempt_join$)			:i $NetSessionFunc$$func$ = $removecontroller$$params$ = :s{$controller$ = %GLOBAL%$device_num$:s}			:i $band_lobby_flash_ticker_msg$${				StructQBKey msg_checksum = failed_to_join_session				StructInt time = 3			}$						:i $band_lobby_change_menu$$menu$ = $join$$action$ = $back$$player$ = (%GLOBAL%$device_num$ + %i(1))$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$$focus$ = %i(1)		:i endif	:i endif	:i endfunction]Script band_lobby_failed_join 0x8ded08d3 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				controller			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x3f69d58e	}$		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$controller$$param$ = $menu$	:i if (%GLOBAL%$menu$ = $attempt_join$)		:i $NetSessionFunc$$func$ = $removecontroller$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}		:i $band_lobby_flash_ticker_msg$${			StructQBKey msg_checksum = failed_to_join_session			StructInt time = 3		}$				:i $band_lobby_change_menu$$menu$ = $join$$action$ = $back$$player$ = (%GLOBAL%$controller$ + %i(1))$submenu_index$ = %GLOBAL%$controller$$no_forced$$focus$ = %i(1)	:i endif	:i endfunction]Script band_lobby_can_join_local 0x2ce68c3f [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				controller				submenu_index			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x944b9a6c	}$		:i if (%GLOBAL%$controller$ > %i(3))		:i $band_lobby_update_ticker$${StructQBKey msg_checksum = controller_limit}$		:i return ${			StructQBKey false			StructQBKey error = ps3_controller_limit		}$			:i endif	:i $band_lobby_get_is_guest$$device_num$ = %GLOBAL%$controller$	:i if $InInternetMode$		:i if $band_lobby_are_remote_players_in_game$			:i if NOT $CheckForSignin$$controller_index$ = %GLOBAL%$controller$$dont_set_primary$				:i if NOT $GotParam$${StructQBKey from_main_menu}$					:i $spawnscriptnow$$band_lobby_switch_to_enabled_profile_or_guest_start$$params$ = :s{$silver_guys_controller$ = %GLOBAL%$controller$:s}				:i endif				:i return ${					StructQBKey false					StructQBKey error = no_online_privileges				}$							:i elseif NOT $NetSessionFunc$$func$ = $ismultiplayerallowed$$params$ = :s{$controller_index$ = %GLOBAL%$device_num$:s}				:i if NOT $GotParam$${StructQBKey from_main_menu}$					:i $spawnscriptnow$$band_lobby_switch_to_enabled_profile_or_guest_start$$params$ = :s{$silver_guys_controller$ = %GLOBAL%$controller$$allow_continue_as_guest$:s}				:i endif				:i return ${					StructQBKey false					StructQBKey error = no_online_privileges				}$							:i elseif (%GLOBAL%$is_guest$ = %i(1))				:i if NOT $band_lobby_live_profile_ingame$${StructQBKey multiplayer_enabled}$					:i $band_lobby_update_ticker$${						StructQBKey msg_checksum = no_live_profile_in_game						StructInt msg_count = 3					}$										:i return ${						StructQBKey false						StructQBKey error = no_live_profile_in_game					}$									:i endif			:i endif		:i else 			:i $join_reaction$ = $None$			:i if $CheckForSignin$$controller_index$ = %GLOBAL%$device_num$$dont_set_primary$				:i if NOT $NetSessionFunc$$func$ = $ismultiplayerallowed$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}					:i if (~$g_lobby_invite_flag$ = %i(1))						:i $join_reaction$ = $show_change_msg$					:i else 						:i $join_reaction$ = $change_network$					:i endif				:i endif			:i else 				:i if (~$g_lobby_invite_flag$ = %i(1))					:i $join_reaction$ = $show_change_msg$				:i else 					:i $join_reaction$ = $change_network$				:i endif			:i endif			:i if (%GLOBAL%$join_reaction$ !== $None$)				:i if (%GLOBAL%$join_reaction$ = $change_network$)					:i $band_lobby_change_network$$player$ = (~$g_leader_player_num$)$network$ = $local$$focus$ = %i(0)				:i else 					:i if $band_lobby_live_profile_ingame$${StructQBKey multiplayer_enabled}$						:i if $CheckForSignin$$local$$controller_index$ = %GLOBAL%$device_num$$dont_set_primary$							:i $msg_checksum$ = $invite_sent_change_profile$						:i else 							:i $msg_checksum$ = $invite_sent_signin_profile$						:i endif					:i else 						:i $msg_checksum$ = $invite_sent_signin_profile$					:i endif					:i if $band_lobby_desc_id$.$desc_resolvealias$${StructQBKey name = alias_pu_cont_parent}$						:i $band_lobby_create_popup_menu$:s{							:i $menu$ = $change_profile$							:i $controller$ = %GLOBAL%$controller$							:i $container$ = %GLOBAL%$resolved_id$							:i $msg_checksum$ = %GLOBAL%$msg_checksum$							:i $submenu_index$ = %GLOBAL%$submenu_index$						:i :s}					:i endif					:i return ${StructQBKey false}$				:i endif			:i endif		:i endif	:i endif	:i if (%GLOBAL%$is_guest$ = %i(1))		:i if (~$g_leader_player_num$ = %i(4294967295))			:i return ${				StructQBKey false				StructQBKey error = guest_can_not_lead			}$					:i endif	:i endif	:i if $playerinfoequals$(%GLOBAL%$controller$ + %i(1))$in_game$ = %i(1)		:i $band_lobby_flash_ticker_msg$${			StructQBKey msg_checksum = game_full			StructInt time = 5		}$				:i return ${			StructQBKey false			StructQBKey error = no_available_playerinfo		}$			:i endif	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_join_continue_to_next_menu 0x58fd2efc [	${StructQBKey attempt_savegame_stuff = true}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				device_num				player				submenu_index			]		}		StructQBKey all	}$		:i $band_lobby_kick_leader_out_of_band_manage$	:i $band_lobby_update_player_viewport_assignments$	:i if $band_lobby_controller_can_save$$controller$ = %GLOBAL%$device_num$		:i $load_savegame$ = %i(1)	:i endif	:i if $IsPS3$		:i $RemoveParameter$${StructQBKey load_savegame}$	:i endif	:i $get_savegame_from_controller$$controller$ = %GLOBAL%$device_num$	:i if $get_savegame_has_saved_game$$savegame$ = %GLOBAL%$savegame$		:i $RemoveParameter$${StructQBKey load_savegame}$	:i endif	:i if NOT $is_autosave_on$$savegame$ = %GLOBAL%$savegame$		:i $RemoveParameter$${StructQBKey load_savegame}$	:i endif	:i if (%GLOBAL%$attempt_savegame_stuff$ = $false$)		:i $RemoveParameter$${StructQBKey load_savegame}$	:i endif	:i if $GotParam$${StructQBKey load_savegame}$		:i $band_lobby_change_menu$$menu$ = $mc_checking$$action$ = $forward$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$focus$ = %i(0)$no_forced$		:i $savegame_async_button_in$$savegame$ = %GLOBAL%$savegame$$callback$ = $lobby_mc_loading_callback$$Data$ = :s{			:i $player$ = %GLOBAL%$player$			:i $submenu_index$ = %GLOBAL%$submenu_index$			:i $controller$ = %GLOBAL%$device_num$		:i :s}	:i else 		:i if $band_lobby_does_popup_exist$			:i $band_lobby_change_menu$$menu$ = $main$$action$ = $forward$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$focus$ = %i(0)		:i else 			:i $band_lobby_change_menu$$menu$ = $main$$action$ = $forward$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$		:i endif	:i endif	:i $band_lobby_update_button_helpers$	:i endfunction]Script band_lobby_get_is_guest df55abe9 [	:i if $IsXenonOrWinDX$		:i if $NetSessionFunc$$func$ = $xenonisguest$$params$ = :s{$controller_index$ = %GLOBAL%$device_num$:s}			:i return ${StructInt is_guest = 1}$		:i else 			:i return ${StructInt is_guest = 0}$		:i endif	:i else 		:i return ${StructInt is_guest = 0}$	:i endif	:i endfunction]Script band_lobby_add_player_to_playerinfo_local 0x2ca2750c [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x5600c7de	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				playerinfo				controller				part				is_local			]		}		StructQBKey all	}$		:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$	:i $get_current_progression_award_points$$savegame$ = %GLOBAL%$savegame$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$recent_award_points$ = %i(0)	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$total_award_points$ = %GLOBAL%$total_award_points$	:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$option$ = %s("guitar_bass_flip")	:i $guitar_bass_flip$ = %GLOBAL%$user_option$	:i switch %GLOBAL%$part$		:i case $guitar$			:i endcase		case $Bass$			:i switch (%GLOBAL%$guitar_bass_flip$)				:i case $guitar$					:i $part$ = $guitar$					:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $guitar$$option$ = %s("difficulty")					:i $difficulty$ = %GLOBAL%$user_option$					:i endcase				case $Bass$					:i $part$ = $Bass$					:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $Bass$$option$ = %s("difficulty")					:i $difficulty$ = %GLOBAL%$user_option$					:i endcase				case $None$					:i $part$ = $guitar$					:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $guitar$$option$ = %s("difficulty")					:i $difficulty$ = %GLOBAL%$user_option$			:i end_switch			:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = %GLOBAL%$part$$option$ = %s("lefty_flip")			:i if (%GLOBAL%$user_option$ = %i(4294967295))				:i $SetPlayerInfo$%GLOBAL%$playerinfo$$lefty_flip$ = %i(0)			:i else 				:i $SetPlayerInfo$%GLOBAL%$playerinfo$$lefty_flip$ = %GLOBAL%$user_option$			:i endif			:i endcase		case $drum$			:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $drum$$option$ = %s("difficulty")			:i $difficulty$ = %GLOBAL%$user_option$			:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $drum$$option$ = %s("double_kick_drum")			:i $double_kick_drum$ = %GLOBAL%$user_option$			:i $SetPlayerInfo$%GLOBAL%$playerinfo$$double_kick_drum$ = %GLOBAL%$double_kick_drum$			:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $drum$$option$ = %s("lefty_flip")			:i if (%GLOBAL%$user_option$ = %i(4294967295))				:i $SetPlayerInfo$%GLOBAL%$playerinfo$$lefty_flip$ = %i(0)			:i else 				:i $SetPlayerInfo$%GLOBAL%$playerinfo$$lefty_flip$ = %GLOBAL%$user_option$			:i endif			:i endcase		case $Vocals$			:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $Vocals$$option$ = %s("difficulty")			:i $difficulty$ = %GLOBAL%$user_option$			:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $Vocals$$option$ = %s("mic_preference")			:i $SetPlayerInfo$%GLOBAL%$playerinfo$$mic_preference$ = %GLOBAL%$user_option$			:i $SetPlayerInfo$%GLOBAL%$playerinfo$$lobby_mic_valid$ = %i(0)			:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$part$ = $Vocals$$option$ = %s("highway_view")			:i $SetPlayerInfo$%GLOBAL%$playerinfo$$vocals_highway_view$ = %GLOBAL%$user_option$			:i $band_lobby_sync_highway_view$$player$ = %GLOBAL%$playerinfo$			:i endcase		default 			:i $scriptassert$${StructQBStringQs 0x6825c4a2}$	:i end_switch	:i if (%GLOBAL%$difficulty$ = $None$)		:i $SetPlayerInfo$%GLOBAL%$playerinfo$$difficulty$ = (~$default_difficulty$:a{%GLOBAL%$controller$:a})	:i else 		:i $SetPlayerInfo$%GLOBAL%$playerinfo$$difficulty$ = %GLOBAL%$difficulty$	:i endif	:i if $IsPS3$		:i if $GotParam$${StructQBKey local_primary_joining}$			:i $band_lobby_switch_characters_for_ps3_at_join$$player$ = %GLOBAL%$playerinfo$$controller$ = %GLOBAL%$controller$		:i endif	:i endif	:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$	:i if (%GLOBAL%$playerinfo$ <= %i(4))		:i $getplayerinfo$%GLOBAL%$playerinfo$$part$$out$ = $old_part$		:i if (%GLOBAL%$old_part$ !== %GLOBAL%$part$)			:i $SetPlayerInfo$%GLOBAL%$playerinfo$$is_local_client$ = %GLOBAL%$is_local$			:i $SetPlayerInfo$%GLOBAL%$playerinfo$$in_game$ = %i(1)			:i $band_lobby_handle_character_swap$:s{				:i $player$ = %GLOBAL%$playerinfo$				:i $old_part$ = %GLOBAL%$old_part$				:i $new_part$ = %GLOBAL%$part$				:i $no_refresh$			:i :s}		:i endif		:i $band_lobby_local_join_get_character_id$:s{			:i $savegame$ = %GLOBAL%$savegame$			:i $playerinfo$ = %GLOBAL%$playerinfo$			:i $local_primary_joining$ = %GLOBAL%$local_primary_joining$			:i $borrowed_from_band_leader$ = %GLOBAL%$borrowed_from_band_leader$		:i :s}		:i $SetPlayerInfo$%GLOBAL%$playerinfo$$character_id$ = %GLOBAL%$character_id$		:i $SetPlayerInfo$%GLOBAL%$playerinfo$$character_savegame$ = %GLOBAL%$character_savegame$		:i $SetPlayerInfo$%GLOBAL%$playerinfo$$stored_character_index$ = %GLOBAL%$stored_character_index$	:i endif	:i return $part$ = %GLOBAL%$part$	:i endfunction]Script band_lobby_add_player_to_playerinfo b6ab4c52 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player_type				Data			]		}	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d8cbcdba	}$		:i if (%GLOBAL%$player_type$ = $party$)		:i $net_id_first$ = (%GLOBAL%$Data$->$user_id$:a{%i(0):a})		:i $net_id_second$ = (%GLOBAL%$Data$->$user_id$:a{%i(1):a})		:i $is_local$ = (%GLOBAL%$Data$->$is_local$)		:i $controller$ = (%GLOBAL%$Data$->$controller_index$)		:i $party_id$ = (%GLOBAL%$Data$->$party_id$)		:i $NetSessionFunc$:s{			:i $obj$ = $mapper$			:i $func$ = $get_player_handle$			:i $params$ = :s{				:i $channel$ = $party$				:i $player_num$ = %GLOBAL%$party_id$			:i :s}		:i :s}		:i if (%GLOBAL%$is_local$ = %i(1))			:i $find_available_playerinfo$$player_type$ = $party_local$$controller_index$ = %GLOBAL%$controller$		:i else 			:i $find_available_playerinfo$${StructQBKey player_type = party_remote}$		:i endif		:i if (%GLOBAL%$playerinfo$ = %i(4294967295))			:i $scriptassert$${StructQBStringQs 0x1382536d}$		:i endif		:i $SetPlayerInfo$%GLOBAL%$playerinfo$$in_game$ = %i(1)		:i switch (%GLOBAL%$Data$->$Instrument$)			:i case $eguitar$				:i $part$ = $guitar$				:i endcase			case $emicrophone$				:i $part$ = $Vocals$				:i endcase			case $edrums$				:i $part$ = $drum$				:i endcase			default 				:i $scriptassert$${StructQBStringQs 0x5cbdd6e9}$				:i $part$ = $guitar$		:i end_switch		:i $FormatText$$checksumname$ = $gamertag$%s("gamertag_%d")$d$ = (%GLOBAL%$playerinfo$ - %i(1))		:i $change$$globalname$ = %GLOBAL%$gamertag$$newValue$ = (%GLOBAL%$Data$->$gamertag$)		:i if (%GLOBAL%$is_local$ = %i(1))			:i $band_lobby_add_player_to_playerinfo_local$:s{				:i $playerinfo$ = %GLOBAL%$playerinfo$				:i $controller$ = %GLOBAL%$controller$				:i $part$ = %GLOBAL%$part$				:i $local_primary_joining$ = %GLOBAL%$local_primary_joining$				:i $is_local$ = %GLOBAL%$is_local$			:i :s}			:i $SetPlayerInfo$%GLOBAL%$playerinfo$$async_io_status$ = $busy$		:i else 			:i $persistent_band_get_unused_musician$			:i if (%GLOBAL%$unused_musician$ !== $None$)				:i $SetPlayerInfo$%GLOBAL%$playerinfo$$band_member$ = %GLOBAL%$unused_musician$			:i endif		:i endif	:i elseif (%GLOBAL%$player_type$ = $local$)		:i $net_id_first$ = (%GLOBAL%$Data$->$user_id$:a{%i(0):a})		:i $net_id_second$ = (%GLOBAL%$Data$->$user_id$:a{%i(1):a})		:i $is_local$ = %i(1)		:i $controller$ = (%GLOBAL%$Data$->$controller$)		:i if $IsGuitarController$$controller$ = %GLOBAL%$controller$			:i $part$ = $guitar$		:i elseif $IsDrumController$$controller$ = %GLOBAL%$controller$			:i $part$ = $drum$		:i else 			:i if (~$allow_controller_for_all_instruments$ = %i(1))				:i $part$ = $guitar$			:i else 				:i $part$ = $Vocals$			:i endif		:i endif		:i $band_lobby_add_player_to_playerinfo_local$:s{			:i $playerinfo$ = %GLOBAL%$playerinfo$			:i $controller$ = %GLOBAL%$controller$			:i $part$ = %GLOBAL%$part$			:i $local_primary_joining$ = %GLOBAL%$local_primary_joining$			:i $is_local$ = %GLOBAL%$is_local$		:i :s}		:i $FormatText$$checksumname$ = $gamertag$%s("gamertag_%d")$d$ = (%GLOBAL%$playerinfo$ - %i(1))		:i if $IsXenonOrWinDX$			:i $NetSessionFunc$$obj$ = $match$$func$ = $get_gamertag$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}		:i else 			:i if NOT $NetSessionFunc$$obj$ = $match$$func$ = $get_gamertag$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}				:i $name$ = ^[00000000]^			:i endif		:i endif		:i $change$$globalname$ = %GLOBAL%$gamertag$$newValue$ = %GLOBAL%$name$		:i if NOT $band_lobby_get_party_id_by_user_id$$user_id$ = (%GLOBAL%$Data$->$user_id$)$gamertag$ = %GLOBAL%$name$			:i $party_id$ = %i(4294967295)		:i endif		:i $NetSessionFunc$:s{			:i $obj$ = $mapper$			:i $func$ = $get_player_handle$			:i $params$ = :s{				:i $controller_index$ = %GLOBAL%$controller$			:i :s}		:i :s}		:i $SetPlayerInfo$%GLOBAL%$playerinfo$$async_io_status$ = $busy$	:i endif	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$gamertag$ = %GLOBAL%$gamertag$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$part$ = %GLOBAL%$part$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$is_local_client$ = %GLOBAL%$is_local$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$in_game$ = %i(1)	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$net_id_first$ = %GLOBAL%$net_id_first$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$net_id_second$ = %GLOBAL%$net_id_second$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$controller$ = %GLOBAL%$controller$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$party_id$ = %GLOBAL%$party_id$	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$is_onscreen$ = %i(1)	:i $SetPlayerInfo$%GLOBAL%$playerinfo$$net_player_handle$ = %GLOBAL%$net_player_handle$	:i if (~$g_net_party_needs_full_sync$ = %i(1))		:i $change$${StructInt g_net_party_needs_full_sync = 0}$		:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = request_full_sync		}$			:i endif	:i if (%GLOBAL%$part$ = $drum$)		:i $usefourlanehighway$$player$ = %GLOBAL%$playerinfo$$reset$	:i endif	:i return $playerinfo$ = %GLOBAL%$playerinfo$	:i endfunction]Script band_lobby_local_join_get_character_id 0x7960f3c4 [	${Unknown [000124001b0509c5696969690000001800012400043c96716969696900000000]}$	:i $getplayerinfo$%GLOBAL%$playerinfo$$character_id$$out$ = $existing_character_id$	:i $getplayerinfo$%GLOBAL%$playerinfo$$character_savegame$$out$ = $existing_character_savegame$	:i $getplayerinfo$%GLOBAL%$playerinfo$$stored_character_index$$out$ = $existing_stored_character_index$	:i if $IsPS3$		:i $get_saved_band_member$$index$ = %GLOBAL%$existing_stored_character_index$$savegame$ = %i(0)		:i return :s{			:i $character_id$ = %GLOBAL%$character_id$			:i $character_savegame$ = %GLOBAL%$character_savegame$			:i $stored_character_index$ = %GLOBAL%$existing_stored_character_index$		:i :s}	:i else 		:i if $GotParam$${StructQBKey borrowed_from_band_leader}$			:i $savegame$ = %GLOBAL%$borrowed_from_band_leader$		:i endif		:i $get_saved_band_member$$index$ = %i(0)$savegame$ = %GLOBAL%$savegame$		:i if (%GLOBAL%$user_changed$ = %i(0))			:i if $GotParam$${StructQBKey local_primary_joining}$				:i $existing_character_id$ = %GLOBAL%$character_id$				:i $existing_character_savegame$ = %GLOBAL%$character_savegame$			:i endif			:i $globaltag_fix_band_member0_at_join$:s{				:i $savegame$ = %GLOBAL%$savegame$				:i $existing_character_id$ = %GLOBAL%$existing_character_id$				:i $existing_character_savegame$ = %GLOBAL%$existing_character_savegame$				:i $existing_stored_character_index$ = %GLOBAL%$existing_stored_character_index$			:i :s}			:i return :s{				:i $character_id$ = %GLOBAL%$character_id$				:i $character_savegame$ = %GLOBAL%$character_savegame$				:i $stored_character_index$ = %i(0)			:i :s}		:i else 			:i return :s{				:i $character_id$ = %GLOBAL%$character_id$				:i $character_savegame$ = %GLOBAL%$character_savegame$				:i $stored_character_index$ = %i(0)			:i :s}		:i endif	:i endif	:i endfunction]Script band_lobby_assign_mic 0x2f7900a2 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$mic_preference$	:i if (%GLOBAL%$mic_preference$ = $None$)		:i $softassert$${StructQBStringQs f47713fc}$	:i endif	:i $getplayerinfo$%GLOBAL%$player$$mic_type$	:i $this_mic_type$ = %GLOBAL%$mic_type$	:i $this_player$ = %GLOBAL%$player$	:i $GetNumPlayersInGame$${StructQBKey on_screen}$	:i if (%GLOBAL%$num_players_shown$ > %i(0))		:i $GetFirstPlayer$${StructQBKey on_screen}$		:i while 		:i if NOT (%GLOBAL%$player$ = %GLOBAL%$this_player$)			:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)				:i if $playerinfoequals$%GLOBAL%$player$$mic_type$ = %GLOBAL%$this_mic_type$					:i $SetPlayerInfo$%GLOBAL%$this_player$$mic_type$ = $None$					:i continue				:i endif			:i endif		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$on_screen$		:i loop_to %GLOBAL%$num_players_shown$	:i endif	:i endfunction]Script band_lobby_vocals_destroy_icon_update b1bc136f [	:i $obj_killspawnedscript$${StructQBKey name = band_lobby_vocals_icon_update}$	:i $se_setprops$${		StructArray rgba		{			ArrayInteger			[				255				255				255				255			]		}	}$		:i $obj_getid$	:i $GetScreenElementChildren$$id$ = %GLOBAL%$ObjID$	:i $invalid_icon_id$ = (%GLOBAL%$children$:a{%i(0):a})	:i %GLOBAL%$invalid_icon_id$.$se_setprops$:s{		:i $alpha$ = %i(0)	:i :s}	:i endfunction]Script band_lobby_update_mics 0x1820488f [	:i $vocals_reinit_mics$$noise_gate$ = (~$band_lobby_noise_gate$)	:i while 	:i $vocals_distribute_mics$${		StructInt only_preferences = 1		StructInt invalidate_bogus_mics = 0	}$		:i if (%GLOBAL%$distribution_changed$ = $true$)		:i $vocals_reinit_mics$$noise_gate$ = (~$band_lobby_noise_gate$)	:i endif	:i $GetNumPlayersInGame$${StructQBKey on_screen}$	:i if (%GLOBAL%$num_players_shown$ > %i(0))		:i $GetFirstPlayer$${StructQBKey on_screen}$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$			:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)				:i $mic_valid$ = %i(1)				:i if $playerinfoequals$%GLOBAL%$player$$mic_type$ = $headset$					:i if $IsXenon$						:i $NetSessionFunc$${							StructQBKey obj = plat_party							StructQBKey func = get_num_party_players						}$												:i if (%GLOBAL%$num_plat_party_players$ > %i(0))							:i $mic_valid$ = %i(0)						:i endif					:i endif				:i endif				:i if NOT $vocals_player_has_mic$$player$ = %GLOBAL%$player$					:i $mic_valid$ = %i(0)				:i endif				:i $SetPlayerInfo$%GLOBAL%$player$$lobby_mic_valid$ = %GLOBAL%$mic_valid$			:i endif		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$on_screen$		:i loop_to %GLOBAL%$num_players_shown$	:i endif	:i $wait$${		StructInt 1		StructQBKey second	}$		:i loop_to 	:i endfunction]Script band_lobby_vocals_icon_update b87f4174 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index			]		}		StructQBKey all	}$		:i $obj_getid$	:i $GetScreenElementChildren$$id$ = %GLOBAL%$ObjID$	:i $invalid_icon_id$ = (%GLOBAL%$children$:a{%i(0):a})	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i while 	:i $player$ = (~%GLOBAL%$submenu_data$->$player$)	:i $getplayerinfo$%GLOBAL%$player$$mic_preference$	:i $getplayerinfo$%GLOBAL%$player$$mic_type$	:i switch %GLOBAL%$mic_preference$		:i case $headset$			:i $icon_texture$ = $Logo_Headset$			:i endcase		case $None$			:i $icon_texture$ = $mixer_icon_vox$			:i endcase		default 			:i $icon_texture$ = $mixer_icon_vox$	:i end_switch	:i $band_lobby_get_player_color$$submenu_index$ = %GLOBAL%$submenu_index$	:i $rgba$ = %GLOBAL%$rgba_md$	:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $Vocals_GetMicAmplitude$$controller$ = %GLOBAL%$controller$		:i if (%GLOBAL%$amplitude$ > (~$band_lobby_noise_gate$))			:i $rgba$ = :a{%i(255)%i(0)%i(0)%i(255):a}		:i endif	:i endif	:i $se_setprops$:s{		:i $texture$ = %GLOBAL%$icon_texture$		:i $rgba$ = %GLOBAL%$rgba$	:i :s}	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i endfunction]Script band_lobby_controller_connected_update b9a0a6a8 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index			]		}		StructQBKey all	}$		:i $obj_getid$	:i $GetScreenElementChildren$$id$ = %GLOBAL%$ObjID$	:i $invalid_icon_id$ = (%GLOBAL%$children$:a{%i(0):a})	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i while 	:i $RemoveParameter$${StructQBKey skip}$	:i $ui_event_wait_for_safe$	:i $RemoveParameter$${StructQBKey is_popup}$	:i $ui_event_get_top$	:i if NOT (%GLOBAL%$base_name$ = %s("band_lobby"))		:i $skip$ = %i(1)	:i endif	:i if $ScreenElementExists$${StructQBKey id = current_band_lobby_popup}$		:i $skip$ = %i(1)	:i endif	:i if $ScreenElementExists$${StructQBKey id = dialog_box_container}$		:i $skip$ = %i(1)	:i endif	:i if NOT $GotParam$${StructQBKey skip}$		:i $player$ = (~%GLOBAL%$submenu_data$->$player$)		:i $invalid_alpha$ = %i(0)		:i if ((~%GLOBAL%$submenu_data$->$occupied$) = %i(1))			:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)				:i $getplayerinfo$%GLOBAL%$player$$controller$				:i if NOT $IsControllerPluggedIn$$controller$ = %GLOBAL%$controller$					:i $invalid_alpha$ = %i(1)				:i elseif NOT $band_lobby_check_single_controller$$player$ = %GLOBAL%$player$					:i if NOT $InNetGame$						:i $NetSessionFunc$$obj$ = $party$$func$ = $update_game_data$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}						:i $band_lobby_update_part_to_match_controller$$submenu_index$ = %GLOBAL%$submenu_index$						:i return 					:i endif				:i elseif $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$					:i $getplayerinfo$%GLOBAL%$player$$mic_preference$					:i $getplayerinfo$%GLOBAL%$player$$mic_type$					:i $getplayerinfo$%GLOBAL%$player$$lobby_mic_valid$					:i if (%GLOBAL%$mic_type$ = $None$ OR %GLOBAL%$mic_preference$ = $None$ OR %GLOBAL%$lobby_mic_valid$ = %i(0))						:i $invalid_alpha$ = %i(1)					:i endif				:i endif			:i endif		:i endif		:i %GLOBAL%$invalid_icon_id$.$se_setprops$:s{			:i $alpha$ = %GLOBAL%$invalid_alpha$		:i :s}	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i endfunction]Script band_lobby_signin acece80b [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				controller			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[7cd060bd]^$d$ = %GLOBAL%$controller$	:i $change$${StructQBKey respond_to_signin_changed_func = band_lobby_signin_changed}$	:i $band_lobby_desc_id$.$se_setprops$${StructQBKey block_events}$	:i if $IsXenonOrWinDX$		:i $call_blade$ = %i(0)		:i if NOT $GotParam$${StructQBKey func}$			:i if ($CheckForSignin$$local$$controller_index$ = %GLOBAL%$controller$)				:i if NOT ($CheckForSignin$$controller_index$ = %GLOBAL%$controller$)					:i $func$ = $showsigninui$					:i $params$ = :s{$convert_offline_to_guest$:s}					:i $call_blade$ = %i(1)				:i endif				:i if $GotParam$${StructQBKey forceui4}$					:i $func$ = $showsigninui4pane$					:i $params$ = :s{$online_only$:s}					:i $call_blade$ = %i(1)				:i else 					:i if NOT $NetSessionFunc$$func$ = $ismultiplayerallowed$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}						:i $func$ = $showsigninui4pane$						:i $params$ = :s{$online_only$:s}						:i $call_blade$ = %i(1)					:i endif				:i endif			:i else 				:i $func$ = $showsigninui4pane$				:i $params$ = :s{$online_only$:s}				:i $call_blade$ = %i(1)			:i endif		:i else 			:i $call_blade$ = %i(1)		:i endif		:i if (%GLOBAL%$call_blade$ = %i(1))			:i if $NetSessionFunc$$func$ = %GLOBAL%$func$$params$ = %GLOBAL%$params$$breakpoint$ = %i(0)				:i $band_lobby_update_ticker$${StructQBKey msg_checksum = signin_waiting}$				:i $wait_for_blade_complete$			:i else 				:i $printf$${StructQBStringQs 0x910ff9a5}$			:i endif		:i endif	:i elseif $IsPS3$		:i if NOT $CheckForSignin$$controller_index$ = %GLOBAL%$controller$			:i $change$${StructInt ps3_signin_complete = 0}$			:i $NetSessionFunc$${				StructQBKey func = onlinesignin				StructStruct params				{					StructHeader					{						StructQBKey callback = signin_complete_callback					}				}			}$						:i $wait_for_blade_complete$		:i endif		:i $NetSessionFunc$${StructQBKey func = is_lobby_available}$		:i $band_lobby_set_gamertag_strings$$controller$ = %GLOBAL%$controller$	:i else 		:i $scriptassert$${StructQBStringQs 0x0c85b718}$	:i endif	:i $change$${StructQBKey respond_to_signin_changed_func = band_lobby_signin_changed}$	:i $band_lobby_desc_id$.$se_setprops$${StructQBKey unblock_events}$	:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$	:i endfunction]Script band_lobby_signin_changed 0x12481cd4 [	:i $printf$$channel$ = $band_lobby$^[351a0044]^$d$ = %GLOBAL%$controller$	:i if $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$		:i $band_lobby_desc_id$.$se_setprops$${StructQBKey unblock_events}$		:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$	:i endif	:i if $InInternetMode$		:i if $InNetGame$			:i $handle_signin_changed$$savegame$ = %GLOBAL%$savegame$			:i return 		:i else 			:i $getplayerinfo$(~$g_leader_player_num$)$controller$$out$ = $leader_controller$			:i if (%GLOBAL%$leader_controller$ = %GLOBAL%$controller$)				:i if $band_lobby_are_remote_players_in_game$					:i $handle_signin_changed$$savegame$ = %GLOBAL%$savegame$					:i return 				:i else 					:i $band_lobby_change_network$$player$ = (~$g_leader_player_num$)$network$ = $local$$focus$ = %i(0)					:i $band_lobby_refresh_all_submenus$${StructQBKey type = not_in_game}$				:i endif			:i endif		:i endif	:i endif	:i if $ScreenElementExists$${StructQBKey id = band_lobby_not_all_signed_confirm_menu}$		:i $band_lobby_not_all_signed_in_dialog_exit$	:i endif	:i if $ScreenElementExists$${StructQBKey id = switch_to_enabled_profile_or_guest}$		:i $band_lobby_switch_to_enabled_profile_or_guest_close$	:i endif	:i $tmp_controller$ = %GLOBAL%$controller$	:i $ui_event_get_top$	:i if (%GLOBAL%$base_name$ = %s("mic_binding"))		:i $mic_binding_end$	:i elseif (%GLOBAL%$base_name$ !== %s("band_lobby"))		:i $UI_SFX$${			StructQBKey menustate = BandLobby			StructQBKey uitype = back		}$				:i $generic_event_back$	:i endif	:i $controller$ = %GLOBAL%$tmp_controller$	:i if $band_lobby_does_popup_exist$		:i $band_lobby_destroy_popup_menu$	:i endif	:i $ui_signin_changed_func$$controller$ = %GLOBAL%$controller$	:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$	:i if $IsLocallySignedIn$$controller$ = %GLOBAL%$savegame$		:i $GamerPicTextureRequest$:s{			:i $local_user_index$ = %GLOBAL%$savegame$			:i $local_id$ = %GLOBAL%$savegame$		:i :s}	:i endif	:i $found_player$ = %i(0)	:i $i$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $player$	:i $getplayerinfo$%GLOBAL%$player$$controller$$out$ = $temp_controller$	:i $getplayerinfo$%GLOBAL%$player$$is_local_client$	:i if ((%GLOBAL%$temp_controller$ = %GLOBAL%$controller$) AND (%i(1) = %GLOBAL%$is_local_client$))		:i $found_player$ = %i(1)		:i $band_lobby_wait_for_menu_change$		:i if $band_lobby_has_managed_submenu$			:i $band_lobby_manage_band_members$$action$ = $deselect$$player$ = (~$g_leader_player_num$)$submenu_index$ = %GLOBAL%$managed_submenu$		:i endif		:i $band_lobby_wait_for_menu_change$		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $occupied$		:i if (%GLOBAL%$occupied$ = %i(1))			:i $band_lobby_clear_submenu_data$$submenu_data_index$ = %GLOBAL%$i$			:i $SetPlayerInfo$%GLOBAL%$player$$in_game$ = %i(0)			:i $NetSessionFunc$$func$ = $removecontroller$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}			:i if NOT $NetSessionFunc$${					StructQBKey obj = party					StructQBKey func = is_host				}$								:i $NetSessionFunc$:s{					:i $obj$ = $party$					:i $func$ = $remove_playr_from_party$					:i $params$ = :s{						:i $controller_index$ = %GLOBAL%$controller$					:i :s}				:i :s}			:i endif			:i $action$ = $back$			:i if (~$g_leader_player_num$ = %GLOBAL%$player$)				:i if $band_lobby_desc_id$.$desc_resolvealias$${StructQBKey name = alias_band_viewport_vmenu}$					:i if %GLOBAL%$resolved_id$.$getsingletag$$managing$						:i if (%GLOBAL%$managing$ = %i(1))							:i $band_lobby_band_memebers_back$$submenu_index$ = %GLOBAL%$i$						:i endif					:i endif				:i endif				:i $band_lobby_lost_band_leader$			:i endif			:i $set_chosen_character_id$$player$ = %GLOBAL%$player$$id$ = $None$			:i $sanity_check_fix_deleted_characters$			:i $band_lobby_update_player_viewport_assignments$			:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $occupied$			:i if (%GLOBAL%$occupied$ = %i(0))				:i (~$band_lobby_viewport_menus$:a{%GLOBAL%$i$:a}).$obj_spawnscriptnow$$band_lobby_change_menu$$params$ = :s{$action$ = $back$$menu$ = $join$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$i$:s}			:i endif			:i $band_lobby_update_button_helpers$			:i return 		:i endif		:i continue	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i if (%GLOBAL%$found_player$ = %i(1))		:i if $ScreenElementExists$$id$ = (~$band_lobby_viewport_menus$:a{%GLOBAL%$i$:a})			:i (~$band_lobby_viewport_menus$:a{%GLOBAL%$i$:a}).$obj_spawnscriptnow$$band_lobby_change_menu$$params$ = :s{$action$ = $forward$$menu$ = $join$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$i$:s}		:i endif	:i endif	:i $spawnscriptnow$${StructQBKey band_lobby_signin_changed_restore_friends_feed}$	:i endfunction]Script band_lobby_signin_changed_restore_friends_feed 0x8b5a16c0 [	:i $wait$${		StructInt 4		StructQBKey gameframes	}$		:i if $ScriptIsRunning$${StructQBKey band_lobby_signin_changed}$		:i return 	:i endif	:i if $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$		:i $band_lobby_desc_id$.$obj_spawnscriptlater$${			StructQBKey attempt_to_add_friend_feed			StructStruct params			{				StructHeader				{					StructQBKey menu = band_lobby					StructQBKey parent_id = band_lobby_desc_id				}			}		}$			:i endif	:i endfunction]Script band_lobby_set_gamertag_strings 0x81b47991 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				controller			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d6368250	}$		:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller$		:i $i$ = %i(0)		:i while 		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$i$		:i if ((~%GLOBAL%$submenu_data$->$occupied$) = %i(1))			:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$			:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$gamertag$			:i if NOT $NetSessionFunc$$obj$ = $match$$func$ = $get_gamertag$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}				:i $name$ = ^[00000000]^			:i endif			:i $change$$globalname$ = %GLOBAL%$gamertag$$newValue$ = %GLOBAL%$name$			:i $change$$globalname$ = (~%GLOBAL%$submenu_data$->$gamertag_checksum$)$newValue$ = %GLOBAL%$name$		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to (~$g_num_lobby_local_submenus$)	:i endif	:i endfunction]Script band_lobby_drop_player abc551e4 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d897fbb0	}$		:i $printstruct$ isNull 	:i if (%GLOBAL%$is_game_over$ = %i(0))		:i $i$ = %i(0)		:i while 		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$i$		:i if (%GLOBAL%$dropped_player_num$ = (~%GLOBAL%$submenu_data$->$player$))			:i if ((~%GLOBAL%$submenu_data$->$occupied$) = %i(1))				:i $band_lobby_clear_submenu_data$$submenu_data_index$ = %GLOBAL%$i$				:i if $ScreenElementExists$$id$ = (~$band_lobby_viewport_menus$:a{%GLOBAL%$i$:a})					:i (~$band_lobby_viewport_menus$:a{%GLOBAL%$i$:a}).$obj_spawnscriptnow$$band_lobby_change_menu$$params$ = :s{$action$ = $back$$menu$ = $empty$$player$ = (%GLOBAL%$i$ + %i(1))$submenu_index$ = %GLOBAL%$i$$focus$ = %i(0):s}				:i endif				:i continue			:i endif		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to (~$g_num_lobby_local_submenus$)		:i $common_net_player_cleanup$$player_num$ = %GLOBAL%$dropped_player_num$		:i $band_lobby_make_visible_players_mutually_exclusive$		:i $change$$net_dropped_players_flag$ = ((~$net_dropped_players_flag$) + %i(1))		:i switch %GLOBAL%$drop_reason$			:i case $net_message_player_kicked$				:i $FormatText$$textname$ = $drop_msg$^[7adab19b]^$s$ = %GLOBAL%$name_string$				:i endcase			case $net_message_player_quit$				:i $FormatText$$textname$ = $drop_msg$^[afcc55cd]^$s$ = %GLOBAL%$name_string$				:i endcase			case $net_message_player_dropped$				:i endcase			case $net_message_player_timed_out$				:i $FormatText$$textname$ = $drop_msg$^[c11e11da]^$s$ = %GLOBAL%$name_string$				:i endcase			default 				:i $drop_msg$ = ^[00000000]^		:i end_switch		:i $GetNumPlayersInGame$${StructQBKey local}$		:i $num_local_players$ = %GLOBAL%$num_players$		:i $GetNumPlayersInGame$		:i if (%GLOBAL%$num_local_players$ = %GLOBAL%$num_players$)			:i $band_lobby_end_game$ isNull 		:i else 			:i if $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$				:i $add_dropped_player_to_dialog_box$$parent$ = $band_lobby_desc_id$$msg_text$ = %GLOBAL%$drop_msg$			:i endif		:i endif	:i endif	:i endfunction]Script band_lobby_end_game 0x400e1220 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs da78fc3b	}$		:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$	:i $ui_event_get_top$	:i if ((%GLOBAL%$base_name$ = %s("quest_map")) OR (%GLOBAL%$base_name$ = %s("quest_map_giglist")) OR (%GLOBAL%$base_name$ = %s("quest_band_select")))		:i if $ScreenElementExists$${StructQBKey id = current_menu}$			:i $LaunchEvent$${				StructQBKey type = unfocus				StructQBKey target = current_menu			}$					:i endif	:i elseif $ScreenElementExists$${StructQBKey id = RockRecordInterface}$		:i $LaunchEvent$${			StructQBKey type = unfocus			StructQBKey target = RockRecordInterface		}$				:i $elsieif$${			StructQBKey ScreenElementExistsSimpleID			StructQBKey id = hud_mic_binding		}$				:i $hud_mic_binding$.$se_setprops$${StructQBKey block_events}$	:i endif	:i switch %GLOBAL%$drop_reason$		:i case $net_message_player_kicked$			:i $FormatText$$textname$ = $drop_msg$^[7adab19b]^$s$ = %GLOBAL%$name_string$			:i $GetNumPlayersInGame$${StructQBKey local}$			:i if (%GLOBAL%$num_players$ > %i(0))				:i $GetFirstPlayer$${StructQBKey local}$				:i while 				:i if (%GLOBAL%$player$ = %GLOBAL%$dropped_player_num$)					:i $FormatText$${						StructQBKey textname = first_msg						StructQBStringQs bfe89076					}$										:i continue				:i endif				:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$				:i loop_to %GLOBAL%$num_players$			:i endif			:i endcase		case $net_message_player_quit$			:i $FormatText$$textname$ = $first_msg$^[567f10d8]^$s$ = %GLOBAL%$name_string$			:i endcase		case $net_message_player_dropped$			:i endcase		case $net_message_player_timed_out$			:i $FormatText$$textname$ = $first_msg$^[d4b272d7]^$s$ = %GLOBAL%$name_string$			:i endcase		default 			:i $first_msg$ = ^[00000000]^	:i end_switch	:i $FormatText$$textname$ = $msg$^[78bb855f]^$s$ = %GLOBAL%$first_msg$	:i $create_net_popup$$Title$ = ^[5ca2c535]^$popup_text$ = %GLOBAL%$msg$	:i if $ScreenElementExists$${StructQBKey id = dialog_box_desc_id}$		:i $dialog_box_desc_id$.$se_setprops$${StructFloat z_priority = 1500.199951171875}$		:i $dialog_box_desc_id$.$obj_spawnscriptnow$${			StructQBKey band_lobby_end_game_spawned			StructQBKey id = not_ui_player_drop_scripts		}$			:i endif	:i if $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$		:i $band_lobby_desc_id$.$obj_killspawnedscript$${StructQBKey name = band_lobby_display_final_matchmaking_players}$	:i endif	:i endfunction]Script band_lobby_end_game_spawned c36a6325 [	:i $wait$${		StructInt 3		StructQBKey seconds	}$		:i $destroy_net_popup$	:i if $ScreenElementExists$${StructQBKey id = QuestMapID}$		:i $QuestMapID$.$se_setprops$${StructFloat net_dialog_alpha = 0.00}$	:i elseif $ScreenElementExists$${StructQBKey id = QuestMapGiglistID}$		:i $QuestMapGiglistID$.$se_setprops$${StructFloat net_dialog_alpha = 0.00}$	:i endif	:i $quit_network_game$	:i $band_lobby_restore_prematchmaking_settings$	:i while 	:i if NOT $savegame_async_is_busy$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i while 	:i if NOT $ScriptIsRunning$${StructQBKey Downloads_EnumContent}$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i if $ui_event_exists_in_stack$${StructString name = "band_lobby"}$		:i $change$${StructInt g_suppress_anim_in = 1}$		:i $ui_memcard_autosave_all_players$${			StructQBKey event = menu_back			StructQBKey state = uistate_band_lobby			StructStruct Data			{				StructHeader				{					StructInt no_anim_in = 1				}			}			StructQBKey is_popup		}$				:i $ui_event_wait_for_safe$		:i while 		:i if NOT $ui_event_exists_in_stack$${StructString name = "memcard"}$			:i if (~$g_memcard_ingame_is_paused$ = %i(0))				:i continue			:i endif		:i endif		:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i $printf$${StructString 0x00000000 = "waiting for autosave to finish"}$		:i loop_to 		:i $ui_event_wait_for_safe$		:i $change$${StructInt g_suppress_anim_in = 0}$		:i $ui_event$${StructQBKey event = menu_refresh}$	:i endif	:i endfunction]Script band_lobby_change_lobby 0x61fb6b8f [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index				lobby				action			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[1cc443d6]^$c$ = %GLOBAL%$submenu_index$$d$ = %GLOBAL%$player$	:i $change$$g_lobby_state$ = %GLOBAL%$lobby$	:i $band_lobby_set_gamemode_by_state$$lobby$ = (~$g_lobby_state$)	:i if NOT (~$g_lobby_net_state$ = $local$)		:i $band_lobby_set_party_joiner_mode$		:i $band_lobby_set_party_joinable$	:i endif	:i $band_lobby_update_lobby_title$	:i $band_lobby_update_button_helpers$	:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$	:i $fastgetarraysize$${StructQBString array = band_lobby_viewport_menus}$	:i %GLOBAL%$submenu_index$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $player$	:i if (%GLOBAL%$player$ !== ~$g_leader_player_num$)		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}	:i endif	:i %GLOBAL%$submenu_index$ = (%i(1) + %GLOBAL%$submenu_index$)	:i loop_to %GLOBAL%$array_size$	:i $band_lobby_force_submenu_change_all$${		StructQBKey menu = main		StructQBKey submenu_data_match = occupied		StructInt match_value = 1		StructInt focus = 1		StructQBKey action = back	}$		:i $band_lobby_reset_all_chosen_characters$${StructQBKey not_silhouettes}$	:i $persistent_band_refresh_changed_characters$	:i endfunction]Script band_lobby_set_gamemode_by_state b42fbfb8 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				lobby			]		}		StructQBKey all	}$		:i if (%GLOBAL%$lobby$ = $vs$)		:i if (~$competitive_rules$ = $solo_fest_mode$)			:i $change$${StructQBKey game_mode = fest_mode}$		:i elseif (~$competitive_rules$ = $team_fest_mode$)			:i $change$${StructQBKey game_mode = fest_mode_team}$		:i else 			:i $rules$ = (~$competitive_rules$)			:i if ((~%GLOBAL%$rules$->$team$) = %i(1))				:i $change$${StructQBKey game_mode = compmega_team}$			:i else 				:i $change$${StructQBKey game_mode = compmega}$			:i endif		:i endif	:i elseif (%GLOBAL%$lobby$ = $career$)		:i $change$${StructQBKey game_mode = career}$	:i elseif (%GLOBAL%$lobby$ = $quickplay$)		:i $change$${StructQBKey game_mode = quickplay}$	:i endif	:i if (%GLOBAL%$lobby$ !== $vs$)		:i $session_stats_reset$	:i endif	:i endfunction]Script band_lobby_choose_gamemmode 0x21d439f3 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				game_mode			]		}		StructQBKey all	}$		:i if ((%GLOBAL%$game_mode$ = $quickplay_traditional$) OR (%GLOBAL%$game_mode$ = $quickplay_mixed$))		:i return 	:i endif	:i if (		:i (%GLOBAL%$game_mode$ = $solo_fest_mode$) OR 		:i (%GLOBAL%$game_mode$ = $team_fest_mode$)		:i )	:i endif	:i $change$$game_mode$ = %GLOBAL%$game_mode$	:i $change$$g_copy_game_mode$ = %GLOBAL%$game_mode$	:i if $GotParam$${StructQBKey rules}$		:i $change$$competitive_rules$ = %GLOBAL%$rules$	:i endif	:i $band_lobby_update_lobby_title$	:i $band_lobby_update_button_helpers$	:i $band_lobby_change_menu$$menu$ = $main$$action$ = %GLOBAL%$action$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$	:i endfunction]Script band_lobby_change_network 0x1c8692ac [	${StructInt focus = 1}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				network			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x70172cac	}$		:i if $GotParam$${StructQBKey submenu_index}$		:i $submenu_index$ = %GLOBAL%$submenu_index$	:i endif	:i if ((~$g_lobby_net_state$ = $local$) AND ((%GLOBAL%$network$ = $net_private$) OR (%GLOBAL%$network$ = $net_public$)))		:i if $band_lobby_check_if_all_players_are_online_enabled$			:i if (%GLOBAL%$focus$ = %i(1))				:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$			:i endif			:i $band_lobby_update_ticker$${StructQBKey msg_checksum = update_net}$			:i $change$$g_lobby_net_state$ = %GLOBAL%$network$			:i if (%GLOBAL%$network$ = $net_public$)				:i if (~$game_mode$ = $compmega$ AND ~$competitive_rules$ !== $team_faceoff$ AND ~$competitive_rules$ !== $faceoff$)					:i $change$${StructQBKey game_mode = fest_mode}$					:i $change$${StructQBKey competitive_rules = solo_fest_mode}$				:i endif			:i endif			:i $band_lobby_update_lobby_title$			:i $band_lobby_ensure_primary_controller_is_signed_in$			:i if NOT $band_lobby_net_setup$				:i $change$${StructQBKey g_lobby_net_state = local}$				:i $band_lobby_update_lobby_title$				:i $band_lobby_update_button_helpers$			:i endif			:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$			:i if (%GLOBAL%$focus$ = %i(1))				:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = focus}$			:i endif		:i else 			:i $band_lobby_update_ticker$${StructQBKey msg_checksum = players_not_live_enabled}$		:i endif	:i elseif ((%GLOBAL%$network$ = $local$) AND ((~$g_lobby_net_state$ = $net_private$) OR (~$g_lobby_net_state$ = $net_public$)))		:i if (%GLOBAL%$focus$ = %i(1))			:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$		:i endif		:i $band_lobby_update_ticker$${StructQBKey msg_checksum = update_net}$		:i $change$$g_lobby_net_state$ = %GLOBAL%$network$		:i $band_lobby_update_lobby_title$		:i $band_lobby_net_cleanup$		:i $NetSessionFunc$${StructQBKey func = match_init}$		:i $NetSessionFunc$${StructQBKey func = friends_init}$		:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$		:i if (%GLOBAL%$focus$ = %i(1))			:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = focus}$		:i endif	:i elseif (((%GLOBAL%$network$ = $net_private$) AND (~$g_lobby_net_state$ = $net_public$)) OR ((%GLOBAL%$network$ = $net_public$) AND (~$g_lobby_net_state$ = $net_private$)))		:i if (%GLOBAL%$focus$ = %i(1))			:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$		:i endif		:i $band_lobby_update_ticker$${StructQBKey msg_checksum = update_net}$		:i $change$$g_lobby_net_state$ = %GLOBAL%$network$		:i $band_lobby_update_lobby_title$		:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$		:i if (%GLOBAL%$focus$ = %i(1))			:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = focus}$		:i endif	:i else 		:i $change$$g_lobby_net_state$ = %GLOBAL%$network$		:i $band_lobby_update_lobby_title$	:i endif	:i if $GotParam$${StructQBKey action}$		:i $band_lobby_update_button_helpers$		:i $band_lobby_change_menu$$menu$ = $main$$action$ = %GLOBAL%$action$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$	:i endif	:i endfunction]Script band_lobby_change_global e673cc7c [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index				menu				action				global				value			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x99d0a9b9	}$		:i $change$$globalname$ = %GLOBAL%$global$$newValue$ = %GLOBAL%$value$	:i $band_lobby_change_menu$$menu$ = %GLOBAL%$menu$$action$ = %GLOBAL%$action$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$	:i endfunction]Script band_lobby_set_mic_preference 0x8c37410a [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				mic_preference			]		}	}$		:i $SetPlayerInfo$%GLOBAL%$player$$mic_preference$ = %GLOBAL%$mic_preference$	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i $save_progression_instrument_user_option$$part$ = $Vocals$$controller$ = %GLOBAL%$controller$$option$ = %s("mic_preference")$new_value$ = %GLOBAL%$mic_preference$	:i endfunction]Script band_lobby_set_mic_preference_menu b941b2e4 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				mic_preference				action				menu			]		}		StructQBKey all	}$		:i $band_lobby_set_mic_preference$$player$ = %GLOBAL%$player$$mic_preference$ = %GLOBAL%$mic_preference$	:i if $GotParam$${StructQBKey no_forced}$		:i $band_lobby_vocals_forced_menu$$player$ = %GLOBAL%$player$$action$ = %GLOBAL%$action$$previous_menu$ = $forced_mic_preference$$submenu_index$ = %GLOBAL%$submenu_index$	:i else 		:i $band_lobby_change_menu$$menu$ = %GLOBAL%$menu$$action$ = %GLOBAL%$action$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$	:i endif	:i endfunction]Script band_lobby_change_playerinfo 0x85a54694 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index				menu				action			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs dd3e9d04	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if NOT $GotParam$${StructQBKey character_id}$		:i if (%GLOBAL%$player$ !== (~%GLOBAL%$submenu_data$->$player$))			:i $scriptassert$%s("Logic is screwed up. Player %a != %b")$a$ = %GLOBAL%$player$$b$ = (~%GLOBAL%$submenu_data$->$player$)		:i endif	:i endif	:i if $GotParam$${StructQBKey difficulty}$		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$		:i if (%GLOBAL%$part$ = $drum$)			:i if (%GLOBAL%$difficulty$ = $expert_plus$)				:i $difficulty$ = $expert$				:i $double_kick_drum$ = %i(1)			:i else 				:i $double_kick_drum$ = %i(0)			:i endif			:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$double_kick_drum$ = %GLOBAL%$double_kick_drum$$store$			:i $get_progression_instrument_user_option$$part$ = $drum$$controller$ = %GLOBAL%$controller$$option$ = %s("double_kick_drum")			:i if (%GLOBAL%$difficulty$ !== %GLOBAL%$user_option$)				:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)				:i $save_progression_instrument_user_option$$part$ = $drum$$controller$ = %GLOBAL%$controller$$option$ = %s("double_kick_drum")$new_value$ = %GLOBAL%$double_kick_drum$			:i endif		:i endif		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$difficulty$ = %GLOBAL%$difficulty$$store$		:i $get_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("difficulty")		:i if (%GLOBAL%$difficulty$ !== %GLOBAL%$user_option$)			:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)			:i $save_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("difficulty")$new_value$ = %GLOBAL%$difficulty$		:i endif	:i elseif $GotParam$${StructQBKey character_id}$		:i $RequireParams$${			StructArray 0x00000000			{				ArrayQBKey				[					character_savegame				]			}			StructQBKey all		}$				:i if $CharacterProfileGetCategory$$name$ = %GLOBAL%$character_id$			:i if (%GLOBAL%$profile_category$ = $temporary$)				:i $scriptassert$%s("Should not be setting the character_id to %s")$s$ = %GLOBAL%$character_id$			:i endif		:i endif		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$character_id$ = %GLOBAL%$character_id$$store$		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$character_savegame$ = %GLOBAL%$character_savegame$$store$		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$stored_character_index$		:i $new_character_id$ = %GLOBAL%$character_id$		:i $new_character_savegame$ = %GLOBAL%$character_savegame$		:i $get_saved_band_member$$index$ = %GLOBAL%$stored_character_index$$savegame$ = %GLOBAL%$savegame$		:i if (%GLOBAL%$character_id$ !== %GLOBAL%$new_character_id$ OR %GLOBAL%$character_savegame$ !== %GLOBAL%$new_character_savegame$)			:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)			:i $globaltag_save_band_member_choice$:s{				:i $index$ = %GLOBAL%$stored_character_index$				:i $character_id$ = %GLOBAL%$new_character_id$				:i $savegame$ = %GLOBAL%$savegame$				:i $character_savegame$ = %GLOBAL%$new_character_savegame$				:i $borrowed_from_band_leader$ = %GLOBAL%$borrowed_from_band_leader$			:i :s}		:i endif	:i elseif $GotParam$${StructQBKey lefty_flip}$		:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$lefty_flip$ = %GLOBAL%$lefty_flip$$store$		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$		:i if (%GLOBAL%$part$ = $guitar$ OR %GLOBAL%$part$ = $Bass$)			:i $get_progression_instrument_user_option$$part$ = $guitar$$controller$ = %GLOBAL%$controller$$option$ = %s("lefty_flip")			:i if (%GLOBAL%$lefty_flip$ !== %GLOBAL%$user_option$)				:i $save_progression_instrument_user_option$$part$ = $guitar$$controller$ = %GLOBAL%$controller$$option$ = %s("lefty_flip")$new_value$ = %GLOBAL%$lefty_flip$			:i endif			:i $get_progression_instrument_user_option$$part$ = $Bass$$controller$ = %GLOBAL%$controller$$option$ = %s("lefty_flip")			:i if (%GLOBAL%$lefty_flip$ !== %GLOBAL%$user_option$)				:i $save_progression_instrument_user_option$$part$ = $Bass$$controller$ = %GLOBAL%$controller$$option$ = %s("lefty_flip")$new_value$ = %GLOBAL%$lefty_flip$			:i endif		:i elseif (%GLOBAL%$part$ = $drum$)			:i $get_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("lefty_flip")			:i if (%GLOBAL%$lefty_flip$ !== %GLOBAL%$user_option$)				:i $save_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("lefty_flip")$new_value$ = %GLOBAL%$lefty_flip$			:i endif		:i else 			:i $scriptassert$${StructString 0x00000000 = "no lefty flip on vocals!"}$		:i endif	:i elseif $GotParam$${StructQBKey vocals_highway_view}$		:i $band_lobby_set_vocals_highway_view$$player$ = (~%GLOBAL%$submenu_data$->$player$)$vocals_highway_view$ = %GLOBAL%$vocals_highway_view$		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$		:i $get_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("highway_view")		:i if (%GLOBAL%$vocals_highway_view$ !== %GLOBAL%$user_option$)			:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)			:i $save_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("highway_view")$new_value$ = %GLOBAL%$vocals_highway_view$		:i endif	:i elseif $GotParam$${StructQBKey part}$		:i $band_lobby_rocker_changed_player_part$:s{			:i $part$ = %GLOBAL%$part$			:i $player$ = %GLOBAL%$player$			:i $submenu_index$ = %GLOBAL%$submenu_index$		:i :s}	:i endif	:i $persistent_band_refresh_changed_characters$	:i if $GotParam$${StructQBKey vocals_forced_previous_menu}$		:i $band_lobby_vocals_forced_menu$$player$ = %GLOBAL%$player$$action$ = %GLOBAL%$action$$previous_menu$ = %GLOBAL%$vocals_forced_previous_menu$$submenu_index$ = %GLOBAL%$submenu_index$	:i else 		:i if $GotParam$${StructQBKey no_forced}$			:i $band_lobby_change_menu$$menu$ = %GLOBAL%$menu$$action$ = %GLOBAL%$action$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$		:i else 			:i $band_lobby_change_menu$$menu$ = %GLOBAL%$menu$$action$ = %GLOBAL%$action$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$		:i endif	:i endif	:i if (~$g_career_search$ !== $null$)		:i $set_player_temp_net_id_array$$player$ = (~%GLOBAL%$submenu_data$->$player$)	:i endif	:i endfunction]Script band_lobby_change_menu 0x039f7f48 [	${StructInt focus = 1}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				menu				player				submenu_index				action			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[0d7dd435]^$c$ = %GLOBAL%$submenu_index$$d$ = %GLOBAL%$player$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i if $ScreenElementExists$$id$ = (~$band_lobby_viewport_menus$:a{%GLOBAL%$submenu_index$:a})		:i $original_menu$ = %GLOBAL%$menu$		:i if (%GLOBAL%$menu$ = $main$)			:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(1))				:i $menu$ = $manage_member$				:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $return_menu$$value$ = $main$			:i else 				:i if ((~$g_leader_player_num$ = %GLOBAL%$player$) AND (~$g_net_leader_player_num$ = %GLOBAL%$player$))					:i if (~$g_lobby_state$ = $career$)						:i $menu$ = $band_leader_career$					:i elseif (~$g_lobby_state$ = $quickplay$)						:i $menu$ = $band_leader_quickplay$					:i else 						:i $menu$ = $band_leader_vs$					:i endif				:i else 					:i $menu$ = $band_member$				:i endif			:i endif		:i elseif (%GLOBAL%$menu$ = $select_rocker$)			:i $FormatText$$checksumname$ = $select_rocker$%s("select_rocker%i")$i$ = %GLOBAL%$submenu_index$			:i $menu$ = %GLOBAL%$select_rocker$		:i endif		:i if NOT $GotParam$${StructQBKey no_forced}$			:i if $band_lobby_get_forced_menu$$submenu_index$ = %GLOBAL%$submenu_index$				:i %GLOBAL%$menu$ = %GLOBAL%$forced_menu$			:i endif		:i endif		:i (~$band_lobby_viewport_menus$:a{%GLOBAL%$submenu_index$:a}).$menu_getselectedindex$		:i $array$ = (~%GLOBAL%$submenu_data$->$menu_indices$)		:i if (%GLOBAL%$action$ = $forward$)			:i $focus_value$ = $null$			:i $default_index$ = %i(0)			:i $menu_options$ = (~$band_lobby_submenu_states$->%GLOBAL%$menu$->$options$)			:i if $StructureContains$$structure$ = (~$band_lobby_submenu_states$->%GLOBAL%$menu$)$focus_param$				:i $band_lobby_get_focus_value$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$$focus_param$ = (~$band_lobby_submenu_states$->%GLOBAL%$menu$->$focus_param$)				:i $GetArraySize$${StructQBKey menu_options}$				:i if (%GLOBAL%$array_size$ > %i(0))					:i $i$ = %i(0)					:i $index$ = %i(0)					:i while 					:i %GLOBAL%$option$ = (~$band_lobby_submenu_states$->%GLOBAL%$menu$->$options$:a{%GLOBAL%$i$:a})					:i if $StructureContains$$structure$ = %GLOBAL%$option$$condition$						:i %GLOBAL%$condition$ = (%GLOBAL%$option$->$condition$)						:i if %GLOBAL%$condition$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$							:i if ((%GLOBAL%$menu_options$:a{%GLOBAL%$i$:a}->$checksum$) = %GLOBAL%$focus_value$)								:i continue							:i endif							:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))						:i endif					:i else 						:i if ((%GLOBAL%$menu_options$:a{%GLOBAL%$i$:a}->$checksum$) = %GLOBAL%$focus_value$)							:i continue						:i endif						:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))					:i endif					:i $i$ = (%GLOBAL%$i$ + %i(1))					:i loop_to %GLOBAL%$array_size$					:i $default_index$ = %GLOBAL%$index$				:i endif			:i endif			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(2)$newValue$ = (%GLOBAL%$array$:a{%i(1):a})			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(1)$newValue$ = %GLOBAL%$selected_index$			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(0)$newValue$ = %GLOBAL%$default_index$		:i elseif (%GLOBAL%$action$ = $back$)			:i if (%GLOBAL%$menu$ = $join$)				:i $SetArrayElement$${					StructQBKey arrayName = array					StructInt index = 0					StructInt newValue = 0				}$								:i $SetArrayElement$${					StructQBKey arrayName = array					StructInt index = 1					StructInt newValue = 0				}$								:i $SetArrayElement$${					StructQBKey arrayName = array					StructInt index = 2					StructInt newValue = 0				}$							:i else 				:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(0)$newValue$ = (%GLOBAL%$array$:a{%i(1):a})				:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(1)$newValue$ = (%GLOBAL%$array$:a{%i(2):a})				:i $SetArrayElement$${					StructQBKey arrayName = array					StructInt index = 2					StructInt newValue = 0				}$							:i endif		:i endif		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu$$value$ = %GLOBAL%$menu$		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu_indices$$value$ = %GLOBAL%$array$		:i if $GotParam$${StructQBKey reset_characters}$			:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$			:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$			:i $persistent_band_refresh_changed_characters$		:i endif		:i $band_lobby_add_menu_update_to_queue$$submenu_index$ = %GLOBAL%$submenu_index$$action$ = %GLOBAL%$action$$focus$ = %GLOBAL%$focus$$menu$ = %GLOBAL%$menu$	:i endif	:i endfunction]Script band_lobby_net_setup cbef41db [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x3bdeb4db	}$		:i if $IsPS3$		:i $xenon_singleplayer_session_init$${StructQBKey ps3_signin_callback = signin_complete_callback}$		:i while 		:i if (~$ps3_signin_complete$ = %i(1))			:i continue		:i endif		:i $wait$${			StructInt 1			StructQBKey frame		}$				:i loop_to 	:i endif	:i $net_init$	:i $NetSessionFunc$${StructQBKey func = friends_init}$	:i if $IsPS3$		:i if NOT $NetSessionFunc$${StructQBKey func = is_lobby_available}$			:i $band_lobby_net_cleanup$			:i return ${StructQBKey false}$		:i endif		:i if (~$DEMONWARE_IS_READY$ = %i(1))			:i if (~$DEMONWARE_STUN_FAILED$ = %i(1))				:i $band_lobby_net_cleanup$				:i return ${StructQBKey false}$			:i endif		:i else 			:i $band_lobby_net_cleanup$			:i return ${StructQBKey false}$		:i endif	:i endif	:i $NetSessionFunc$${StructQBKey func = match_uninit}$	:i $NetSessionFunc$${StructQBKey func = match_init}$	:i $NetSessionFunc$:s{		:i $obj$ = $party$		:i $func$ = $create_party_session$		:i $params$ = :s{			:i $controller_index$ = (~$primary_controller$)			:i $callback$ = $band_lobby_net_setup_party_callback$		:i :s}	:i :s}	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_net_setup_party_callback 0x573d25e4 [	:i if (%GLOBAL%$success$ = %i(1))		:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = set_can_join_callback			StructStruct params			{				StructHeader				{					StructQBKey callback = net_party_can_accept_new_players				}			}		}$				:i $band_lobby_set_party_joiner_mode$		:i $band_lobby_set_party_joinable$		:i $band_lobby_add_in_game_players_to_party$${StructQBKey net_init}$		:i $band_lobby_store_local_players_net_and_party_ids_in_playerinfo$		:i $bl_store_local_player_net_ids_in_submenu_data$		:i $band_lobby_poll_party_object$	:i endif	:i endfunction]Script band_lobby_net_cleanup 0x1dbcccbe [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x93722761	}$		:i $band_lobby_kill_party_object_polling$	:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = stop_party_session	}$		:i $NetSessionFunc$${StructQBKey func = friends_uninit}$	:i $NetSessionFunc$${		StructQBKey obj = match		StructQBKey func = cancel_join_server	}$		:i $quit_network_game$	:i $shut_down_net_play$	:i endfunction]Script band_lobby_set_party_joiner_mode eb14765e [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d51c4bb7	}$		:i switch (~$g_lobby_state$)		:i case $quickplay$			:i $mode$ = $quickplay_join$			:i endcase		case $career$			:i $mode$ = $career_join$			:i endcase		case $vs$			:i $mode$ = $competitive_join$			:i endcase		default 			:i $scriptassert$${StructQBStringQs bc58f794}$	:i end_switch	:i $NetSessionFunc$:s{		:i $obj$ = $party$		:i $func$ = $set_joiner_mode$		:i $params$ = :s{			:i $mode$ = %GLOBAL%$mode$		:i :s}	:i :s}	:i endfunction]Script band_lobby_set_party_joinable 0x7a119343 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1341e861	}$		:i if NOT $GotParam$${StructQBKey joinable}$		:i switch (~$g_lobby_net_state$)			:i case $local$				:i $scriptassert$${StructQBStringQs a0f5420c}$				:i endcase			case $net_private$				:i $joinable$ = %i(1)				:i endcase			case $net_public$				:i $joinable$ = %i(1)				:i endcase			default 				:i $scriptassert$${StructQBStringQs a3be6b94}$		:i end_switch	:i endif	:i $NetSessionFunc$:s{		:i $obj$ = $party$		:i $func$ = $set_party_joinable$		:i $params$ = :s{			:i $joinable$ = %GLOBAL%$joinable$		:i :s}	:i :s}	:i endfunction]Script band_lobby_update_player_viewport_assignments 0x39987717 [	:i $printf$${StructQBStringQs 0x61a46220}$	:i $band_lobby_get_viewport_assignments$	:i $GetArraySize$%GLOBAL%$viewport_assignments$	:i %GLOBAL%$submenu_index$ = %i(0)	:i while 	:i $user_id$ = :a{%i(0)%i(0):a}	:i %GLOBAL%$viewport_player$ = (%GLOBAL%$viewport_assignments$:a{%GLOBAL%$submenu_index$:a}->$player$)	:i if (%GLOBAL%$viewport_player$ > %i(0))		:i %GLOBAL%$viewport_occupied$ = (%GLOBAL%$viewport_assignments$:a{%GLOBAL%$submenu_index$:a}->$occupied$)		:i $getplayerinfo$%GLOBAL%$viewport_player$$is_local_client$		:i $getplayerinfo$%GLOBAL%$viewport_player$$gamertag$		:i $getplayerinfo$%GLOBAL%$viewport_player$$net_id_first$		:i $getplayerinfo$%GLOBAL%$viewport_player$$net_id_second$		:i $SetArrayElement$$arrayName$ = $user_id$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$		:i $SetArrayElement$$arrayName$ = $user_id$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$		:i if (%GLOBAL%$viewport_occupied$ = %i(0))			:i $band_lobby_clear_submenu_data$$submenu_data_index$ = %GLOBAL%$submenu_index$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $player$$value$ = %GLOBAL%$viewport_player$			:i if (%GLOBAL%$submenu_index$ < (~$g_num_lobby_local_submenus$))				:i $SetPlayerInfo$%GLOBAL%$viewport_player$$is_onscreen$ = %i(1)				:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu$$value$ = $join$				:i $SetPlayerInfo$%GLOBAL%$viewport_player$$controller$ = %GLOBAL%$submenu_index$				:i if NOT $ChecksumEquals$$a$ = (~$band_lobby_viewport_menus$:a{%GLOBAL%$submenu_index$:a})$b$ = $null$					:i $band_lobby_add_menu_update_to_queue$$submenu_index$ = %GLOBAL%$submenu_index$$focus$ = %i(1)				:i endif			:i endif		:i else 			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $player$$value$ = %GLOBAL%$viewport_player$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $net_id$$value$ = %GLOBAL%$user_id$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $occupied$$value$ = %i(1)			:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $gamertag_checksum$			:i $change$$globalname$ = %GLOBAL%$gamertag_checksum$$newValue$ = (~%GLOBAL%$gamertag$)			:i if (%GLOBAL%$submenu_index$ < (~$g_num_lobby_local_submenus$))				:i $SetPlayerInfo$%GLOBAL%$viewport_player$$is_onscreen$ = %i(1)				:i if (%GLOBAL%$is_local_client$ = %i(0))					:i $SetPlayerInfo$%GLOBAL%$viewport_player$$controller$ = %GLOBAL%$submenu_index$					:i if NOT $ChecksumEquals$$a$ = (~$band_lobby_viewport_menus$:a{%GLOBAL%$submenu_index$:a})$b$ = $null$						:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu$$value$ = $remote_player$						:i $band_lobby_add_menu_update_to_queue$$submenu_index$ = %GLOBAL%$submenu_index$$focus$ = %i(1)					:i endif				:i endif			:i endif		:i endif		:i $persistent_band_get_unused_musician$		:i if (%GLOBAL%$unused_musician$ !== $None$)			:i $SetPlayerInfo$%GLOBAL%$viewport_player$$band_member$ = %GLOBAL%$unused_musician$		:i endif		:i if (%GLOBAL%$submenu_index$ < (~$g_num_lobby_local_submenus$))			:i $update_camera_for_viewport$$submenu_index$ = %GLOBAL%$submenu_index$$player$ = %GLOBAL%$viewport_player$		:i endif		:i %GLOBAL%$submenu_index$ = (%GLOBAL%$submenu_index$ + %i(1))	:i endif	:i loop_to %GLOBAL%$array_size$	:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$	:i $persistent_band_refresh_changed_characters$	:i endfunction]Script update_camera_for_viewport da3e851e [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index				player			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$band_member$	:i if $CompositeObjectExists$$name$ = %GLOBAL%$band_member$		:i $FormatText$$checksumname$ = $viewport$%s("band_viewport_%i")$i$ = %GLOBAL%$submenu_index$		:i if $ScreenElementExists$$id$ = %GLOBAL%$viewport$			:i %GLOBAL%$viewport$.$obj_killspawnedscript$$name$ = $band_lobby_play_viewport_camera$			:i $RunScriptOnScreenElement$$id$ = %GLOBAL%$viewport$$band_lobby_play_viewport_camera$$params$ = :s{$viewport_index$ = %GLOBAL%$submenu_index$$lock_to_target$ = %GLOBAL%$band_member$:s}		:i endif	:i endif	:i endfunction]Script band_lobby_get_viewport_assignments 0x4e999fa2 [	:i $viewport_assignments$ = :a{		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}		:i :s{$player$ = %i(0)$occupied$ = %i(0):s}	:i :a}	:i $viewport_player_nums$ = :a{%i(0)%i(0)%i(0)%i(0)%i(0)%i(0)%i(0)%i(0):a}	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $SetArrayElement$$arrayName$ = $viewport_assignments$$index$ = (%GLOBAL%$player$ - %i(1))$newValue$ = :s{$player$ = %GLOBAL%$player$$occupied$ = %i(1):s}		:i $SetArrayElement$$arrayName$ = $viewport_player_nums$$index$ = (%GLOBAL%$player$ - %i(1))$newValue$ = %GLOBAL%$player$		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i %GLOBAL%$num_viewports_filled$ = %GLOBAL%$num_players$	:i $GetNumPlayersInGame$${StructQBKey remote}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey remote}$		:i while 		:i $GetArraySize$%GLOBAL%$viewport_assignments$		:i %GLOBAL%$i$ = %i(0)		:i while 		:i if ((%GLOBAL%$viewport_assignments$:a{%GLOBAL%$i$:a}->$player$) = %i(0))			:i $SetArrayElement$$arrayName$ = $viewport_assignments$$index$ = %GLOBAL%$i$$newValue$ = :s{$player$ = %GLOBAL%$player$$occupied$ = %i(1):s}			:i $SetArrayElement$$arrayName$ = $viewport_player_nums$$index$ = %GLOBAL%$i$$newValue$ = %GLOBAL%$player$			:i %GLOBAL%$num_viewports_filled$ = (%GLOBAL%$num_viewports_filled$ + %i(1))			:i continue		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$remote$		:i loop_to %GLOBAL%$num_players$	:i endif	:i %GLOBAL%$npc_index$ = %i(1)	:i while 	:i if NOT $ArrayContains$$array$ = %GLOBAL%$viewport_player_nums$$contains$ = %GLOBAL%$npc_index$		:i $GetArraySize$%GLOBAL%$viewport_assignments$		:i %GLOBAL%$i$ = %i(0)		:i while 		:i if ((%GLOBAL%$viewport_assignments$:a{%GLOBAL%$i$:a}->$player$) = %i(0))			:i if (%GLOBAL%$i$ < (~$g_num_lobby_local_submenus$))				:i $band_lobby_get_available_musician_id$$viewport_assignments$ = %GLOBAL%$viewport_assignments$$num_viewports_filled$ = %GLOBAL%$num_viewports_filled$				:i $SetPlayerInfo$%GLOBAL%$npc_index$$band_member$ = %GLOBAL%$musician_id$			:i endif			:i $SetArrayElement$$arrayName$ = $viewport_assignments$$index$ = %GLOBAL%$i$$newValue$ = :s{$player$ = %GLOBAL%$npc_index$$occupied$ = %i(0):s}			:i $SetArrayElement$$arrayName$ = $viewport_player_nums$$index$ = %GLOBAL%$i$$newValue$ = %GLOBAL%$npc_index$			:i %GLOBAL%$num_viewports_filled$ = (%GLOBAL%$num_viewports_filled$ + %i(1))			:i continue		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i %GLOBAL%$npc_index$ = (%GLOBAL%$npc_index$ + %i(1))	:i loop_to (~$g_num_lobby_total_submenus$)	:i return $viewport_assignments$ = %GLOBAL%$viewport_assignments$	:i endfunction]Script band_lobby_get_available_musician_id 0x0b67c179 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				viewport_assignments			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs caa71070	}$		:i $musician_id$ = $None$	:i $available_musicians$ = :a{$musician1$$musician2$$musician3$$musician4$:a}	:i $GetArraySize$%GLOBAL%$viewport_assignments$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i if ((%GLOBAL%$viewport_assignments$:a{%GLOBAL%$i$:a}->$player$) > %i(0))			:i $getplayerinfo$(%GLOBAL%$viewport_assignments$:a{%GLOBAL%$i$:a}->$player$)$band_member$			:i $GetArraySize$%GLOBAL%$available_musicians$			:i if (%GLOBAL%$array_size$ > %i(0))				:i $j$ = %i(0)				:i while 				:i if ((%GLOBAL%$available_musicians$:a{%GLOBAL%$j$:a}) = %GLOBAL%$band_member$)					:i $RemoveArrayElement$$array$ = %GLOBAL%$available_musicians$$index$ = %GLOBAL%$j$					:i $available_musicians$ = %GLOBAL%$array$					:i continue				:i endif				:i $j$ = (%GLOBAL%$j$ + %i(1))				:i loop_to %GLOBAL%$array_size$			:i endif		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to (~$g_num_lobby_local_submenus$)		:i $GetArraySize$%GLOBAL%$available_musicians$		:i if (%GLOBAL%$array_size$ > %i(0))			:i return $musician_id$ = (%GLOBAL%$available_musicians$:a{%i(0):a})		:i else 			:i $scriptassert$${StructQBStringQs 0x90b83ada}$			:i return $musician_id$ = %GLOBAL%$musician_id$		:i endif	:i else 		:i $scriptassert$${StructQBStringQs 0x98f700d8}$		:i return $musician_id$ = %GLOBAL%$musician_id$	:i endif	:i endfunction]Script band_lobby_add_in_game_players_to_party ad56f62d [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs c4474b1d	}$		:i if $GotParam$${StructQBKey net_init}$		:i $i$ = %i(0)		:i while 		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $player$		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if $NetSessionFunc$$func$ = $iscontrolleringame$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}			:i $NetSessionFunc$$obj$ = $party$$func$ = $add_local_player_to_party$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to (~$g_num_lobby_local_submenus$)	:i else 		:i $i$ = %i(0)		:i $finished_adding_local_players$ = %i(0)		:i while 		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i if $NetSessionFunc$$obj$ = $party$$func$ = $add_local_player_to_party$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}				:i $finished_adding_local_players$ = %i(1)			:i endif			:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$			:i loop_to %GLOBAL%$num_players$		:i else 			:i continue		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i if (%GLOBAL%$finished_adding_local_players$ = %i(1))			:i continue		:i endif		:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i loop_to 		:i $printf$^[8e0dd858]^$d$ = %GLOBAL%$i$	:i endif	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $getplayerinfo$%GLOBAL%$player$$gamertag$		:i $band_lobby_get_player_user_id$$player$ = %GLOBAL%$player$		:i if $band_lobby_get_party_id_by_user_id$$gamertag$ = (~%GLOBAL%$gamertag$)$user_id$ = %GLOBAL%$user_id$			:i $SetPlayerInfo$%GLOBAL%$player$$party_id$ = %GLOBAL%$party_id$		:i endif		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script band_lobby_kill_party_object_polling 0x04d1172a [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x778bf081	}$		:i if $ScriptIsRunning$${StructQBKey band_lobby_poll_party_members}$		:i $KillSpawnedScript$${StructQBKey name = band_lobby_poll_party_members}$	:i endif	:i if $ScriptIsRunning$${StructQBKey band_lobby_update_party_data}$		:i $KillSpawnedScript$${StructQBKey name = band_lobby_update_party_data}$	:i endif	:i if $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = is_host		}$				:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = clear_shared_data		}$			:i endif	:i endfunction]Script band_lobby_poll_party_object 0x51b0e942 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x43c46458	}$		:i if $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$		:i if NOT $ScriptIsRunning$${StructQBKey band_lobby_update_party_data}$			:i $band_lobby_desc_id$.$obj_spawnscriptlater$${StructQBKey band_lobby_update_party_data}$		:i endif		:i if NOT $ScriptIsRunning$${StructQBKey band_lobby_poll_party_members}$			:i $band_lobby_desc_id$.$obj_spawnscriptlater$${StructQBKey band_lobby_poll_party_members}$		:i endif	:i endif	:i endfunction]Script band_lobby_update_party_data a119f069 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs f3c556d0	}$		:i $current_lobby_net_state$ = $null$	:i $current_lobby_state$ = $null$	:i $current_leader_party_id$ = %i(4294967295)	:i $update_lobby_title$ = %i(0)	:i while 	:i if NOT $InNetGame$		:i if $NetSessionFunc$${				StructQBKey obj = party				StructQBKey func = is_host			}$						:i if (				:i (%GLOBAL%$current_lobby_net_state$ !== (~$g_lobby_net_state$)) OR 				:i (%GLOBAL%$current_lobby_state$ !== (~$g_lobby_state$))				:i )				:i $Data$ = :s{					:i $lobby_net_state$ = (~$g_lobby_net_state$)					:i $lobby_state$ = (~$g_lobby_state$)				:i :s}				:i $NetSessionFunc$$obj$ = $party$$func$ = $append_shared_data$$params$ = :s{$Data$ = %GLOBAL%$Data$:s}				:i $current_lobby_net_state$ = (~$g_lobby_net_state$)				:i $current_lobby_state$ = (~$g_lobby_state$)			:i endif			:i if (~$g_net_leader_player_num$ > %i(0))				:i $getplayerinfo$(~$g_net_leader_player_num$)$party_id$				:i if (%GLOBAL%$current_leader_party_id$ !== %GLOBAL%$party_id$)					:i $Data$ = :s{						:i $leader_party_id$ = %GLOBAL%$party_id$					:i :s}					:i $NetSessionFunc$$obj$ = $party$$func$ = $append_shared_data$$params$ = :s{$Data$ = %GLOBAL%$Data$:s}					:i $current_leader_party_id$ = %GLOBAL%$party_id$				:i endif			:i endif		:i else 			:i $NetSessionFunc$${				StructQBKey obj = party				StructQBKey func = get_shared_data			}$						:i if $GotParam$${StructQBKey party_shared_data}$				:i if $StructureContains$$structure$ = %GLOBAL%$party_shared_data$$lobby_state$					:i if NOT $ChecksumEquals$$a$ = (%GLOBAL%$party_shared_data$->$lobby_state$)$b$ = (~$g_lobby_state$)						:i $change$$g_lobby_state$ = (%GLOBAL%$party_shared_data$->$lobby_state$)						:i $update_lobby_title$ = %i(1)					:i endif				:i endif				:i if $StructureContains$$structure$ = %GLOBAL%$party_shared_data$$lobby_net_state$					:i if NOT $ChecksumEquals$$a$ = (%GLOBAL%$party_shared_data$->$lobby_net_state$)$b$ = (~$g_lobby_net_state$)						:i $change$$g_lobby_net_state$ = (%GLOBAL%$party_shared_data$->$lobby_net_state$)						:i $update_lobby_title$ = %i(1)					:i endif				:i endif				:i if $StructureContains$$structure$ = %GLOBAL%$party_shared_data$$leader_party_id$					:i if $band_lobby_get_player_num_by_party_id$$party_id$ = (%GLOBAL%$party_shared_data$->$leader_party_id$)						:i if (%GLOBAL%$player_num$ !== ~$g_net_leader_player_num$)							:i $change$$g_net_leader_player_num$ = %GLOBAL%$player_num$							:i $band_lobby_flash_ticker_msg$${								StructQBKey msg_checksum = leader_changed								StructInt time = 3							}$													:i endif					:i endif				:i endif			:i endif			:i if (%GLOBAL%$update_lobby_title$ = %i(1))				:i $band_lobby_update_lobby_title$				:i $update_lobby_title$ = %i(0)			:i endif		:i endif		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i if $savegame_async_is_busy$				:i $async_io_status$ = $busy$			:i else 				:i $async_io_status$ = $ready$			:i endif			:i $SetPlayerInfo$%GLOBAL%$player$$async_io_status$ = %GLOBAL%$async_io_status$			:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$			:i loop_to %GLOBAL%$num_players$		:i endif	:i endif	:i $wait$${		StructFloat 1.00		StructQBKey second	}$		:i loop_to 	:i endfunction]Script band_lobby_poll_party_members 0x03608a8a [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x158d30f8	}$		:i $ChangeGlobalInteger$${		StructQBKey global_name = g_num_party_members		StructInt new_value = 0	}$		:i while 	:i if NOT $InNetGame$		:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = get_party_members		}$				:i $GetArraySize$%GLOBAL%$connections$		:i if (%GLOBAL%$array_size$ > %i(0))			:i if (%GLOBAL%$array_size$ > (~$g_num_party_members$))				:i $band_lobby_add_party_member$			:i elseif (%GLOBAL%$array_size$ < (~$g_num_party_members$))				:i $band_lobby_remove_party_member$			:i endif			:i $ChangeGlobalInteger$$global_name$ = $g_num_party_members$$new_value$ = %GLOBAL%$array_size$		:i endif	:i endif	:i $WaitOneGameFrame$	:i loop_to 	:i endfunction]Script band_lobby_add_party_member 0x204e450b [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs c9903851	}$		:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = get_party_members	}$		:i $did_add_player$ = %i(0)	:i $GetArraySize$${StructQBKey connections}$	:i if (%i(0) < %GLOBAL%$array_size$)		:i %GLOBAL%$i$ = %i(0)		:i while 		:i if (%i(0) = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$is_local$))			:i if $band_lobby_is_new_party_member$$user_id$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$user_id$)$party_id$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$party_id$)				:i $did_add_player$ = %i(1)				:i $band_lobby_find_available_submenu_data$				:i if NOT (%GLOBAL%$submenu_data_index$ = %i(4294967295))					:i if $bl_is_managing$						:i $band_lobby_manage_band_members$$action$ = $deselect$$player$ = (%GLOBAL%$managed_submenu_index$ + %i(1))$submenu_index$ = %GLOBAL%$managed_submenu_index$$forced_deselect_for_join$ = %i(1)						:i $band_lobby_wait_for_menu_change$					:i endif					:i $band_lobby_add_player_to_playerinfo$$player_type$ = $party$$Data$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a})					:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_data_index$					:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_data_index$$element$ = $net_id$$value$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$user_id$)					:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_data_index$$element$ = $player$$value$ = %GLOBAL%$playerinfo$					:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_data_index$$element$ = $occupied$$value$ = %i(1)					:i if $IsPS3$						:i $change$$globalname$ = (~%GLOBAL%$submenu_data$->$gamertag_checksum$)$newValue$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$gamertag$)					:i endif					:i $net_start_character_silhouette$$player$ = %GLOBAL%$playerinfo$$submenu_index$ = %GLOBAL%$submenu_data_index$					:i if (%GLOBAL%$submenu_data_index$ < (~$g_num_lobby_local_submenus$))						:i $band_lobby_wait_for_menu_change$						:i $persistent_band_get_unused_musician$						:i if (%GLOBAL%$unused_musician$ !== $None$)							:i $SetPlayerInfo$%GLOBAL%$playerinfo$$band_member$ = %GLOBAL%$unused_musician$						:i endif						:i $SetPlayerInfo$%GLOBAL%$playerinfo$$controller$ = %GLOBAL%$submenu_data_index$						:i (~$band_lobby_viewport_menus$:a{%GLOBAL%$submenu_data_index$:a}).$obj_spawnscriptnow$$band_lobby_change_menu$$params$ = :s{$action$ = $forward$$menu$ = $remote_player$$player$ = %GLOBAL%$playerinfo$$submenu_index$ = %GLOBAL%$submenu_data_index$$no_forced$:s}						:i $band_lobby_kick_leader_out_of_band_manage$					:i endif				:i else 					:i $scriptassert$${StructQBStringQs 0x826c0d06}$				:i endif				:i if $ScreenElementExists$${StructQBKey id = band_lobby_pu_gr}$					:i $band_lobby_return_from_game_rules$				:i endif			:i endif		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$		:i if (%GLOBAL%$did_add_player$ = %i(1))			:i $band_lobby_update_player_viewport_assignments$		:i endif	:i endif	:i endfunction]Script band_lobby_wait_for_menu_change f417c2ad [	:i while 	:i if NOT $ScriptIsRunning$${StructQBKey band_lobby_update_menu}$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i endfunction]Script band_lobby_remove_party_member 0x8f782bc7 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs cf805d25	}$		:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = get_party_members	}$		:i $GetArraySize$${StructQBKey connections}$	:i $GetNumPlayersInGame$	:i $removed_remote_player$ = %i(0)	:i if ((%GLOBAL%$num_players$ > %i(0)) AND (%GLOBAL%$array_size$ > %i(0)))		:i $GetFirstPlayer$		:i while 		:i if NOT $band_lobby_is_player_party_member$$player_num$ = %GLOBAL%$player$			:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(0)				:i $removed_remote_player$ = %i(1)				:i $band_lobby_get_player_submenu_index$$player_num$ = %GLOBAL%$player$				:i if (%GLOBAL%$submenu_index$ > %i(4294967295))					:i $net_clear_player_info$$player$ = %GLOBAL%$player$					:i if (%GLOBAL%$player$ < (~$g_num_lobby_local_submenus$))						:i $SetPlayerInfo$%GLOBAL%$player$$is_local_client$ = %i(1)					:i else 						:i $SetPlayerInfo$%GLOBAL%$player$$is_local_client$ = %i(0)					:i endif					:i $band_lobby_clear_submenu_data$$submenu_data_index$ = %GLOBAL%$submenu_index$					:i if (%GLOBAL%$submenu_index$ < (~$g_num_lobby_local_submenus$))						:i $net_stop_character_silhouette$$player$ = %GLOBAL%$player$						:i (~$band_lobby_viewport_menus$:a{%GLOBAL%$submenu_index$:a}).$obj_spawnscriptnow$$band_lobby_change_menu$$params$ = :s{$action$ = $back$$menu$ = $join$$player$ = (%GLOBAL%$submenu_index$ + %i(1))$submenu_index$ = %GLOBAL%$submenu_index$:s}						:i $band_lobby_kick_leader_out_of_band_manage$					:i endif				:i endif				:i if $ScreenElementExists$${StructQBKey id = band_lobby_pu_gr}$					:i $band_lobby_return_from_game_rules$				:i endif			:i endif		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$		:i if (%GLOBAL%$removed_remote_player$ = %i(1))			:i $band_lobby_update_player_viewport_assignments$			:i $band_lobby_refresh_band_leader_characters$		:i endif	:i endif	:i endfunction]Script band_lobby_is_new_party_member 0x02a4e44e [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				user_id				party_id			]		}		StructQBKey all	}$		:i $printf$${StructQBStringQs 0x4e5e8444}$	:i $GetMaxPlayers$	:i %GLOBAL%$index$ = %i(0)	:i while 	:i $getplayerinfo$(%GLOBAL%$index$ + %i(1))$net_id_first$	:i $getplayerinfo$(%GLOBAL%$index$ + %i(1))$net_id_second$	:i $getplayerinfo$(%GLOBAL%$index$ + %i(1))$party_id$$out$ = $current_party_id$	:i if ((%GLOBAL%$net_id_first$ = (%GLOBAL%$user_id$:a{%i(0):a})) AND (%GLOBAL%$net_id_second$ = (%GLOBAL%$user_id$:a{%i(1):a})) AND (%GLOBAL%$current_party_id$ = %GLOBAL%$party_id$))		:i return ${StructQBKey false}$	:i endif	:i %GLOBAL%$index$ = (%i(1) + %GLOBAL%$index$)	:i loop_to %GLOBAL%$max_players$	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_is_player_party_member 0x1cc0d13d [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player_num			]		}	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x8d9246fd	}$		:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = get_party_members	}$		:i $GetArraySize$${StructQBKey connections}$	:i $getplayerinfo$%GLOBAL%$player_num$$net_id_first$	:i $getplayerinfo$%GLOBAL%$player_num$$net_id_second$	:i $getplayerinfo$%GLOBAL%$player_num$$gamertag$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i if ((%GLOBAL%$net_id_first$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$user_id$:a{%i(0):a})) AND (%GLOBAL%$net_id_second$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$user_id$:a{%i(1):a})) AND ((~%GLOBAL%$gamertag$) = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$gamertag$)))			:i return ${StructQBKey true}$		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_leave_party 0x2ac73cd1 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs e75a36dc	}$		:i if $ScreenElementExistsSimpleID$${StructQBKey id = current_band_lobby_popup}$		:i if $current_band_lobby_popup$.$se_getparentid$			:i $band_lobby_destroy_popup_menu$$container$ = %GLOBAL%$parent_id$$no_focus$		:i endif	:i endif	:i if $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = is_host		}$				:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = disband_party_session		}$			:i else 		:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = leave_party		}$				:i $ChangeGlobalInteger$$global_name$ = $g_net_leader_player_num$$new_value$ = (~$g_leader_player_num$)	:i endif	:i $band_lobby_add_in_game_players_to_party$	:i $band_lobby_store_local_players_net_and_party_ids_in_playerinfo$	:i %GLOBAL%$submenu_index$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $player$	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $occupied$	:i if (%i(1) = %GLOBAL%$occupied$)		:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}			:i $band_lobby_change_menu$$action$ = $back$$menu$ = $main$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$$focus$ = %i(1)		:i endif	:i else 		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu$$value$ = $join$		:i $band_lobby_add_menu_update_to_queue$$submenu_index$ = %GLOBAL%$submenu_index$$menu_index$ = %i(4294967295)$focus$ = %i(1)	:i endif	:i %GLOBAL%$submenu_index$ = (%i(1) + %GLOBAL%$submenu_index$)	:i loop_to (~$g_num_lobby_local_submenus$)	:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = focus}$	:i $band_lobby_update_button_helpers$	:i endfunction]Script band_lobby_get_party_id_by_user_id 0x6514c6e3 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				user_id			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs ab8e5e0c	}$		:i $party_id$ = %i(4294967295)	:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = get_party_members	}$		:i $GetArraySize$${StructQBKey connections}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i if (((%GLOBAL%$user_id$:a{%i(0):a}) = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$user_id$:a{%i(0):a})) AND ((%GLOBAL%$user_id$:a{%i(1):a}) = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$user_id$:a{%i(1):a})))			:i if $IsPS3$				:i if (%GLOBAL%$gamertag$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$gamertag$))					:i $party_id$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$party_id$)					:i continue				:i endif			:i else 				:i $party_id$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$party_id$)				:i continue			:i endif		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i if (%GLOBAL%$party_id$ > %i(4294967295))		:i return $true$$party_id$ = %GLOBAL%$party_id$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_get_player_num_by_party_id 0x96aedafd [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				party_id			]		}		StructQBKey all	}$		:i if $NetSessionFunc$$obj$ = $party$$func$ = $get_party_member$$params$ = :s{$party_id$ = %GLOBAL%$party_id$:s}		:i $player_num$ = %i(4294967295)		:i $GetNumPlayersInGame$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$			:i while 			:i if $playerinfoequals$%GLOBAL%$player$$net_id_first$ = (%GLOBAL%$connections$:a{%i(0):a}->$user_id$:a{%i(0):a})				:i if $playerinfoequals$%GLOBAL%$player$$net_id_second$ = (%GLOBAL%$connections$:a{%i(0):a}->$user_id$:a{%i(1):a})					:i if $IsPS3$						:i $getplayerinfo$%GLOBAL%$player$$gamertag$						:i if ((~%GLOBAL%$gamertag$) = (%GLOBAL%$connections$:a{%i(0):a}->$gamertag$))							:i $player_num$ = %GLOBAL%$player$							:i continue						:i endif					:i else 						:i $player_num$ = %GLOBAL%$player$						:i continue					:i endif				:i endif			:i endif			:i $GetNextPlayer$$player$ = %GLOBAL%$player$			:i loop_to %GLOBAL%$num_players$		:i endif		:i if (%GLOBAL%$player_num$ > %i(4294967295))			:i return $true$$player_num$ = %GLOBAL%$player_num$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_get_gamertag_by_party_id fe3d2ef1 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				party_id			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1e1d8649	}$		:i $gamertag$ = ^[00000000]^	:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = get_party_members	}$		:i $GetArraySize$${StructQBKey connections}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i if ((%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$party_id$) = %GLOBAL%$party_id$)			:i $gamertag$ = (%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$gamertag$)			:i continue		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i return $gamertag$ = %GLOBAL%$gamertag$	:i endfunction]Script bl_does_have_remote_party_connections 0x16df25dd [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs acb8c7d9	}$		:i %GLOBAL%$ret$ = $false$	:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = get_party_members	}$		:i $GetArraySize$${		StructQBKey connections		StructQBKey param = num_connections	}$		:i if (%i(0) < %GLOBAL%$num_connections$)		:i $i$ = %i(0)		:i while 		:i if ((%GLOBAL%$connections$:a{%GLOBAL%$i$:a}->$is_local$) = %i(0))			:i %GLOBAL%$ret$ = $true$			:i continue		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$num_connections$	:i endif	:i return %GLOBAL%$ret$	:i endfunction]Script band_lobby_party_host_started_matchmaking 0x769ce1cf [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				private			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs fa201292	}$		:i $common_start_matchmaking_setup$	:i if (%GLOBAL%$private$ = %i(1))		:i $band_lobby_flash_ticker_msg$${			StructQBKey msg_checksum = creating_session			StructInt time = 5		}$			:i else 		:i $band_lobby_flash_ticker_msg$${			StructQBKey msg_checksum = party_host_start_matchmake			StructInt time = 5		}$			:i endif	:i $band_lobby_prepare_for_matchmaking$$player$ = (~$g_leader_player_num$)$private$ = %GLOBAL%$private$	:i endfunction]Script bl_is_managing 0x9ac5bb6a [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x8c4c279a	}$		:i $is_managing$ = %i(0)	:i $i$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $is_managed$	:i if (%GLOBAL%$is_managed$ = %i(1))		:i $is_managing$ = %i(1)		:i continue	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i if (%GLOBAL%$is_managing$ = %i(1))		:i return $true$$managed_submenu_index$ = %GLOBAL%$i$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_get_focus_value b38e3dbe [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				focus_param				submenu_index			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d954915c	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i switch %GLOBAL%$focus_param$		:i case $difficulty$			:i $getplayerinfo$%GLOBAL%$player$$difficulty$$out$ = $focus_value$			:i if (%GLOBAL%$focus_value$ = $expert$)				:i $getplayerinfo$%GLOBAL%$player$$part$				:i if (%GLOBAL%$part$ = $drum$)					:i $getplayerinfo$%GLOBAL%$player$$double_kick_drum$					:i if (%GLOBAL%$double_kick_drum$ = %i(1))						:i $focus_value$ = $expert_plus$					:i endif				:i endif			:i endif			:i endcase		case $part$			:i $getplayerinfo$%GLOBAL%$player$$part$$out$ = $focus_value$			:i endcase		case $lefty_flip$			:i $getplayerinfo$%GLOBAL%$player$$lefty_flip$			:i if (%GLOBAL%$lefty_flip$ = %i(1))				:i %GLOBAL%$focus_value$ = $lefty$			:i else 				:i %GLOBAL%$focus_value$ = $standard$			:i endif			:i endcase		case $vocals_highway_view$			:i $getplayerinfo$%GLOBAL%$player$$vocals_highway_view$$out$ = $focus_value$			:i if (%GLOBAL%$focus_value$ = $None$)				:i $focus_value$ = $scrolling$			:i endif			:i endcase		case $mic_preference$			:i $getplayerinfo$%GLOBAL%$player$$mic_preference$$out$ = $focus_value$			:i if (%GLOBAL%$focus_value$ = $None$)				:i %GLOBAL%$focus_value$ = $mic$			:i endif			:i endcase		case $character_id$			:i $getplayerinfo$%GLOBAL%$player$$character_id$$out$ = $focus_value$			:i endcase		case $venue$			:i $focus_value$ = ~$g_band_lobby_current_level$			:i endcase		case $game_mode$			:i $focus_value$ = (~%GLOBAL%$focus_param$)			:i if (%GLOBAL%$focus_value$ = $compmega$ OR %GLOBAL%$focus_value$ = $compmega_team$)				:i $focus_value$ = (~$competitive_rules$)			:i endif			:i endcase		case $g_lobby_state$			:i endcase		case $g_lobby_net_state$			:i $focus_value$ = (~%GLOBAL%$focus_param$)			:i endcase		default 			:i $scriptassert$${StructQBStringQs 0x98947583}$	:i end_switch	:i return $focus_value$ = %GLOBAL%$focus_value$	:i endfunction]Script band_lobby_get_player_submenu_index 0x18021ca9 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player_num			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs a5e41d34	}$		:i $i$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$i$	:i if ((~%GLOBAL%$submenu_data$->$player$) = %GLOBAL%$player_num$)		:i if $GotParam$${StructQBKey occupied}$			:i if ((~%GLOBAL%$submenu_data$->$occupied$) = %i(1))				:i return $submenu_index$ = %GLOBAL%$i$			:i endif		:i else 			:i return $submenu_index$ = %GLOBAL%$i$		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_total_submenus$)	:i return ${StructInt submenu_index = -1}$	:i endfunction]Script band_lobby_clear_submenu_data efee9674 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_data_index			]		}		StructQBKey all	}$		:i $printf$^[2b14e3e1]^$c$ = %GLOBAL%$submenu_data_index$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_data_index$	:i $UpdateStructElement$$struct$ = %GLOBAL%$submenu_data$$element$ = $player$$value$ = (%GLOBAL%$submenu_data_index$ + %i(1))	:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $occupied$$value$ = %i(0)	:i if (%GLOBAL%$submenu_data_index$ < (~$g_num_lobby_local_submenus$))		:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $is_updating$$value$ = %i(0)		:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $menu$$value$ = $empty$		:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $return_menu$$value$ = $empty$		:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}		:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $net_id$$value$ = :a{%i(0)%i(0):a}		:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $is_managed$$value$ = %i(0)		:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $focus_type$$value$ = $focus$		:i if $IsPS3$			:i $change$$globalname$ = (~%GLOBAL%$submenu_data$->$gamertag_checksum$)$newValue$ = ^[00000000]^		:i endif		:i if $GotParam$${StructQBKey all_data}$			:i $UpdateStructElement$$struct$ = %GLOBAL%$newstruct$$element$ = $desc_id$$value$ = $null$		:i endif	:i endif	:i switch %GLOBAL%$submenu_data$		:i case $band_lobby_submenu_data_0$			:i $change$$band_lobby_submenu_data_0$ = %GLOBAL%$newstruct$			:i endcase		case $band_lobby_submenu_data_1$			:i $change$$band_lobby_submenu_data_1$ = %GLOBAL%$newstruct$			:i endcase		case $band_lobby_submenu_data_2$			:i $change$$band_lobby_submenu_data_2$ = %GLOBAL%$newstruct$			:i endcase		case $band_lobby_submenu_data_3$			:i $change$$band_lobby_submenu_data_3$ = %GLOBAL%$newstruct$			:i endcase		case $band_lobby_submenu_data_4$			:i $change$$band_lobby_submenu_data_4$ = %GLOBAL%$newstruct$			:i endcase		case $band_lobby_submenu_data_5$			:i $change$$band_lobby_submenu_data_5$ = %GLOBAL%$newstruct$			:i endcase		case $band_lobby_submenu_data_6$			:i $change$$band_lobby_submenu_data_6$ = %GLOBAL%$newstruct$			:i endcase		case $band_lobby_submenu_data_7$			:i $change$$band_lobby_submenu_data_7$ = %GLOBAL%$newstruct$	:i end_switch	:i endfunction]Script band_lobby_clear_all_submenu_data edfc3062 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0b656e58	}$		:i $i$ = %i(0)	:i while 	:i $band_lobby_clear_submenu_data$$submenu_data_index$ = %GLOBAL%$i$$all_data$	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_total_submenus$)	:i endfunction]Script band_lobby_update_submenu_data 0x357d1c9c [	${Unknown [00012400b1b15c3a696969690000001800012600bebfa1c66969696900000000]}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				value			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[f46594e4]^$s$ = %GLOBAL%$submenu_index$$e$ = %GLOBAL%$element$$v$ = %GLOBAL%$value$	:i if (%GLOBAL%$element$ = $update_queue$)		:i $printf$${			StructQBKey channel = band_lobby			StructQBStringQs 0x0feaa9b6		}$				:i $printstruct$$channel$ = $band_lobby$%GLOBAL%$value$	:i endif	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i if (%i(3) < %GLOBAL%$submenu_index$)		:i if ((%GLOBAL%$element$ = $player$) OR (%GLOBAL%$element$ = $occupied$))			:i $UpdateStructElement$$struct$ = %GLOBAL%$submenu_data$$element$ = %GLOBAL%$element$$value$ = %GLOBAL%$value$			:i $update$ = %i(1)		:i endif	:i else 		:i $UpdateStructElement$$struct$ = %GLOBAL%$submenu_data$$element$ = %GLOBAL%$element$$value$ = %GLOBAL%$value$		:i $update$ = %i(1)	:i endif	:i if $GotParam$${StructQBKey update}$		:i switch %GLOBAL%$submenu_data$			:i case $band_lobby_submenu_data_0$				:i $change$$band_lobby_submenu_data_0$ = %GLOBAL%$newstruct$				:i endcase			case $band_lobby_submenu_data_1$				:i $change$$band_lobby_submenu_data_1$ = %GLOBAL%$newstruct$				:i endcase			case $band_lobby_submenu_data_2$				:i $change$$band_lobby_submenu_data_2$ = %GLOBAL%$newstruct$				:i endcase			case $band_lobby_submenu_data_3$				:i $change$$band_lobby_submenu_data_3$ = %GLOBAL%$newstruct$				:i endcase			case $band_lobby_submenu_data_4$				:i $change$$band_lobby_submenu_data_4$ = %GLOBAL%$newstruct$				:i endcase			case $band_lobby_submenu_data_5$				:i $change$$band_lobby_submenu_data_5$ = %GLOBAL%$newstruct$				:i endcase			case $band_lobby_submenu_data_6$				:i $change$$band_lobby_submenu_data_6$ = %GLOBAL%$newstruct$				:i endcase			case $band_lobby_submenu_data_7$				:i $change$$band_lobby_submenu_data_7$ = %GLOBAL%$newstruct$		:i end_switch	:i endif	:i endfunction]Script band_lobby_get_submenu_data ff774cac [	${		Unknown [00012400b1b15c3a6969696900000018000126005b0583766969696900000028]		StructQBKey out = nullchecksum	}$		:i $Data$ = :s{:s}	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i if $StructureContains$$structure$ = (~%GLOBAL%$submenu_data$)%GLOBAL%$param$		:i if ($nullchecksum$ !== %GLOBAL%$out$)			:i $AddParam$$structure_name$ = $Data$$name$ = %GLOBAL%$out$$value$ = (~%GLOBAL%$submenu_data$->%GLOBAL%$param$)		:i else 			:i $AddParam$$structure_name$ = $Data$$name$ = %GLOBAL%$param$$value$ = (~%GLOBAL%$submenu_data$->%GLOBAL%$param$)		:i endif		:i return %GLOBAL%$Data$	:i endif	:i $printstruct$ isNull 	:i $scriptassert$${StructQBStringQs c23eb605}$	:i endfunction]Script band_lobby_find_available_submenu_data c6a732d9 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x24c8991d	}$		:i %GLOBAL%$index$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$index$	:i if (%i(0) = (~%GLOBAL%$submenu_data$->$occupied$) AND $attempt_join$ !== (~%GLOBAL%$submenu_data$->$menu$))		:i return $submenu_data_index$ = %GLOBAL%$index$	:i endif	:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))	:i loop_to (~$g_num_lobby_total_submenus$)	:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i $DumpPlayerInfo$%GLOBAL%$player$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i $debug_bl_dump_submenu_data_all$	:i return ${StructInt submenu_data_index = -1}$	:i endfunction]Script find_available_playerinfo b50ba98a [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player_type			]		}	}$		:i $printf$${StructQBStringQs d0c86e55}$	:i $GetMaxPlayers$	:i if (%GLOBAL%$player_type$ = $local$)		:i $i$ = %i(1)		:i while 		:i if $playerinfoequals$%GLOBAL%$i$$in_game$ = %i(0)			:i $printf$^[a5166463]^$d$ = %GLOBAL%$i$			:i return $playerinfo$ = %GLOBAL%$i$		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$max_players$	:i elseif (%GLOBAL%$player_type$ = $party_remote$)		:i $i$ = %GLOBAL%$max_players$		:i while 		:i if $playerinfoequals$%GLOBAL%$i$$in_game$ = %i(0)			:i $printf$^[1189ab87]^$d$ = %GLOBAL%$i$			:i return $playerinfo$ = %GLOBAL%$i$		:i endif		:i $i$ = (%GLOBAL%$i$ - %i(1))		:i loop_to %GLOBAL%$max_players$	:i elseif (%GLOBAL%$player_type$ = $party_local$)		:i if $playerinfoequals$(%GLOBAL%$controller_index$ + %i(1))$in_game$ = %i(0)			:i $printf$^[aa48c505]^$d$ = (%GLOBAL%$controller_index$ + %i(1))			:i return $playerinfo$ = (%GLOBAL%$controller_index$ + %i(1))		:i endif	:i endif	:i $printf$${StructQBStringQs 0x2a12ec90}$	:i return ${StructInt playerinfo = -1}$	:i endfunction]Script reset_all_player_in_game_status c7fb10ee [	:i $printf$${StructQBStringQs 0x0d312f40}$	:i $GetMaxPlayers$	:i $i$ = %i(0)	:i while 	:i $SetPlayerInfo$(%GLOBAL%$i$ + %i(1))$in_game$ = %i(0)	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$max_players$	:i endfunction]Script reset_all_players_local_client_status 0x2a6b1417 [	:i $printf$${StructQBStringQs 0x9c615b8c}$	:i $GetMaxLocalPlayers$	:i $max_local$ = %GLOBAL%$max_players$	:i $GetMaxPlayers$	:i if $GotParam$${StructQBKey force_remote}$		:i $max_local$ = %i(0)	:i endif	:i $i$ = %i(0)	:i while 	:i if (%GLOBAL%$i$ < %GLOBAL%$max_local$)		:i $SetPlayerInfo$(%GLOBAL%$i$ + %i(1))$is_local_client$ = %i(1)	:i else 		:i $SetPlayerInfo$(%GLOBAL%$i$ + %i(1))$is_local_client$ = %i(0)	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$max_players$	:i endfunction]Script band_lobby_cancel_matchmaking aae17b85 [	${StructInt start_matchmaking = 0}$	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1cc72416	}$		:i if $NetSessionFunc$${			StructQBKey obj = match			StructQBKey func = cancel_join_server		}$				:i if (%GLOBAL%$start_matchmaking$ = %i(0))			:i $band_lobby_return_from_matchmaking$$container$ = %GLOBAL%$container$		:i endif		:i if $ScriptIsRunning$${StructQBKey bl_private_match_ui_timeout}$			:i $KillSpawnedScript$${StructQBKey name = bl_private_match_ui_timeout}$		:i endif		:i $change$${StructQBKey g_career_search = null}$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_return_from_matchmaking 0x440fcfba [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1fff1b3c	}$		:i $change$${StructInt respond_to_signin_changed = 0}$	:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = set_party_joinable		StructStruct params		{			StructHeader			{				StructInt joinable = 1			}		}	}$		:i $band_lobby_restore_prematchmaking_settings$${StructQBKey cancel_matchmaking}$	:i $band_lobby_poll_party_object$	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $career$)		:i if $ScriptIsRunning$${StructQBKey band_lobby_matchmaking_update_loop}$			:i $KillSpawnedScript$${StructQBKey name = band_lobby_matchmaking_update_loop}$		:i endif		:i $band_lobby_force_submenu_change_all$${			StructQBKey menu = join			StructInt focus = 1			StructQBKey submenu_data_match = occupied			StructInt match_value = 0		}$				:i $band_lobby_refresh_all_submenus_new$${StructInt focus = 1}$		:i $change$${StructQBKey g_career_search = null}$	:i else 		:i $band_lobby_destroy_popup_menu$	:i endif	:i if ($GMan_GoalIsActive$$goal$ = $quickplay$)		:i $GMan_QuickRemoveGoal$${StructQBKey goal_name = quickplay}$	:i endif	:i $band_lobby_update_player_viewport_assignments$	:i $band_lobby_update_button_helpers$	:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$	:i $persistent_band_refresh_changed_characters$	:i endfunction]Script band_lobby_start_public_matchmaking 0x431b76bd [	${		StructQBKey server_list_mode = automatch		StructInt private = 0	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[a547b7b9]^$c$ = %GLOBAL%$player$	:i if (~$g_leader_player_num$ > %i(0))		:i $bl_update_submenus_stored_gamertag$		:i $change$${StructInt respond_to_signin_changed_all_players = 1}$		:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = set_party_joinable			StructStruct params			{				StructHeader				{					StructInt joinable = 0				}			}		}$				:i $NetSessionFunc$$obj$ = $party$$func$ = $set_matchmaking_struct$$params$ = :s{$game_mode$ = (~$game_mode$)$competitive_rules$ = (~$competitive_rules$)$private$ = %GLOBAL%$private$:s}		:i $band_lobby_set_all_non_ingame_players_as_remote$		:i $getplayerinfo$(~$g_leader_player_num$)$controller$		:i $set_network_preferences$		:i $common_start_matchmaking_setup$		:i $net_dummy_get_needed_search_params$		:i $gamemode_gettype$		:i if $ChecksumEquals$$a$ = %GLOBAL%$type$$b$ = $career$			:i $difficulty$ = $expert$		:i elseif $ChecksumEquals$$a$ = %GLOBAL%$type$$b$ = $quickplay$			:i $difficulty$ = $expert$		:i endif		:i $NetSessionFunc$$obj$ = $match$$func$ = $set_search_params$$params$ = isNull 		:i $NetSessionFunc$$obj$ = $match$$func$ = $set_server_list_mode$$params$ = :s{%GLOBAL%$server_list_mode$:s}		:i if (%GLOBAL%$private$ = %i(1))			:i $GetNumPlayersInGame$			:i if $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$				:i if $ScriptIsRunning$${StructQBKey bl_private_match_ui_timeout}$					:i $KillSpawnedScript$${StructQBKey bl_private_match_ui_timeout}$				:i endif				:i $band_lobby_desc_id$.$obj_spawnscript$$bl_private_match_ui_timeout$$params$ = :s{$num_players$ = %GLOBAL%$num_players$:s}			:i endif			:i $NetSessionFunc$${				StructQBKey obj = match				StructQBKey func = set_server_list_mode				StructStruct params				{					StructHeader					{						StructQBKey host_only					}				}			}$					:i endif		:i $NetSessionFunc$$obj$ = $match$$func$ = $start_server_list$$params$ = :s{$controller$ = %GLOBAL%$controller$$private$ = %GLOBAL%$private$$callback_complete$ = $band_lobby_career_search_no_games_available$:s}	:i endif	:i endfunction]Script bl_private_match_ui_timeout d491e982 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				num_players			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs ef42f4e2	}$		:i while 	:i $NetSessionFunc$${		StructQBKey obj = party		StructQBKey func = get_party_members	}$		:i $GetArraySize$%GLOBAL%$connections$	:i if (%GLOBAL%$array_size$ < %GLOBAL%$num_players$)		:i $band_lobby_cancel_matchmaking$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey second	}$		:i loop_to 	:i endfunction]Script band_lobby_restart_quickmatch 0x40d4f233 [	:i $printf$${StructQBStringQs 0x273fdb7b}$	:i $LeaveServer$	:i $getplayerinfo$(~$g_leader_player_num$)$controller$	:i $NetSessionFunc$$obj$ = $match$$func$ = $start_server_list$$params$ = :s{$controller$ = %GLOBAL%$controller$$private$ = %GLOBAL%$private$$callback_complete$ = $band_lobby_career_search_no_games_available$:s}	:i endfunction]Script band_lobby_career_search_no_games_available edf7e4f0 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x4553dd99	}$		:i if $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$		:i $band_lobby_desc_id$.$obj_spawnscriptnow$$band_lobby_career_search_no_games_available_spawned$$params$ = :s{ isNull :s}	:i endif	:i endfunction]Script band_lobby_career_search_no_games_available_spawned 0x043cfbc0 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs b40f6163	}$		:i if $ScreenElementExists$${StructQBKey id = dialog_box_container}$		:i $printf$${StructQBStringQs 0x6e40243e}$		:i return 	:i endif	:i $ui_event_get_top$	:i if $GotParam$${StructQBKey is_popup}$		:i $printf$${StructQBStringQs 0x251ccb39}$		:i $event_type$ = $menu_replace$	:i else 		:i $event_type$ = $menu_change$	:i endif	:i if $band_lobby_does_popup_exist$		:i $band_lobby_destroy_popup_menu$${			StructInt animate = 0			StructQBKey no_focus		}$			:i endif	:i $options$ = :a{		:i :s{			:i $func$ = $band_lobby_career_search_no_games_search_again$			:i $text$ = (~$band_lobby_strings$->$button_continue$)		:i :s}		:i :s{			:i $func$ = $band_lobby_career_search_no_games_cancel$			:i $text$ = (~$band_lobby_strings$->$popup_cancel_mm$)		:i :s}	:i :a}	:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$	:i $getplayerinfo$(~$g_leader_player_num$)$controller$	:i $ui_event$:s{		:i $event$ = %GLOBAL%$event_type$		:i $Data$ = :s{			:i $is_popup$			:i $state$ = $uistate_band_lobby_popup$			:i $controller$ = %GLOBAL%$controller$			:i $reason$ = $popup_no_games_available$			:i $options$ = %GLOBAL%$options$			:i $Title$ = (~$band_lobby_strings$->$popup_title_matchmake$)			:i $back_script$ = $band_lobby_career_search_no_games_cancel$		:i :s}	:i :s}	:i endfunction]Script band_lobby_career_search_no_games_cancel 0x220be55e [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x62a69699	}$		:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $se_getparentid$	:i $LaunchEvent$$type$ = $unfocus$$target$ = %GLOBAL%$parent_id$	:i $band_lobby_cancel_matchmaking$	:i $band_lobby_get_player_submenu_index$$player_num$ = (~$g_leader_player_num$)	:i $band_lobby_add_menu_update_to_queue$$submenu_index$ = %GLOBAL%$submenu_index$$focus$ = %i(1)	:i $UI_SFX$${		StructQBKey menustate = BandLobby		StructQBKey uitype = back	}$		:i $generic_event_back$	:i endfunction]Script band_lobby_career_search_no_games_search_again e086a99d [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x451da442	}$		:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $se_getparentid$	:i $LaunchEvent$$type$ = $unfocus$$target$ = %GLOBAL%$parent_id$	:i $NetSessionFunc$:s{		:i $obj$ = $match$		:i $func$ = $start_server_list$		:i $params$ = :s{			:i $controller$ = %GLOBAL%$device_num$			:i $callback_complete$ = $band_lobby_career_search_no_games_available$		:i :s}	:i :s}	:i $UI_SFX$${		StructQBKey menustate = BandLobby		StructQBKey uitype = back	}$		:i $generic_event_back$	:i endfunction]Script band_lobby_live_profile_ingame 0x215227ea [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d27b1c33	}$		:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller$$network_platform_only$$dont_set_primary$			:i if $IsXenonOrWinDX$				:i if NOT $NetSessionFunc$$func$ = $xenonisguest$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}					:i if $GotParam$${StructQBKey multiplayer_enabled}$						:i if $NetSessionFunc$$func$ = $ismultiplayerallowed$$params$ = :s{$controller_index$ = %GLOBAL%$device_num$:s}							:i return ${StructQBKey true}$						:i endif					:i else 						:i return ${StructQBKey true}$					:i endif				:i endif			:i else 				:i if $GotParam$${StructQBKey multiplayer_enabled}$					:i if $NetSessionFunc$$func$ = $ismultiplayerallowed$$params$ = :s{$controller_index$ = %GLOBAL%$device_num$:s}						:i return ${StructQBKey true}$					:i endif				:i else 					:i return ${StructQBKey true}$				:i endif			:i endif		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to %GLOBAL%$num_players$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_store_local_players_net_and_party_ids_in_playerinfo 0x657eb19e [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1a7a58b9	}$		:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i $getplayerinfo$%GLOBAL%$player$$gamertag$			:i $GetNetID$$controller_index$ = %GLOBAL%$controller$			:i $SetPlayerInfo$%GLOBAL%$player$$net_id_first$ = %GLOBAL%$net_id_first$			:i $SetPlayerInfo$%GLOBAL%$player$$net_id_second$ = %GLOBAL%$net_id_second$			:i $array$ = :a{:a}			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_first$			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_second$			:i if NOT $band_lobby_get_party_id_by_user_id$$user_id$ = %GLOBAL%$array$$gamertag$ = (~%GLOBAL%$gamertag$)				:i $party_id$ = %i(4294967295)			:i endif			:i $SetPlayerInfo$%GLOBAL%$player$$party_id$ = %GLOBAL%$party_id$		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script bl_store_local_player_net_ids_in_submenu_data 0x1f2b0ae4 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs b03ed173	}$		:i $submenu_index$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $occupied$	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $player$	:i if (%GLOBAL%$occupied$ = %i(1))		:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)			:i $array$ = :a{:a}			:i $getplayerinfo$%GLOBAL%$player$$net_id_first$			:i $getplayerinfo$%GLOBAL%$player$$net_id_second$			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_first$			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_second$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $net_id$$value$ = %GLOBAL%$array$		:i endif	:i endif	:i $submenu_index$ = (%GLOBAL%$submenu_index$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i endfunction]Script band_lobby_check_if_all_players_are_online_enabled 0x4470d50f [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0499dd5e	}$		:i if $IsXenonOrWinDX$		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i if NOT ($CheckForSignin$$controller_index$ = %GLOBAL%$controller$$dont_set_primary$)				:i return ${StructQBKey false}$			:i endif			:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$			:i loop_to %GLOBAL%$num_players$		:i endif	:i else 		:i if NOT $CheckForSignin$			:i return ${StructQBKey false}$		:i endif	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_lost_band_leader 0x47e5d201 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs fb37b28b	}$		:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i if NOT (~$g_leader_player_num$ = %GLOBAL%$player$)			:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)				:i $getplayerinfo$%GLOBAL%$player$$controller$				:i $band_lobby_get_is_guest$$device_num$ = %GLOBAL%$controller$				:i if (%GLOBAL%$is_guest$ = %i(0))					:i $change$$g_leader_player_num$ = %GLOBAL%$player$					:i $change$$g_net_leader_player_num$ = %GLOBAL%$player$					:i $band_lobby_update_primary_controller$					:i $band_lobby_update_lobby_title$					:i $i$ = %i(0)					:i while 					:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$i$					:i if (((~%GLOBAL%$submenu_data$->$player$) = %GLOBAL%$player$) AND ((~%GLOBAL%$submenu_data$->$occupied$) = %i(1)))						:i if ((~%GLOBAL%$submenu_data$->$menu$) = $band_member$)							:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}							:i (~$band_lobby_viewport_menus$:a{%GLOBAL%$i$:a}).$obj_spawnscriptnow$$band_lobby_change_menu$$params$ = :s{$action$ = $back$$menu$ = $main$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$i$:s}						:i endif						:i return 					:i endif					:i $i$ = (%GLOBAL%$i$ + %i(1))					:i loop_to (~$g_num_lobby_local_submenus$)				:i endif			:i endif		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i $change$${StructInt g_leader_player_num = -1}$	:i $change$${StructInt g_net_leader_player_num = -1}$	:i $band_lobby_update_lobby_title$	:i endfunction]Script band_lobby_ensure_primary_controller_is_signed_in 0x9e1b0f06 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x27e2988a	}$		:i if (~$g_leader_player_num$ > %i(4294967295))		:i if $playerinfoequals$(~$g_leader_player_num$)$in_game$ = %i(1)			:i $getplayerinfo$(~$g_leader_player_num$)$controller$			:i $change_primary_controller$$controller$ = %GLOBAL%$controller$		:i endif	:i endif	:i endfunction]Script band_lobby_set_all_non_ingame_players_as_remote 0x2c1d873b [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x9c5abd92	}$		:i $GetMaxPlayers$	:i $i$ = %i(0)	:i while 	:i if $playerinfoequals$(%GLOBAL%$i$ + %i(1))$in_game$ = %i(0)		:i $SetPlayerInfo$(%GLOBAL%$i$ + %i(1))$is_local_client$ = %i(0)	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$max_players$	:i endfunction]Script band_lobby_store_playerinfo 0x874059b1 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x04b46a28	}$		:i $change$$g_copy_leader_player_num$ = (~$g_leader_player_num$)	:i $change$$g_copy_net_leader_player_num$ = (~$g_net_leader_player_num$)	:i $GetMaxPlayers$	:i if (%GLOBAL%$max_players$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $PlayerInfoStore$(%GLOBAL%$i$ + %i(1))		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$max_players$	:i endif	:i endfunction]Script band_lobby_restore_playerinfo e8ec2060 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs fb2be41d	}$		:i $GetMaxPlayers$	:i if (%GLOBAL%$max_players$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $PlayerInfoReStore$(%GLOBAL%$i$ + %i(1))		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$max_players$	:i endif	:i endfunction]Script band_lobby_restore_prematchmaking_settings 0x41cd467b [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1e8dee2a	}$		:i $change$$g_leader_player_num$ = (~$g_copy_leader_player_num$)	:i $change$$g_net_leader_player_num$ = (~$g_copy_net_leader_player_num$)	:i $band_lobby_restore_playerinfo$	:i $band_lobby_update_primary_controller$	:i $band_lobby_restore_gamertags$	:i $MarketplaceBGMonitorFunc$${		StructQBKey func = set_background_download		StructQBKey on	}$		:i $MarketplaceBGMonitorFunc$${StructQBKey func = start_scan}$	:i if NOT $IsPS3$		:i $MarketplacePersistenceFunc$${StructQBKey func = attempt_init}$	:i endif	:i if NOT $bl_does_have_remote_party_connections$		:i $restore_local_leadership$ = %i(1)		:i $band_lobby_store_local_players_net_and_party_ids_in_playerinfo$	:i endif	:i %GLOBAL%$async_io_status$ = $ready$	:i if NOT $GotParam$${StructQBKey cancel_matchmaking}$		:i %GLOBAL%$async_io_status$ = $busy$		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $SetPlayerInfo$%GLOBAL%$player$$async_io_status$ = $busy$			:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$			:i loop_to %GLOBAL%$num_players$		:i endif	:i endif	:i $GetNumPlayersInGame$${StructQBKey remote}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey remote}$		:i while 		:i if $GotParam$${StructQBKey restore_local_leadership}$			:i if (~$g_net_leader_player_num$ = %GLOBAL%$player$)				:i $change$$g_net_leader_player_num$ = (~$g_leader_player_num$)			:i endif		:i endif		:i $band_lobby_get_player_submenu_index$$player_num$ = %GLOBAL%$player$$occupied$		:i if (%GLOBAL%$submenu_index$ > %i(4294967295))			:i $band_lobby_clear_submenu_data$$submenu_data_index$ = %GLOBAL%$submenu_index$		:i endif		:i $net_clear_player_info$$player$ = %GLOBAL%$player$$async_io_status$ = %GLOBAL%$async_io_status$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$remote$		:i loop_to %GLOBAL%$num_players$	:i endif	:i if NOT $GotParam$${StructQBKey cancel_matchmaking}$		:i $band_lobby_clear_all_submenu_data$		:i $band_lobby_update_lobby_title$	:i endif	:i if NOT $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = is_host		}$				:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = request_full_sync		}$			:i endif	:i $bl_toggle_player_menu_representation$${StructQBKey action = on}$	:i endfunction]Script band_lobby_is_player_in_party f563f1e5 [	${Unknown [0001240067e6859a6969696900000000]}$	:i $ret$ = $false$	:i $getplayerinfo$%GLOBAL%$player$$net_id_first$	:i $getplayerinfo$%GLOBAL%$player$$net_id_second$	:i $net_id$ = :a{%i(0),%i(0):a}	:i $SetArrayElement$$arrayName$ = $net_id$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$	:i $SetArrayElement$$arrayName$ = $net_id$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$	:i if $NetSessionFunc$$obj$ = $party$$func$ = $is_party_member$$params$ = :s{$user_id$ = %GLOBAL%$net_id$:s}		:i $ret$ = $true$	:i endif	:i return %GLOBAL%$ret$	:i endfunction]Script band_lobby_return_to_party_fix_state_sync_HACK 0x682b826e [	:i $printf$${StructQBStringQs 0x919012fe}$	:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $wait$${		StructInt 4		StructQBKey seconds	}$		:i if NOT $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = is_host		}$				:i $NetSessionFunc$${			StructQBKey obj = party			StructQBKey func = request_full_sync		}$			:i endif	:i endfunction]Script band_lobby_restore_gamertags f5ef04f9 [	:i $GetMaxPlayers$	:i if (%GLOBAL%$max_players$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $FormatText$$checksumname$ = $gamertag$%s("gamertag_%d")$d$ = (%GLOBAL%$i$)		:i if $playerinfoequals$(%GLOBAL%$i$ + %i(1))$in_game$ = %i(1)			:i if $playerinfoequals$(%GLOBAL%$i$ + %i(1))$is_local_client$ = %i(1)				:i $getplayerinfo$(%GLOBAL%$i$ + %i(1))$controller$				:i if $NetSessionFunc$$obj$ = $match$$func$ = $get_gamertag$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}					:i $change$$globalname$ = %GLOBAL%$gamertag$$newValue$ = %GLOBAL%$name$				:i endif			:i endif		:i else 			:i $change$$globalname$ = %GLOBAL%$gamertag$$newValue$ = ^[00000000]^		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$max_players$	:i endif	:i endfunction]Script band_lobby_set_exclusive_devices_on_submenus 0x6e6936f5 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				controller			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs e0af36b5	}$		:i $i$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$i$	:i (~%GLOBAL%$submenu_data$->$desc_id$).$se_setprops$$exclusive_device$ = %GLOBAL%$controller$	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i endfunction]Script band_lobby_request_player_card c3dce413 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				device_num				net_id_first				net_id_second			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x22df035d	}$		:i if $NetSessionFunc$$func$ = $canviewprofile$$controller_index$ = %GLOBAL%$device_num$		:i $array$ = :a{:a}		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_first$		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_second$		:i $NetSessionFunc$$func$ = $showgamercard$$params$ = :s{$player_xuid$ = %GLOBAL%$array$$controller_index$ = %GLOBAL%$device_num$:s}	:i endif	:i endfunction]Script set_game_rules_from_voting_result a15628f0 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				result			]		}		StructQBKey all	}$		:i $printf$${StructQBStringQs 0x7d7081f8}$	:i $change$$competitive_rules$ = (%GLOBAL%$result$->$element$)	:i endfunction]Script prepare_game_rules_voting 0x5296fa13 [	:i $printf$${StructQBStringQs 0x8b723a72}$	:i $array$ = :a{:a}	:i $GetArraySize$(~$competitive_rules_array$)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i %GLOBAL%$add_element$ = %i(1)		:i %GLOBAL%$competitive_rules$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})		:i if NOT $TeamModeEquals$${StructQBKey team_mode = two_teams}$			:i if ((~%GLOBAL%$competitive_rules$->$team$) = %i(1))				:i %GLOBAL%$add_element$ = %i(0)			:i endif		:i else 			:i if ((~%GLOBAL%$competitive_rules$->$team$) = %i(0))				:i %GLOBAL%$add_element$ = %i(0)			:i endif		:i endif		:i if $ChecksumEquals$$a$ = %GLOBAL%$competitive_rules$$b$ = $elimination$			:i $GetNumPlayersInGame$			:i if (%GLOBAL%$num_players$ < (~%GLOBAL%$competitive_rules$->$min_players$))				:i %GLOBAL%$add_element$ = %i(0)			:i endif		:i elseif $ChecksumEquals$$a$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})$b$ = $solo_fest_mode$			:i %GLOBAL%$add_element$ = %i(0)		:i elseif $ChecksumEquals$$a$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})$b$ = $team_fest_mode$			:i %GLOBAL%$add_element$ = %i(0)		:i elseif $ChecksumEquals$$a$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})$b$ = $band_vs_band$			:i %GLOBAL%$add_element$ = %i(0)		:i elseif $ChecksumEquals$$a$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})$b$ = $momentum_plus$			:i %GLOBAL%$add_element$ = %i(0)		:i endif		:i if (%GLOBAL%$add_element$ = %i(1))			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = (~$competitive_rules_array$:a{%GLOBAL%$i$:a})		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$		:i $generate_voting_items$$items_array$ = %GLOBAL%$array$		:i $GetRandomArrayElement$%GLOBAL%$voting_items_array$		:i $AddArrayElement$$array$ = %GLOBAL%$voting_items_array$$element$ = %GLOBAL%$element$		:i %GLOBAL%$voting_items_array$ = %GLOBAL%$array$		:i $GetArraySize$%GLOBAL%$voting_items_array$		:i if (%GLOBAL%$array_size$ > %i(0))			:i $array$ = :a{:a}			:i $i$ = %i(0)			:i while 			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = (%GLOBAL%$voting_items_array$:a{%GLOBAL%$i$:a})			:i $i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$array_size$		:i endif	:i endif	:i return $game_rules_voting_array$ = %GLOBAL%$array$	:i endfunction]Script generate_voting_items adc21d3c [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				items_array			]		}		StructQBKey all	}$		:i $printf$${StructQBStringQs 0x5922c3a5}$	:i $GetArraySize$%GLOBAL%$items_array$	:i if (%GLOBAL%$array_size$ >= %i(2))		:i if (%GLOBAL%$array_size$ = %i(2))			:i return $voting_items_array$ = %GLOBAL%$items_array$		:i else 			:i $array$ = :a{:a}			:i $i$ = %i(0)			:i $j$ = %i(0)			:i while 			:i $GetRandomArrayElement$%GLOBAL%$items_array$			:i if NOT $ArrayContains$$array$ = %GLOBAL%$array$$contains$ = %GLOBAL%$element$				:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$element$				:i $i$ = (%GLOBAL%$i$ + %i(1))				:i if (%GLOBAL%$i$ = %i(2))					:i continue				:i endif			:i endif			:i $j$ = (%GLOBAL%$j$ + %i(1))			:i $printf$^[9a0ed12a]^$d$ = %GLOBAL%$j$			:i loop_to 			:i return $voting_items_array$ = %GLOBAL%$array$		:i endif	:i else 		:i $printstruct$ isNull 		:i $scriptassert$${StructQBStringQs c58d0742}$	:i endif	:i endfunction]Script cast_vote 0x938da8f6 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				option			]		}		StructQBKey all	}$		:i $printf$${StructQBStringQs 0x20f736cb}$	:i $allowed$ = %i(1)	:i $GetArraySize$(~$g_controllers_that_voted$)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i if (%GLOBAL%$device_num$ = ((~$g_controllers_that_voted$):a{%GLOBAL%$i$:a}))			:i $allowed$ = %i(0)		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i if (%GLOBAL%$allowed$ = %i(1))		:i $array$ = (~$g_controllers_that_voted$)		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$device_num$		:i $change$$g_controllers_that_voted$ = %GLOBAL%$array$		:i if $InInternetMode$			:i $SendStructure$$callback$ = $cast_vote_callback$$data_to_send$ = :s{$option$ = %GLOBAL%$option$:s}			:i if $ishost$				:i $SetArrayElement$$globalarray$$arrayName$ = $g_vote_counts$$index$ = %GLOBAL%$option$$newValue$ = ((~$g_vote_counts$:a{%GLOBAL%$option$:a}) + %i(1))			:i endif		:i else 			:i $SetArrayElement$$globalarray$$arrayName$ = $g_vote_counts$$index$ = %GLOBAL%$option$$newValue$ = ((~$g_vote_counts$:a{%GLOBAL%$option$:a}) + %i(1))		:i endif	:i else 		:i $printf$${StructQBStringQs 0x4395d3e0}$	:i endif	:i endfunction]Script cast_vote_callback aab60fa3 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				option			]		}		StructQBKey all	}$		:i $printf$${StructQBStringQs c4c44d96}$	:i if $ScriptIsRunning$${StructQBKey ui_voting_update}$		:i if (~$g_received_final_vote_counts$ = %i(0))			:i $audio_ui_play_cast_vote_sfx$$option$ = %GLOBAL%$option$			:i $SetArrayElement$$globalarray$$arrayName$ = $g_vote_counts$$index$ = %GLOBAL%$option$$newValue$ = ((~$g_vote_counts$:a{%GLOBAL%$option$:a}) + %i(1))			:i if $ishost$				:i $SendStructure$$callback$ = $cast_vote_callback$$data_to_send$ = :s{$option$ = %GLOBAL%$option$:s}			:i endif		:i endif	:i endif	:i endfunction]Script band_lobby_send_invite 0x70d68df1 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				Instrument				net_id				name				controlling_player			]		}	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs c172e72b	}$		:i if NOT $InNetGame$		:i $UI_SFX$${			StructQBKey manustate = generic			StructQBKey uitype = select		}$				:i $band_lobby_seamless_net_change$:s{			:i $network$ = $net_private$			:i $player$ = %GLOBAL%$controlling_player$			:i $callback$ = $invite_to_game$			:i $callback_params$ = :s{				:i $Instrument$ = %GLOBAL%$Instrument$				:i $net_id$ = %GLOBAL%$net_id$				:i $name$ = %GLOBAL%$name$				:i $device_num$ = %GLOBAL%$device_num$			:i :s}		:i :s}	:i endif	:i endfunction]Script band_lobby_seamless_net_change 0x3a54090e [	${		StructStruct callback_params		{			StructHeader {}		}	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				network				callback			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs f17ee82e	}$		:i if (%GLOBAL%$network$ = $local$)		:i $band_lobby_change_network$$player$ = %GLOBAL%$player$$network$ = %GLOBAL%$network$$focus$ = %i(1)		:i %GLOBAL%$callback$%GLOBAL%$callback_params$	:i else 		:i $trigger_seemless_change$ = %i(0)		:i if $band_lobby_check_if_all_players_are_online_enabled$			:i if $NetSessionFunc$${StructQBKey func = areallactivecontrollersmultiplayerallowed}$				:i if $GotParam$${StructQBKey from_friendslist}$					:i $band_lobby_change_network$$player$ = %GLOBAL%$player$$network$ = %GLOBAL%$network$$focus$ = %i(0)				:i else 					:i $band_lobby_change_network$$player$ = %GLOBAL%$player$$network$ = %GLOBAL%$network$$focus$ = %i(1)				:i endif				:i %GLOBAL%$callback$%GLOBAL%$callback_params$			:i else 				:i $trigger_seemless_change$ = %i(1)			:i endif		:i else 			:i $trigger_seemless_change$ = %i(1)		:i endif		:i if (%GLOBAL%$trigger_seemless_change$ = %i(1))			:i if $band_lobby_live_profile_ingame$${StructQBKey multiplayer_enabled}$				:i if $band_lobby_are_all_players_signed_in$					:i $msg_checksum$ = $change_profile$				:i else 					:i $msg_checksum$ = $signin_to_profile$				:i endif			:i else 				:i $msg_checksum$ = $signin_to_profile$			:i endif			:i if $IsPS3$				:i $msg_checksum$ = $signin_to_profile$			:i endif			:i if $IsXenonOrWinDX$				:i $getplayerinfo$%GLOBAL%$player$$controller$				:i if NOT $CheckForSignin$$network_platform_only$$dont_set_primary$$controller_index$ = %GLOBAL%$controller$					:i $msg_checksum$ = $not_connted_to_live$				:i endif			:i endif			:i $UI_SFX$${				StructQBKey menustate = generic				StructQBKey uitype = warningmessage			}$						:i if $band_lobby_desc_id$.$desc_resolvealias$${StructQBKey name = alias_pu_cont_parent}$				:i $band_lobby_create_popup_menu$:s{					:i $menu$ = $change_profile$					:i $player$ = %GLOBAL%$player$					:i $container$ = %GLOBAL%$resolved_id$					:i $msg_checksum$ = %GLOBAL%$msg_checksum$				:i :s}			:i endif		:i endif	:i endif	:i endfunction]Script band_lobby_prepare_for_matchmaking 0x8347dbb7 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				private			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x10c18b89	}$		:i $change$${StructInt g_lobby_invite_flag = 0}$	:i $change$${StructInt respond_to_signin_changed = 1}$	:i $change$${StructInt respond_to_signin_changed_all_players = 1}$	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $competitive$)		:i $session_stats_reset$	:i endif	:i $band_lobby_kill_party_object_polling$	:i $band_lobby_add_party_member$	:i $band_lobby_store_playerinfo$	:i $band_lobby_display_matchmaking_progress_ui$$player$ = %GLOBAL%$player$$private$ = %GLOBAL%$private$	:i endfunction]Script band_lobby_kick_remote_player_popup b13de8d0 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				user_id				controlling_player			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d26c63c8	}$		:i if $InInternetMode$		:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$		:i $ui_event_get_top$		:i if $GotParam$${StructQBKey is_popup}$			:i $printf$${StructQBStringQs 0x251ccb39}$			:i $event_type$ = $menu_replace$		:i else 			:i $event_type$ = $menu_change$		:i endif		:i $options$ = :a{			:i :s{				:i $func$ = $band_lobby_kick_remote_player$				:i $text$ = (~$band_lobby_strings$->$button_kick_player$)				:i $func_params$ = :s{					:i $user_id$ = %GLOBAL%$user_id$				:i :s}			:i :s}			:i :s{				:i $func$ = $band_lobby_kick_remote_player_cancel$				:i $text$ = (~$band_lobby_strings$->$popup_option_cancel$)			:i :s}		:i :a}		:i $getplayerinfo$%GLOBAL%$controlling_player$$controller$		:i $ui_event$:s{			:i $event$ = %GLOBAL%$event_type$			:i $Data$ = :s{				:i $is_popup$				:i $state$ = $uistate_band_lobby_popup$				:i $controller$ = %GLOBAL%$controller$				:i $reason$ = $popup_kick_player$				:i $options$ = %GLOBAL%$options$				:i $Title$ = (~$band_lobby_strings$->$popup_title_warning$)				:i $back_script$ = $band_lobby_kick_remote_player_cancel$				:i $z_priority$ = %f(1150.0)			:i :s}		:i :s}	:i endif	:i endfunction]Script band_lobby_kick_remote_player 0x5ed0523d [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				user_id			]		}		StructQBKey all	}$		:i if $InInternetMode$		:i if $NetSessionFunc$${				StructQBKey obj = party				StructQBKey func = is_host			}$						:i $NetSessionFunc$$obj$ = $party$$func$ = $kick_player$$params$ = :s{$user_id$ = %GLOBAL%$user_id$:s}		:i else 			:i $SendStructure$$callback$ = $band_lobby_kick_remote_player$$channel$ = $party$$data_to_send$ = :s{$user_id$ = %GLOBAL%$user_id$:s}		:i endif		:i if $InNetGame$			:i if $ishost$				:i $NetSessionFunc$$func$ = $kick_player$$params$ = :s{$player_xuid$ = %GLOBAL%$user_id$:s}			:i endif		:i endif		:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = focus}$		:i $UI_SFX$${			StructQBKey menustate = BandLobby			StructQBKey uitype = back		}$				:i $generic_event_back$	:i endif	:i endfunction]Script band_lobby_kick_remote_player_cancel bde1a185 [	:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = focus}$	:i $UI_SFX$${		StructQBKey menustate = BandLobby		StructQBKey uitype = back	}$		:i $generic_event_back$	:i endfunction]Script band_lobby_common_start_host_migration f130ef3c [	:i if $band_lobby_does_popup_exist$		:i $band_lobby_destroy_popup_menu$	:i endif	:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$	:i $band_lobby_update_ticker$${StructQBKey msg_checksum = host_migration}$	:i $change$${StructInt respond_to_signin_changed_all_players = 1}$	:i endfunction]Script band_lobby_common_finish_host_migration 0x8ebd80d8 [	:i $ui_band_lobby_anim_in$	:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$	:i endfunction]Script band_lobby_change_band_leader_callback 0x8078b8aa [	:i $printf$${StructQBStringQs 0x432a320d}$	:i if $band_lobby_get_player_num_by_party_id$$party_id$ = %GLOBAL%$party_id$		:i $change$$g_net_leader_player_num$ = %GLOBAL%$player_num$	:i endif	:i endfunction]Script band_lobby_change_band_leader 0x597c51fc [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs f05cfec6	}$		:i if $GotParam$${StructQBKey player}$		:i $old_leader$ = (~$g_net_leader_player_num$)		:i if $InInternetMode$			:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)				:i $change$$g_leader_player_num$ = %GLOBAL%$player$				:i $band_lobby_update_primary_controller$				:i if $NetSessionFunc$${						StructQBKey obj = party						StructQBKey func = is_host					}$										:i $change$$g_net_leader_player_num$ = %GLOBAL%$player$				:i else 					:i $getplayerinfo$%GLOBAL%$player$$party_id$					:i $SendStructure$:s{						:i $callback$ = $band_lobby_change_band_leader_callback$						:i $channel$ = $party$						:i $data_to_send$ = :s{							:i $party_id$ = %GLOBAL%$party_id$						:i :s}					:i :s}				:i endif			:i else 				:i if $NetSessionFunc$${						StructQBKey obj = party						StructQBKey func = is_host					}$										:i $change$$g_net_leader_player_num$ = %GLOBAL%$player$				:i else 					:i $getplayerinfo$%GLOBAL%$player$$party_id$					:i $SendStructure$:s{						:i $callback$ = $band_lobby_change_band_leader_callback$						:i $channel$ = $party$						:i $data_to_send$ = :s{							:i $party_id$ = %GLOBAL%$party_id$						:i :s}					:i :s}				:i endif			:i endif		:i else 			:i $change$$g_leader_player_num$ = %GLOBAL%$player$			:i $change$$g_net_leader_player_num$ = %GLOBAL%$player$			:i $band_lobby_update_primary_controller$			:i $band_lobby_pick_default_venue$$player$ = %GLOBAL%$player$			:i $band_lobby_refresh_band_leader_characters$		:i endif		:i if NOT $GotParam$${StructQBKey from_join}$			:i if (%i(1) = ~$g_shortcut_data$->$valid$)				:i $band_lobby_get_player_submenu_index$$player_num$ = %GLOBAL%$player$				:i $bl_cancel_challenge$$submenu_index$ = %GLOBAL%$submenu_index$$supress_button_helpers_update$ = %i(1)			:i endif			:i $players_list_refresh$			:i $band_lobby_adjust_submenus_for_leader_change$$old_leader$ = %GLOBAL%$old_leader$			:i $band_lobby_refresh_all_submenus$${StructQBKey type = local}$			:i $band_lobby_flash_ticker_msg$${				StructQBKey msg_checksum = leader_changed				StructInt time = 8			}$						:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$			:i $persistent_band_refresh_changed_characters$		:i endif	:i else 		:i $printf$${StructQBStringQs 0x0d5858d2}$	:i endif	:i if $GotParam$${StructQBKey play_sound}$		:i if (%GLOBAL%$play_sound$ = %i(1))			:i $SoundEvent$${StructQBKey event = Audio_UI_Band_Lobby_Leader}$		:i endif	:i endif	:i $band_lobby_update_lobby_title$	:i $bl_update_submenus_stored_gamertag$	:i endfunction]Script band_lobby_update_primary_controller fa5586cf [	:i $i$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $player$	:i if (%GLOBAL%$player$ = ~$g_leader_player_num$)		:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i if (%GLOBAL%$controller$ < %i(4))				:i if (~$primary_controller$ !== %GLOBAL%$controller$)					:i $change_primary_controller$:s{						:i $controller$ = %GLOBAL%$controller$						:i $modify_signin_change_flags$ = %i(0)					:i :s}					:i return 				:i endif			:i endif		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i endfunction]Script band_lobby_adjust_submenus_for_leader_change 0x0c8b71b1 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				old_leader			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x71a605d8	}$		:i $i$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$i$	:i if (~$g_net_leader_player_num$ = (~%GLOBAL%$submenu_data$->$player$))		:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}		:i if (~$g_lobby_state$ = $career$)			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu$$value$ = $band_leader_career$		:i elseif (~$g_lobby_state$ = $quickplay$)			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu$$value$ = $band_leader_quickplay$		:i else 			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu$$value$ = $band_leader_vs$		:i endif	:i else 		:i if ((~%GLOBAL%$submenu_data$->$player$) = %GLOBAL%$old_leader$)			:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu$$value$ = $band_member$		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i endfunction]Script band_lobby_grant_leadership 0x90fabe96 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1174822a	}$		:i $band_lobby_change_band_leader$$player$ = %GLOBAL%$player$$play_sound$ = %i(1)	:i endfunction]Script band_lobby_setup_strings f876f627 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs db79afa2	}$		:i $additional_strings$ = :s{:s}	:i if $IsXenonOrWinDX$		:i $additional_strings$ = (~$band_lobby_xenon_strings$)	:i elseif $IsPS3$		:i $additional_strings$ = (~$band_lobby_ps3_strings$)	:i endif	:i $change$$band_lobby_strings$ = :s{(~$band_lobby_common_strings$)%GLOBAL%$additional_strings$:s}	:i endfunction]Script band_lobby_add_local_players_to_submenus ba9c1dee [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0c3e5146	}$		:i $array$ = :a{%i(4294967295)%i(4294967295)%i(4294967295)%i(4294967295):a}	:i $GetMaxPlayers$	:i %GLOBAL%$player_index$ = %i(0)	:i while 	:i if $playerinfoequals$(%GLOBAL%$player_index$ + %i(1))$in_game$ = %i(1)		:i if $playerinfoequals$(%GLOBAL%$player_index$ + %i(1))$is_local_client$ = %i(1)			:i $getplayerinfo$(%GLOBAL%$player_index$ + %i(1))$controller$			:i if (%GLOBAL%$controller$ >= %i(0) AND %GLOBAL%$controller$ <= %i(3))				:i $SetArrayElement$$arrayName$ = $array$$index$ = %GLOBAL%$controller$$newValue$ = %GLOBAL%$player_index$			:i endif		:i endif	:i endif	:i %GLOBAL%$player_index$ = (%GLOBAL%$player_index$ + %i(1))	:i loop_to %GLOBAL%$max_players$	:i $controller_to_player_array$ = %GLOBAL%$array$	:i %GLOBAL%$submenu_index$ = %i(0)	:i while 	:i if ((%GLOBAL%$controller_to_player_array$:a{%GLOBAL%$submenu_index$:a}) >= %i(0))		:i $array$ = :a{%i(0)%i(0):a}		:i if $CheckForSignin$$controller_index$ = %GLOBAL%$submenu_index$$dont_set_primary$			:i $GetNetID$$controller_index$ = %GLOBAL%$submenu_index$			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$			:i if $IsPS3$				:i $getplayerinfo$((%GLOBAL%$controller_to_player_array$:a{%GLOBAL%$submenu_index$:a}) + %i(1))$gamertag$				:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $gamertag_checksum$				:i $change$$globalname$ = %GLOBAL%$gamertag_checksum$$newValue$ = (~%GLOBAL%$gamertag$)			:i endif		:i endif		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $player$$value$ = ((%GLOBAL%$controller_to_player_array$:a{%GLOBAL%$submenu_index$:a}) + %i(1))		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $occupied$$value$ = %i(1)		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $net_id$$value$ = %GLOBAL%$array$	:i else 		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $occupied$$value$ = %i(0)	:i endif	:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu$$value$ = $empty$	:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $is_updating$$value$ = %i(0)	:i %GLOBAL%$submenu_index$ = (%GLOBAL%$submenu_index$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i endfunction]Script band_lobby_add_remote_players_to_submenus 0x0eeb30fb [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x43967c7f	}$		:i $GetNumPlayersInGame$${StructQBKey remote}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey remote}$		:i while 		:i %GLOBAL%$submen_index$ = %i(0)		:i while 		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submen_index$$param$ = $occupied$		:i if (%GLOBAL%$occupied$ = %i(0))			:i $array$ = :a{:a}			:i $getplayerinfo$%GLOBAL%$player$$net_id_first$			:i $getplayerinfo$%GLOBAL%$player$$net_id_second$			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_first$			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_second$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submen_index$$element$ = $player$$value$ = %GLOBAL%$player$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submen_index$$element$ = $occupied$$value$ = %i(1)			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submen_index$$element$ = $net_id$$value$ = %GLOBAL%$array$			:i if $IsPS3$				:i $getplayerinfo$%GLOBAL%$player$$gamertag$				:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submen_index$$param$ = $gamertag_checksum$				:i $change$$globalname$ = %GLOBAL%$gamertag_checksum$$newValue$ = (~%GLOBAL%$gamertag$)			:i endif			:i if (~$g_num_lobby_local_submenus$ > %GLOBAL%$submen_index$)				:i $SetPlayerInfo$%GLOBAL%$player$$controller$ = %GLOBAL%$submen_index$			:i endif			:i continue		:i endif		:i %GLOBAL%$submen_index$ = (%GLOBAL%$submen_index$ + %i(1))		:i loop_to (~$g_num_lobby_total_submenus$)		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$remote$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script band_lobby_return_from_game_rules 0x5684577d [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x7b13ff8e	}$		:i $band_lobby_set_party_joinable$${StructInt joinable = 1}$	:i $band_lobby_destroy_popup_menu$ isNull 	:i endfunction]Script bl_is_in_band_lobby_menus f8dd7986 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x3e02d7b9	}$		:i %GLOBAL%$in_bl$ = $false$	:i $ui_event_get_stack$	:i if ((%GLOBAL%$stack$:a{%i(0):a}->$base_name$) = %s("band_lobby"))		:i %GLOBAL%$in_bl$ = $true$	:i else 		:i if (%GLOBAL%$stack_size$ > %i(1))			:i if ((%GLOBAL%$stack$:a{%i(1):a}->$base_name$) = %s("band_lobby"))				:i $ui_event_get_top$				:i if $GotParam$${StructQBKey is_popup}$					:i %GLOBAL%$in_bl$ = $true$				:i endif			:i endif		:i endif	:i endif	:i return %GLOBAL%$in_bl$	:i endfunction]Script TEMP_clear_upper_player_infos 0x590f35a2 [	:i $printf$${StructQBStringQs c0a0339a}$	:i $GetNumPlayersInGame$	:i $GetMaxPlayers$	:i $player_num$ = (%GLOBAL%$num_players$ + %i(1))	:i if ((%GLOBAL%$max_players$ - %GLOBAL%$num_players$) > %i(0))		:i while 		:i $net_clear_player_info$$player$ = %GLOBAL%$player_num$$on_screen$ = %i(0)$is_local_client$ = %i(0)		:i $player_num$ = (%GLOBAL%$player_num$ + %i(1))		:i loop_to (%GLOBAL%$max_players$ - %GLOBAL%$num_players$)	:i endif	:i endfunction]Script band_lobby_can_manage_band_members 0x8da56397 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x6df1e7d7	}$		:i %GLOBAL%$ret$ = $true$	:i if $InNetGame$		:i %GLOBAL%$ret$ = $false$	:i endif	:i if (~$g_career_search$ !== $null$)		:i %GLOBAL%$ret$ = $false$	:i endif	:i if $band_lobby_is_career_state$		:i if $band_lobby_is_single_player$			:i %GLOBAL%$ret$ = $false$		:i endif	:i endif	:i return %GLOBAL%$ret$	:i endfunction]Script band_lobby_can_change_game_mode 0x4d288e36 [	:i %GLOBAL%$ret$ = $true$	:i if $InNetGame$		:i %GLOBAL%$ret$ = $false$	:i endif	:i if (~$g_career_search$ !== $null$)		:i %GLOBAL%$ret$ = $false$	:i endif	:i return %GLOBAL%$ret$	:i endfunction]Script band_lobby_are_all_players_signed_in 0x841a6cce [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs a1ff01a5	}$		:i $ret$ = $true$	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if NOT $CheckForSignin$$local$$controller_index$ = %GLOBAL%$controller$$dont_set_primary$			:i $ret$ = $false$			:i continue		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to %GLOBAL%$num_players$	:i endif	:i if (%GLOBAL%$ret$ = $true$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_get_player_user_id dcbca47c [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $array$ = :a{:a}	:i $getplayerinfo$%GLOBAL%$player$$net_id_first$	:i $getplayerinfo$%GLOBAL%$player$$net_id_second$	:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_first$	:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$net_id_second$	:i return $user_id$ = %GLOBAL%$array$	:i endfunction]Script band_lobby_can_toggle_guitar_bass a20c28af [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x6f9a82ba	}$		:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $guitar$			:i return ${StructQBKey true}$		:i endif		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $Bass$			:i return ${StructQBKey true}$		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to %GLOBAL%$num_players$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_satisfy_min_players 0x2ac2d925 [	${StructQBKey game_rule = faceoff}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				team			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x36dc2647	}$		:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i if (%GLOBAL%$team$ = %i(1))			:i $min_players$ = %i(4)		:i else 			:i if (%GLOBAL%$game_rule$ = $elimination$)				:i $min_players$ = %i(3)			:i else 				:i $min_players$ = %i(2)			:i endif		:i endif		:i if (%GLOBAL%$num_players$ >= %GLOBAL%$min_players$)			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script bl_is_shortcut_data_valid 0x5d22b3f1 [	:i if (%i(1) = ~$g_shortcut_data$->$valid$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script bl_is_shortcut_data_invalid dcb34b18 [	:i if $bl_is_shortcut_data_valid$		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script bl_should_display_challenge_shortcut 0x6a777d97 [	:i if $bl_is_shortcut_data_valid$		:i if ($quickplay$ = ~$g_lobby_state$)			:i return ${StructQBKey true}$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_is_matching_instruments eb5e8022 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0f451bf4	}$		:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i $getplayerinfo$%GLOBAL%$player$$part$		:i while 		:i if NOT $playerinfoequals$%GLOBAL%$player$$part$ = %GLOBAL%$part$			:i return ${StructQBKey false}$		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_even_number_of_instruments 0x8b7f5e52 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs ce3de9d5	}$		:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $num_guitars$ = %i(0)		:i $num_drums$ = %i(0)		:i $num_mics$ = %i(0)		:i $num_bass$ = %i(0)		:i $GetFirstPlayer$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $guitar$			:i $num_guitars$ = (%GLOBAL%$num_guitars$ + %i(1))		:i elseif $playerinfoequals$%GLOBAL%$player$$part$ = $Bass$			:i $num_bass$ = (%GLOBAL%$num_bass$ + %i(1))		:i elseif $playerinfoequals$%GLOBAL%$player$$part$ = $drum$			:i $num_drums$ = (%GLOBAL%$num_drums$ + %i(1))		:i elseif $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$			:i $num_mics$ = (%GLOBAL%$num_mics$ + %i(1))		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$		:i $mod$$a$ = %GLOBAL%$num_guitars$$b$ = %i(2)		:i $guitar_result$ = %GLOBAL%$mod$		:i $mod$$a$ = %GLOBAL%$num_bass$$b$ = %i(2)		:i $bass_result$ = %GLOBAL%$mod$		:i $mod$$a$ = %GLOBAL%$num_drums$$b$ = %i(2)		:i $drums_result$ = %GLOBAL%$mod$		:i $mod$$a$ = %GLOBAL%$num_mics$$b$ = %i(2)		:i $mic_result$ = %GLOBAL%$mod$		:i if ((%GLOBAL%$guitar_result$ = %i(0)) AND (%GLOBAL%$bass_result$ = %i(0)) AND (%GLOBAL%$drums_result$ = %i(0)) AND (%GLOBAL%$mic_result$ = %i(0)))			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_traditional_band 0x75bdd975 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x90fba1d2	}$		:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(4))		:i $max_guitarists$ = %i(4)		:i $max_drummers$ = %i(2)		:i $max_vocalists$ = %i(2)	:i else 		:i $max_guitarists$ = %i(2)		:i $max_drummers$ = %i(1)		:i $max_vocalists$ = %i(1)	:i endif	:i if (%GLOBAL%$num_players$ > %i(0))		:i $num_guitarists$ = %i(0)		:i $num_drummers$ = %i(0)		:i $num_vocalists$ = %i(0)		:i $GetFirstPlayer$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $guitar$			:i $num_guitarists$ = (%GLOBAL%$num_guitarists$ + %i(1))		:i elseif $playerinfoequals$%GLOBAL%$player$$part$ = $Bass$			:i $num_guitarists$ = (%GLOBAL%$num_guitarists$ + %i(1))		:i elseif $playerinfoequals$%GLOBAL%$player$$part$ = $drum$			:i $num_drummers$ = (%GLOBAL%$num_drummers$ + %i(1))		:i elseif $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$			:i $num_vocalists$ = (%GLOBAL%$num_vocalists$ + %i(1))		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$		:i if (			:i (%GLOBAL%$num_guitarists$ > %GLOBAL%$max_guitarists$) OR 			:i (%GLOBAL%$num_drummers$ > %GLOBAL%$max_drummers$) OR 			:i (%GLOBAL%$num_vocalists$ > %GLOBAL%$max_vocalists$)			:i )			:i return ${StructQBKey false}$		:i else 			:i return ${StructQBKey true}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_IsLocalLobby b2d9d367 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs b02c69d6	}$		:i if (~$g_lobby_net_state$ = $local$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_IsNetLobby_and_SignIn e946ea48 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x2734bd57	}$		:i if NOT (~$g_lobby_net_state$ = $local$)		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller$$dont_set_primary$			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_IsNetLobby_and_not_SignIn 0x732e16c7 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x2dc029bb	}$		:i if NOT (~$g_lobby_net_state$ = $local$)		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller$$dont_set_primary$			:i return ${StructQBKey false}$		:i else 			:i return ${StructQBKey true}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_isguitarcontroller 0x3f5ff6c8 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x24fc26c7	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$	:i if (~$allow_controller_for_all_instruments$ = %i(1))		:i return ${StructQBKey true}$	:i elseif $IsGuitarController$$controller$ = %GLOBAL%$controller$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_isdrumcontroller 0x38740003 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs fce5cf51	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$	:i if $IsDrumController$$controller$ = %GLOBAL%$controller$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_isvocalscontroller 0x5a5814c3 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs f0c599d4	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$	:i if NOT $band_lobby_check_is_guitar_or_drum_controller$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_check_is_guitar_or_drum_controller 0x14453d17 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x7b5dc77c	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$	:i if (~$allow_controller_for_all_instruments$ = %i(1))		:i return ${StructQBKey true}$	:i elseif $IsGuitarController$$controller$ = %GLOBAL%$controller$		:i return ${StructQBKey true}$	:i elseif $IsDrumController$$controller$ = %GLOBAL%$controller$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_check_is_drummer c66020c8 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs e610e314	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$part$	:i if (%GLOBAL%$part$ = $drum$)		:i if $any_song_has_double_kick$			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_check_is_guitarist_or_drummer b345c972 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs fffc644b	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$part$	:i if (%GLOBAL%$part$ = $drum$ OR %GLOBAL%$part$ = $guitar$ OR %GLOBAL%$part$ = $Bass$)		:i return ${StructQBKey true}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_isbandleader 0x74ea8076 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x5e1f3eb1	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if ((~%GLOBAL%$submenu_data$->$player$) = (~$g_net_leader_player_num$))		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_career_available d5d21ad4 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs d7f0ccc6	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i if $DemoBuild$		:i return ${StructQBKey false}$	:i endif	:i return ${StructQBKey true}$	:i if NOT $band_lobby_are_remote_players_in_game$		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $player$		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if NOT $has_completed_forced_career_flow$$device_num$ = %GLOBAL%$controller$			:i return ${StructQBKey false}$		:i endif	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_isoccupied c535c8f8 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs e061c6df	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if ((~%GLOBAL%$submenu_data$->$occupied$) = %i(1))		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_check_is_occupied_guitarist ecae54c7 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs e061c6df	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i if $band_lobby_isoccupied$ isNull 		:i if $band_lobby_check_show_instrument_option$ isNull 			:i return ${StructQBKey true}$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_should_force_highway_view 0x3d06ba21 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}	}$		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$		:i return ${StructQBKey true}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_sync_highway_view 0x88ba5815 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}	}$		:i $this_player$ = %GLOBAL%$player$	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$			:i if NOT (%GLOBAL%$this_player$ = %GLOBAL%$player$)				:i $getplayerinfo$%GLOBAL%$player$$vocals_highway_view$				:i $SetPlayerInfo$%GLOBAL%$this_player$$vocals_highway_view$ = %GLOBAL%$vocals_highway_view$				:i return 			:i endif		:i endif		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script band_lobby_set_vocals_highway_view 0x9ebfc9b8 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				vocals_highway_view			]		}		StructQBKey all	}$		:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$			:i $SetPlayerInfo$%GLOBAL%$player$$vocals_highway_view$ = %GLOBAL%$vocals_highway_view$$store$		:i endif		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script band_lobby_is_primary_vocalist_ 0x32f96405 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x69f4f57d	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i if NOT $band_lobby_isvocals$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$		:i return ${StructQBKey false}$	:i endif	:i $this_player$ = %GLOBAL%$player$	:i $GetNumPlayersInGame$${StructQBKey on_screen}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$			:i if (%GLOBAL%$this_player$ = %GLOBAL%$player$)				:i return ${StructQBKey true}$			:i else 				:i return ${StructQBKey false}$			:i endif		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_should_show_mic_preference b2c43188 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}	}$		:i if $IsPS3$		:i return ${StructQBKey false}$	:i else 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $Vocals$			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i $band_lobby_get_is_guest$$device_num$ = %GLOBAL%$controller$			:i if (%GLOBAL%$is_guest$ = %i(1))				:i return ${StructQBKey false}$			:i endif			:i if $GotParam$${StructQBKey ignore_headset}$				:i return ${StructQBKey true}$			:i endif			:i if $controller_has_headset$$controller$ = %GLOBAL%$controller$				:i return ${StructQBKey true}$			:i else 				:i return ${StructQBKey false}$			:i endif		:i else 			:i return ${StructQBKey false}$		:i endif	:i endif	:i endfunction]Script band_lobby_should_show_mic_preference_ignore_headset 0x1a64b315 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}	}$		:i if $band_lobby_should_show_mic_preference$$ignore_headset$$player$ = %GLOBAL%$player$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_isvocals 0x5ec0932c [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x06870d9d	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if $playerinfoequals$(~%GLOBAL%$submenu_data$->$player$)$part$ = $Vocals$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_isnotlocal 0x83a6ca4c [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x8d1dd4ef	}$		:i if (~$g_lobby_net_state$ = $local$)		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script band_lobby_isnotprivate 0x9c8e0b18 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x97bd600f	}$		:i if (~$g_lobby_net_state$ = $net_private$)		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script band_lobby_isnotpublic 0x59158969 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x181d1eed	}$		:i if (~$g_lobby_net_state$ = $net_public$)		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script band_lobby_controller_enabled 0x42a2b8f4 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x59830b32	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i if (~$allow_controller_for_all_instruments$ = %i(1))		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_quickplay_state f42d9ee2 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x1f1859d7	}$		:i if (~$g_lobby_state$ = $quickplay$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_career_state 0x11a2853b [	:i if (~$g_lobby_state$ = $career$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_vs_state fd30787b [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs f195cb54	}$		:i if (~$g_lobby_state$ = $vs$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_public_vs_state 0x32216151 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x34044f43	}$		:i if ($band_lobby_is_vs_state$)		:i if (~$g_lobby_net_state$ = $net_public$)			:i return ${StructQBKey true}$		:i elseif (~$g_lobby_net_state$ = $net_private$)			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_private_vs_state 0x90c2abb7 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x34044f43	}$		:i if ($band_lobby_is_vs_state$)		:i if ((~$g_lobby_net_state$ = $net_private$) OR (~$g_lobby_net_state$ = $local$))			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_is_local_vs_state aab5ddd8 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs b536f046	}$		:i if ($band_lobby_is_vs_state$)		:i if (~$g_lobby_net_state$ = $local$)			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_are_no_remote_players_in_game 0x27c8e3e1 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x41ba538a	}$		:i if $band_lobby_are_remote_players_in_game$		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script band_lobby_are_remote_players_in_game 0x746a2cf4 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0f378fe5	}$		:i $GetNumPlayersInGame$${StructQBKey remote}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_can_display_ready 0x59830269 [	:i %GLOBAL%$display_ready$ = %i(1)	:i if (~$g_career_search$ = $quickmatch$)		:i $display_ready$ = %i(0)	:i endif	:i if $InNetGame$		:i if NOT $ishost$			:i $display_ready$ = %i(0)		:i endif	:i endif	:i if (%GLOBAL%$display_ready$ = %i(1))		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_does_not_require_signin e454b5b3 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x0a0e3d05	}$		:i if $band_lobby_does_require_signin$		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script band_lobby_does_require_signin f89e8096 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x6a5b38b5	}$		:i if $band_lobby_are_remote_players_in_game$		:i return ${StructQBKey true}$	:i endif	:i if (~$g_lobby_invite_flag$ = %i(1))		:i return ${StructQBKey true}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_isCheatUnlocked a8422b6a [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs ca03bf06	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index				cheat_tag			]		}		StructQBKey all	}$		:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $freeplay$)		:i return ${StructQBKey false}$	:i endif	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i if $IsLocallySignedIn$$controller$ = %GLOBAL%$controller$		:i if $IsXenonOrWinDX$			:i if $NetSessionFunc$$func$ = $xenonisguest$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}				:i if NOT (~$game_mode$ = $freeplay$)					:i $getplayerinfo$(~$g_leader_player_num$)$controller$					:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$				:i endif			:i else 				:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$			:i endif		:i else 			:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$		:i endif	:i else 		:i if NOT (~$game_mode$ = $freeplay$)			:i $getplayerinfo$(~$g_leader_player_num$)$controller$			:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$		:i endif	:i endif	:i $GetGlobalTags$$user_options$$param$ = %GLOBAL%$cheat_tag$$savegame$ = %GLOBAL%$savegame$	:i if (( isNull ->%GLOBAL%$cheat_tag$) = %i(1))		:i return ${StructQBKey true}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script bl_join_text a69ac2c1 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i if $IsXenonOrWinDX$		:i if $band_lobby_does_require_signin$			:i $string_checksum$ = $sign_in$		:i else 			:i $string_checksum$ = $join$		:i endif	:i else 		:i $string_checksum$ = $join$	:i endif	:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->%GLOBAL%$string_checksum$):s}	:i endfunction]Script band_lobby_ready_text 0x714cc057 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $string_checksum$ = $play_career$	:i if (~$g_career_search$ = $host_only$)		:i $string_checksum$ = $finish_search$	:i endif	:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->%GLOBAL%$string_checksum$):s}	:i endfunction]Script band_lobby_InstrumentText f6afd313 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs aaec68ea	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$	:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->%GLOBAL%$part$):s}	:i endfunction]Script band_lobby_DifficultyText 0x4fadb2ca [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs db10145a	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$difficulty$	:i if (%GLOBAL%$difficulty$ = $expert$)		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$		:i if (%GLOBAL%$part$ = $drum$)			:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$double_kick_drum$			:i if (%GLOBAL%$double_kick_drum$ = %i(1))				:i $difficulty$ = $expert_plus$			:i endif		:i endif	:i endif	:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->%GLOBAL%$difficulty$):s}	:i endfunction]Script band_lobby_HelperPillText 0x90138a93 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x70fa2a60	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$	:i $user_control_helper_get_buttonchar$$button$ = $green$$controller$ = %GLOBAL%$submenu_index$	:i $FormatText$$textname$ = $text_param$^[4d4555da]^$s$ = %GLOBAL%$buttonchar$	:i return $text_params$ = :s{$a$ = %GLOBAL%$text_param$:s}	:i endfunction]Script band_lobby_LobbyNetStateText 0x7760cc93 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs f227e1b0	}$		:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->~$g_lobby_net_state$):s}	:i endfunction]Script band_lobby_LobbyStateText 0x2e2473aa [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x8fd97e26	}$		:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->~$g_lobby_state$):s}	:i endfunction]Script band_lobby_GameRulesText 0x40cff18f [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x625e1f5b	}$		:i if $StructureContains$$structure$ = ~$band_lobby_strings$(~$competitive_rules$)		:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->~$competitive_rules$):s}	:i endif	:i if $StructureContains$$structure$ = ~$band_lobby_strings$(~$game_mode$)		:i return $text_params$ = :s{$a$ = (~$band_lobby_strings$->~$game_mode$):s}	:i endif	:i return ${		StructStruct text_params		{			StructHeader			{				StructQBStringQs a = 0x54ddb253			}		}	}$		:i endfunction]Script band_lobby_RockerText 0x1478b744 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x2cb86307	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$character_id$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$character_savegame$	:i if $GotParam$${StructQBKey character_savegame}$		:i if $playerinfoequals$(~%GLOBAL%$submenu_data$->$player$)$is_local_client$ = %i(1)			:i $get_fullname_of_character$$savegame$ = %GLOBAL%$character_savegame$$id$ = %GLOBAL%$character_id$$profanity_allowed$		:i else 			:i $get_fullname_of_character$$savegame$ = %GLOBAL%$character_savegame$$id$ = %GLOBAL%$character_id$		:i endif	:i else 		:i $fullname$ = ^[00000000]^	:i endif	:i return $text_params$ = :s{$a$ = %GLOBAL%$fullname$:s}	:i endfunction]Script band_lobby_VenueText ff2c1bd1 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x2b2b6f3b	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $venue$ = ^[00000000]^	:i if $StructureContains$$structure$ = ~$LevelZones$(~$g_band_lobby_current_level$)		:i if $StructureContains$$structure$ = (~$LevelZones$->~$g_band_lobby_current_level$)$Title$			:i %GLOBAL%$venue$ = (~$LevelZones$->(~$g_band_lobby_current_level$)->$Title$)		:i endif	:i endif	:i return $text_params$ = :s{$a$ = %GLOBAL%$venue$:s}	:i endfunction]Script band_lobby_CheatOnOffText eab474d9 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x88ae0cf1	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				name				player				submenu_index			]		}		StructQBKey all	}$		:i $option_text$ = ^[7cddf289]^	:i $i$ = %i(0)	:i $GetArraySize$(~$guitar_hero_cheats$)	:i while 	:i if ((~$guitar_hero_cheats$:a{%GLOBAL%$i$:a}->$name$) = %GLOBAL%$name$)		:i $var$ = (~$guitar_hero_cheats$:a{%GLOBAL%$i$:a}->$var$)		:i continue	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i if NOT $StructureContains$$structure$ = (~$guitar_hero_cheats$:a{%GLOBAL%$i$:a})$options$		:i return 	:i endif	:i $options$ = ((~$guitar_hero_cheats$:a{%GLOBAL%$i$:a})->$options$)	:i $global$ = ((%GLOBAL%$options$:a{%i(0):a})->$globals$)	:i $location$ = ((%GLOBAL%$global$:a{%i(0):a})->$location$)	:i $variable$ = ((%GLOBAL%$global$:a{%i(0):a})->$set$)	:i if (%GLOBAL%$location$ = $playerinfo$)		:i $getplayerinfo$%GLOBAL%$player$%GLOBAL%$variable$		:i if (( isNull ->%GLOBAL%$variable$) !== %i(0))			:i $option_text$ = ^[0e96422f]^		:i endif	:i elseif (%GLOBAL%$location$ = $global$)		:i if (~%GLOBAL%$var$ > %i(0))			:i $option_text$ = ^[0e96422f]^		:i endif	:i endif	:i return $text_params$ = :s{$a$ = %GLOBAL%$option_text$:s}	:i endfunction]Script band_lobby_cheatText 0x29424c39 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x16ea52b8	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				name				player				submenu_index			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$part$	:i $i$ = %i(0)	:i $GetArraySize$(~$guitar_hero_cheats$)	:i while 	:i if ((~$guitar_hero_cheats$:a{%GLOBAL%$i$:a}->$name$) = %GLOBAL%$name$)		:i $continue$ = %i(0)		:i if $StructureContains$$structure$ = (~$guitar_hero_cheats$:a{%GLOBAL%$i$:a})$part$			:i if (%GLOBAL%$part$ = (~$guitar_hero_cheats$:a{%GLOBAL%$i$:a}->$part$))				:i $continue$ = %i(1)			:i endif		:i else 			:i $continue$ = %i(1)		:i endif		:i if (%GLOBAL%$continue$ = %i(1))			:i if NOT $StructureContains$$structure$ = (~$guitar_hero_cheats$:a{%GLOBAL%$i$:a})$options$				:i return 			:i endif			:i $options$ = ((~$guitar_hero_cheats$:a{%GLOBAL%$i$:a})->$options$)			:i $global$ = ((%GLOBAL%$options$:a{%i(0):a})->$globals$)			:i $location$ = ((%GLOBAL%$global$:a{%i(0):a})->$location$)			:i $variable$ = ((%GLOBAL%$global$:a{%i(0):a})->$set$)			:i if (%GLOBAL%$location$ = $playerinfo$)				:i $getplayerinfo$%GLOBAL%$player$%GLOBAL%$variable$				:i $current_state$ = ( isNull ->%GLOBAL%$variable$)				:i $option_text$ = ((%GLOBAL%$options$:a{%GLOBAL%$current_state$:a})->$text$)			:i elseif (%GLOBAL%$location$ = $global$)				:i $index$ = (~%GLOBAL%$variable$)				:i if (%GLOBAL%$index$ < %i(0))					:i $index$ = %i(0)				:i endif				:i $option_text$ = ((%GLOBAL%$options$:a{%GLOBAL%$index$:a})->$text$)			:i elseif (%GLOBAL%$location$ = $function$)				:i $get_savegame_from_player$$player$ = %GLOBAL%$player$				:i %GLOBAL%$variable$ = ((%GLOBAL%$global$:a{%i(0):a})->$get$)				:i %GLOBAL%$variable$$savegame$ = %GLOBAL%$savegame$				:i %GLOBAL%$option_text$ = (%GLOBAL%$options$:a{%GLOBAL%$soundcheck$:a}->$text$)			:i endif		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i return $text_params$ = :s{$a$ = %GLOBAL%$option_text$:s}	:i endfunction]Script band_lobby_startilt_text 0x67a97e51 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x726d2a55	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$use_tilt_for_starpower$	:i if (%GLOBAL%$use_tilt_for_starpower$ = %i(1))		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = e6b22ea1				}			}		}$			:i else 		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = 0x9dd9821b				}			}		}$			:i endif	:i endfunction]Script band_lobby_touchstrip_text 0x2ffc3ada [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x4a7aecf2	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$enable_touch_strip$	:i if (%GLOBAL%$enable_touch_strip$ = %i(1))		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = e6b22ea1				}			}		}$			:i else 		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = 0x9dd9821b				}			}		}$			:i endif	:i endfunction]Script band_lobby_vocal_star_power_tap_text 0x96851aa6 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x5e8a095f	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$vocal_star_power_tap$	:i if (%GLOBAL%$vocal_star_power_tap$ = %i(1))		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = e6b22ea1				}			}		}$			:i else 		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = 0x9dd9821b				}			}		}$			:i endif	:i endfunction]Script band_lobby_vocals_mic_enhancement_text d7a5d46b [	${Unknown [0001240067e6859a696969690000001800012400b1b15c3a6969696900000000]}$	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs f0e2436c	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i $GetGlobalTags$$savegame$ = %GLOBAL%$savegame$$user_options$$param$ = $vocals_mic_enhancement_save$	:i %GLOBAL%$vocals_mic_enhancement$ = %GLOBAL%$vocals_mic_enhancement_save$	:i if (%GLOBAL%$vocals_mic_enhancement$ = %i(1))		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = e6b22ea1				}			}		}$			:i else 		:i return ${			StructStruct text_params			{				StructHeader				{					StructQBStringQs a = 0x9dd9821b				}			}		}$			:i endif	:i endfunction]Script band_lobby_whole_band_mark_first_time_career 0x5fe90ec2 [	:i if $IsXenon$		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$			:i if NOT $has_completed_forced_career_flow$$device_num$ = %GLOBAL%$controller$				:i if $console_is_net_career_client$					:i $temp_struct$ = (~$g_net_career_progression$->$career_progression_tags$ + :s{$career_first_time_setup$ = %i(1):s})					:i $AppendStruct$$struct$ = $g_net_career_progression$$field$ = $career_progression_tags$$params$ = %GLOBAL%$temp_struct$$globalstruct$				:i else 					:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$$career_progression_tags$$params$ = :s{$career_first_time_setup$ = %i(1):s}$progression$ = $true$					:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)				:i endif			:i endif			:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$			:i loop_to %GLOBAL%$num_players$		:i endif	:i else 		:i $getplayerinfo$(~$g_leader_player_num$)$controller$		:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$		:i if NOT $has_completed_forced_career_flow$$device_num$ = %GLOBAL%$controller$			:i if $console_is_net_career_client$				:i $temp_struct$ = (~$g_net_career_progression$->$career_progression_tags$ + :s{$career_first_time_setup$ = %i(1):s})				:i $AppendStruct$$struct$ = $g_net_career_progression$$field$ = $career_progression_tags$$params$ = %GLOBAL%$temp_struct$$globalstruct$			:i else 				:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$$career_progression_tags$$params$ = :s{$career_first_time_setup$ = %i(1):s}$progression$ = $true$				:i $band_lobby_set_dirty_save_flag$$player$ = (~$g_leader_player_num$)$flag$ = %i(1)			:i endif		:i endif	:i endif	:i endfunction]Script band_lobby_whole_band_autosave 0x3a9a6c36 [	:i $spawnscriptnow$$band_lobby_whole_band_autosave_spawned$$params$ = isNull 	:i endfunction]Script band_lobby_whole_band_autosave_spawned 0x01fdc100 [	:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $setscriptcannotpause$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				choose_script				player				submenu_index			]		}		StructQBKey all	}$		:i $original_player_var$ = %GLOBAL%$player$	:i $original_submenu_index$ = %GLOBAL%$submenu_index$	:i $is_saving$ = :a{%i(0)%i(0)%i(0)%i(0):a}	:i $is_saving_on_lobby_leave$ = %i(0)	:i if $IsXenon$		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $band_lobby_get_player_submenu_index$$player_num$ = %GLOBAL%$player$			:i if (%GLOBAL%$submenu_index$ > %i(4294967295))				:i if (%GLOBAL%$submenu_index$ < (~$g_num_lobby_local_submenus$))					:i if $band_lobby_autosave$$choose_script$ = $NullScript$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$						:i $SetArrayElement$$arrayName$ = $is_saving$$index$ = %GLOBAL%$submenu_index$$newValue$ = %i(1)						:i $is_saving_on_lobby_leave$ = %i(1)					:i endif				:i endif			:i endif			:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$			:i loop_to %GLOBAL%$num_players$		:i endif	:i else 		:i $band_lobby_get_player_submenu_index$${StructQBString player_num = g_leader_player_num}$		:i if $band_lobby_autosave$$choose_script$ = $NullScript$$player$ = ~$g_leader_player_num$$submenu_index$ = %GLOBAL%$submenu_index$			:i $SetArrayElement$$arrayName$ = $is_saving$$index$ = %GLOBAL%$submenu_index$$newValue$ = %i(1)			:i $is_saving_on_lobby_leave$ = %i(1)		:i endif	:i endif	:i $printstruct$%GLOBAL%$is_saving$	:i $clean_up_user_control_helpers$	:i $temp_menus$ = :a{$null$$null$$null$$null$:a}	:i if (%GLOBAL%$is_saving_on_lobby_leave$ = %i(1))		:i $i$ = %i(0)		:i while 		:i if ((%GLOBAL%$is_saving$:a{%GLOBAL%$i$:a}) = %i(0))			:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$i$			:i if $playerinfoequals$(~%GLOBAL%$submenu_data$->$player$)$is_local_client$ = %i(1)				:i $SetArrayElement$$arrayName$ = $temp_menus$$index$ = %GLOBAL%$i$$newValue$ = (~%GLOBAL%$submenu_data$->$menu$)				:i $band_lobby_change_menu$$submenu_index$ = %GLOBAL%$i$$player$ = (~%GLOBAL%$submenu_data$->$player$)$action$ = $forward$$focus$ = %i(0)$menu$ = $empty$$no_forced$			:i endif		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to (~$g_num_lobby_local_submenus$)	:i endif	:i while 	:i if NOT $savegame_async_is_busy$		:i continue	:i endif	:i $printf$${StructString 0x00000000 = "Waiting for lobby saving to complete"}$	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i $i$ = %i(0)	:i while 	:i if NOT (%GLOBAL%$temp_menus$:a{%GLOBAL%$i$:a} = $null$)		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $player$		:i $band_lobby_change_menu$$submenu_index$ = %GLOBAL%$i$$player$ = %GLOBAL%$player$$action$ = $back$$focus$ = %i(0)$menu$ = (%GLOBAL%$temp_menus$:a{%GLOBAL%$i$:a})$no_forced$	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i if (((~$savegame_async_last_error$) = $None$) OR (%GLOBAL%$is_saving_on_lobby_leave$ = %i(0)))		:i $start_venue_effects$		:i %GLOBAL%$choose_script$ isNull $player$ = %GLOBAL%$original_player_var$$submenu_index$ = %GLOBAL%$original_submenu_index$$was_autosaving$ = %i(1)	:i endif	:i endfunction]Script band_lobby_needs_save 0x99f72282 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$controller$	:i if $IsXenon$		:i if (~$g_band_lobby_dirty_saves$:a{%GLOBAL%$controller$:a} = %i(1))			:i return ${StructQBKey true}$		:i endif	:i else 		:i if (~$g_band_lobby_dirty_saves$:a{%i(0):a} = %i(1))			:i return ${StructQBKey true}$		:i endif	:i endif	:i endfunction]Script band_lobby_set_dirty_save_flag 0x38653347 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				flag			]		}		StructQBKey all	}$		:i if $GotParam$${StructQBKey player}$		:i $getplayerinfo$%GLOBAL%$player$$controller$	:i else 		:i $RequireParams$${			StructArray 0x00000000			{				ArrayQBKey				[					savegame				]			}			StructQBKey all		}$				:i $controller$ = %GLOBAL%$savegame$	:i endif	:i $printscriptinfo$%s("band_lobby_set_dirty_save_flag %c = %f")$f$ = %GLOBAL%$flag$$c$ = %GLOBAL%$controller$	:i if $IsXenon$		:i $SetArrayElement$$arrayName$ = $g_band_lobby_dirty_saves$$index$ = %GLOBAL%$controller$$newValue$ = %GLOBAL%$flag$$globalarray$	:i else 		:i $SetArrayElement$$arrayName$ = $g_band_lobby_dirty_saves$$index$ = %i(0)$newValue$ = %GLOBAL%$flag$$globalarray$	:i endif	:i endfunction]Script band_lobby_career_mark_save_local_players ee40fb4c [	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $career$)		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)			:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$			:i loop_to %GLOBAL%$num_players$		:i endif	:i endif	:i endfunction]Script band_lobby_autosave dff6a9c4 [	${StructInt force = 0}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				choose_script				player				submenu_index				force			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$controller$	:i if (($IsPS3$) AND ($GotParam$$not_on_ps3$))		:i $should_save$ = %i(0)	:i else 		:i $should_save$ = %GLOBAL%$force$		:i if (%GLOBAL%$should_save$ = %i(0))			:i if $band_lobby_needs_save$$player$ = %GLOBAL%$player$				:i $should_save$ = %i(1)			:i endif		:i endif	:i endif	:i $band_lobby_get_is_guest$$device_num$ = %GLOBAL%$controller$	:i if (($IsLocallySignedIn$$controller$ = %GLOBAL%$controller$) AND (%GLOBAL%$is_guest$ = %i(0)) AND (%GLOBAL%$should_save$ = %i(1)))		:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$		:i if $get_savegame_has_saved_game$$savegame$ = %GLOBAL%$savegame$			:i if $is_autosave_on$$savegame$ = %GLOBAL%$savegame$				:i $savegame_async_save$$savegame$ = %GLOBAL%$savegame$$callback$ = $lobby_mc_autosave_callback$$Data$ = isNull 				:i $band_lobby_change_menu$$menu$ = $mc_saving$$action$ = $forward$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$$focus$ = %i(0)				:i return ${StructQBKey true}$			:i endif		:i endif	:i endif	:i %GLOBAL%$choose_script$ isNull 	:i return ${StructQBKey false}$	:i endfunction]Script net_career_goto_band_lobby ed3f588c [	:i $printf$${StructQBStringQs 0x02555b76}$	:i $end_singleplayer_game$	:i $KillSpawnedScript$${StructQBKey name = audio_crowd_play_loading_screen_swell}$	:i $KillSpawnedScript$${StructQBKey name = audio_crowd_loading_whistle}$	:i if $GotParam$${StructQBKey from_encore}$		:i $kill_gem_scroller$	:i endif	:i $ui_event_wait_for_safe$	:i $GetGlobalTags$${StructQBKey user_options}$	:i if (%GLOBAL%$autosave$ = %i(1))		:i $ui_memcard_autosave_all_players$${			StructQBKey event = menu_back			StructQBKey state = UIstate_quest_map		}$			:i else 		:i $ui_event$${			StructQBKey event = menu_back			StructStruct Data			{				StructHeader				{					StructQBKey state = UIstate_quest_map				}			}		}$			:i endif	:i endfunction]Script lobby_mc_autosave_callback baaa8a4c [	:i $printscriptinfo$${StructString 0x00000000 = "lobby_mc_autosave_callback"}$	:i $printstruct$ isNull 	:i if $GotParam$${StructQBKey update_ui}$	:i else 		:i if (%GLOBAL%$success$ = %i(1))			:i $band_lobby_set_dirty_save_flag$$savegame$ = %GLOBAL%$savegame$$flag$ = %i(0)		:i else 			:i if $GotParam$${StructQBKey error}$				:i $lobby_mc_handle_error$ isNull 				:i return 			:i endif			:i $scriptassert$${StructString 0x00000000 = "This should not happen when autosaving"}$		:i endif		:i $choose_script$ = (%GLOBAL%$Data$->$choose_script$)		:i %GLOBAL%$choose_script$%GLOBAL%$Data$	:i endif	:i endfunction]Script lobby_mc_loading_callback e67e4530 [	:i $printscriptinfo$${StructString 0x00000000 = "lobby_mc_loading_callback"}$	:i $printstruct$ isNull 	:i if $GotParam$${StructQBKey update_ui}$		:i if $GotParam$${StructQBKey saving}$			:i $band_lobby_change_menu$$menu$ = $mc_saving$$action$ = $forward$$player$ = (%GLOBAL%$Data$->$player$)$submenu_index$ = (%GLOBAL%$Data$->$submenu_index$)$no_forced$$focus$ = %i(0)		:i elseif $GotParam$${StructQBKey loading}$			:i $band_lobby_change_menu$$menu$ = $mc_loading$$action$ = $forward$$player$ = (%GLOBAL%$Data$->$player$)$submenu_index$ = (%GLOBAL%$Data$->$submenu_index$)$no_forced$$focus$ = %i(0)		:i elseif $GotParam$${StructQBKey scanning_dlc}$			:i $band_lobby_change_menu$$menu$ = $mc_dlc_scan$$action$ = $forward$$player$ = (%GLOBAL%$Data$->$player$)$submenu_index$ = (%GLOBAL%$Data$->$submenu_index$)$no_forced$$focus$ = %i(0)		:i endif	:i else 		:i if (%GLOBAL%$success$ = %i(1))			:i if (~$g_leader_player_num$ >= %i(0))				:i $load_saved_extras_states_for_player$$player$ = (%GLOBAL%$Data$->$player$)$controller$ = (%GLOBAL%$Data$->$controller$)$leader$ = (~$g_leader_player_num$)			:i endif			:i if $IsXenon$				:i $get_savegame_from_controller$$controller$ = (%GLOBAL%$Data$->$controller$)				:i $get_progression_instrument_user_option$$controller$ = (%GLOBAL%$Data$->$controller$)$option$ = %s("guitar_bass_flip")				:i $guitar_bass_flip$ = %GLOBAL%$user_option$				:i $getplayerinfo$(%GLOBAL%$Data$->$player$)$part$				:i if ((%GLOBAL%$part$ = $guitar$) OR (%GLOBAL%$part$ = $Bass$))					:i if (%GLOBAL%$guitar_bass_flip$ !== $None$)						:i $band_lobby_rocker_changed_player_part$:s{							:i $player$ = (%GLOBAL%$Data$->$player$)							:i $part$ = %GLOBAL%$guitar_bass_flip$						:i :s}						:i $part$ = %GLOBAL%$guitar_bass_flip$					:i endif				:i endif				:i $get_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = (%GLOBAL%$Data$->$controller$)$option$ = %s("difficulty")				:i if (%GLOBAL%$user_option$ !== $None$)					:i $SetPlayerInfo$(%GLOBAL%$Data$->$player$)$difficulty$ = %GLOBAL%$user_option$				:i endif				:i $band_lobby_local_join_get_character_id$:s{					:i $savegame$ = %GLOBAL%$savegame$					:i $playerinfo$ = (%GLOBAL%$Data$->$player$)				:i :s}				:i $SetPlayerInfo$(%GLOBAL%$Data$->$player$)$character_id$ = %GLOBAL%$character_id$				:i $SetPlayerInfo$(%GLOBAL%$Data$->$player$)$character_savegame$ = %GLOBAL%$character_savegame$				:i $SetPlayerInfo$(%GLOBAL%$Data$->$player$)$stored_character_index$ = %GLOBAL%$stored_character_index$				:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$				:i $persistent_band_refresh_changed_characters$			:i endif		:i else 			:i if $GotParam$${StructQBKey error}$				:i $lobby_mc_handle_error$ isNull 				:i return 			:i endif		:i endif		:i if $band_lobby_does_popup_exist$			:i $band_lobby_change_menu$$menu$ = $main$$action$ = $forward$$player$ = (%GLOBAL%$Data$->$player$)$submenu_index$ = (%GLOBAL%$Data$->$submenu_index$)$focus$ = %i(0)		:i else 			:i $band_lobby_change_menu$$menu$ = $main$$action$ = $forward$$player$ = (%GLOBAL%$Data$->$player$)$submenu_index$ = (%GLOBAL%$Data$->$submenu_index$)		:i endif	:i endif	:i endfunction]Script lobby_mc_handle_error f1e3f4a0 [	:i $printscriptinfo$${StructString 0x00000000 = "lobby_mc_handle_error"}$	:i $printstruct$ isNull 	:i if $abort_for_signout$$controller$ = (%GLOBAL%$Data$->$controller$)		:i return 	:i endif	:i $change$${StructQBKey leaving_lobby_for_mc_error = mc_error_step_1}$	:i $ui_memcard_lobby_error$$error$ = %GLOBAL%$error$$error_params$ = %GLOBAL%$error_params$$controller$ = (%GLOBAL%$Data$->$controller$)$Data$ = :s{		:i $state$ = $uistate_band_lobby$		:i $handled_lobby_mc_error$ = %i(1)		:i $handled_lobby_mc_error_data$ = :s{			:i $submenu_index$ = (%GLOBAL%$Data$->$submenu_index$)			:i $player$ = (%GLOBAL%$Data$->$player$)			:i $controller$ = (%GLOBAL%$Data$->$controller$)			:i $savegame$ = %GLOBAL%$savegame$		:i :s}	:i :s}	:i endfunction]Script band_lobby_pick_default_venue 0x9d0f3746 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i if $is_venue_unlocked$$venue$ = (~$current_level$)$savegame$ = %GLOBAL%$savegame$		:i $change$$g_band_lobby_current_level$ = (~$current_level$)		:i return 	:i endif	:i $get_LevelZoneArray_size$	:i $array_count$ = %i(0)	:i while 	:i $get_LevelZoneArray_checksum$$index$ = %GLOBAL%$array_count$	:i if $is_venue_unlocked$$venue$ = %GLOBAL%$level_checksum$$savegame$ = %GLOBAL%$savegame$		:i $change$$g_band_lobby_current_level$ = %GLOBAL%$level_checksum$		:i continue	:i endif	:i %GLOBAL%$array_count$ = (%GLOBAL%$array_count$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i endfunction]Script band_lobby_controller_can_save b775cd82 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				controller			]		}		StructQBKey all	}$		:i $is_guest$ = %i(0)	:i $band_lobby_get_is_guest$$device_num$ = %GLOBAL%$controller$	:i if (%GLOBAL%$is_guest$ = %i(0))		:i if NOT $IsLocallySignedIn$$controller$ = %GLOBAL%$controller$			:i $is_guest$ = %i(1)		:i endif	:i endif	:i if (%GLOBAL%$is_guest$ = %i(1))		:i return ${StructQBKey false}$	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script bl_toggle_star_tilt 0x4b775866 [	${StructInt in_band_lobby = 1}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $options_change_tilt_star_power$ isNull 	:i $obj_getid$	:i $band_lobby_refresh_menu_text$$id$ = %GLOBAL%$ObjID$	:i endfunction]Script bl_toggle_touch_strip 0x72dbc082 [	${StructInt in_band_lobby = 1}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $options_change_touch_strip_option$ isNull 	:i $obj_getid$	:i $band_lobby_refresh_menu_text$$id$ = %GLOBAL%$ObjID$	:i endfunction]Script bl_toggle_vocal_star_power_tap 0x408e8516 [	${StructInt in_band_lobby = 1}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $options_change_vocal_star_power_tap$ isNull 	:i $obj_getid$	:i $band_lobby_refresh_menu_text$$id$ = %GLOBAL%$ObjID$	:i endfunction]Script bl_toggle_vocals_mic_enhancement 0x7b28425c [	${Unknown [0001240067e6859a6969696900000000]}$	:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i $options_change_vocals_mic_enhancement$$in_band_lobby$$player$ = %GLOBAL%$player$$savegame$ = %GLOBAL%$savegame$	:i $obj_getid$	:i $band_lobby_refresh_menu_text$$id$ = %GLOBAL%$ObjID$	:i endfunction]Script band_lobby_any_extras_unlocked 0x9ad05fb6 [	:i $printf$${StructString 0x00000000 = "band_lobby_num_extras_unlocked"}$	:i if $DemoBuild$		:i return ${StructQBKey false}$	:i endif	:i $extras$ = (~$band_lobby_submenu_states$->$extras$->$options$)	:i $GetArraySize$%GLOBAL%$extras$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $idx$ = %i(0)		:i while 		:i if $StructureContains$$structure$ = (%GLOBAL%$extras$:a{%GLOBAL%$idx$:a})$condition$			:i $func$ = (%GLOBAL%$extras$:a{%GLOBAL%$idx$:a}->$condition$)			:i if $StructureContains$$structure$ = (%GLOBAL%$extras$:a{%GLOBAL%$idx$:a})$condition_params$				:i $params$ = (%GLOBAL%$extras$:a{%GLOBAL%$idx$:a}->$condition_params$)			:i endif			:i if %GLOBAL%$func$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$%GLOBAL%$params$				:i return ${StructQBKey true}$			:i endif		:i else 			:i return ${StructQBKey true}$		:i endif		:i $idx$ = (%GLOBAL%$idx$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_num_cheats_unlocked b7a10340 [	:i $printf$${StructString 0x00000000 = "band_lobby_num_cheats_unlocked"}$	:i if $DemoBuild$		:i return ${StructQBKey false}$	:i endif	:i $cheats$ = (~$band_lobby_submenu_states$->$cheats$->$options$)	:i $GetArraySize$%GLOBAL%$cheats$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $idx$ = %i(0)		:i while 		:i if $StructureContains$$structure$ = (%GLOBAL%$cheats$:a{%GLOBAL%$idx$:a})$condition$			:i $func$ = (%GLOBAL%$cheats$:a{%GLOBAL%$idx$:a}->$condition$)			:i if $StructureContains$$structure$ = (%GLOBAL%$cheats$:a{%GLOBAL%$idx$:a})$condition_params$				:i $params$ = (%GLOBAL%$cheats$:a{%GLOBAL%$idx$:a}->$condition_params$)			:i endif			:i if %GLOBAL%$func$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$%GLOBAL%$params$				:i return ${StructQBKey true}$			:i endif		:i else 			:i return ${StructQBKey true}$		:i endif		:i $idx$ = (%GLOBAL%$idx$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_get_watch_timer_parent be5aba25 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				cas_player_index			]		}		StructQBKey all	}$		:i if NOT $ScreenElementExists$${StructQBKey id = band_lobby_desc_id}$		:i return ${StructQBKey false}$	:i endif	:i if NOT $band_lobby_desc_id$.$desc_resolvealias$${StructQBKey name = alias_band_viewport_vmenu}$		:i return ${StructQBKey false}$	:i endif	:i $viewport_vmenu$ = %GLOBAL%$resolved_id$	:i $GetArraySize$${StructQBString cas_queue_player_info}$	:i if (%GLOBAL%$cas_player_index$ < %i(0))		:i return ${StructQBKey false}$	:i endif	:i if (%GLOBAL%$cas_player_index$ >= %GLOBAL%$array_size$)		:i return ${StructQBKey false}$	:i endif	:i $player_index$ = %GLOBAL%$cas_player_index$	:i $entry$ = (~$cas_queue_player_info$:a{%GLOBAL%$cas_player_index$:a})	:i if $StructureContains$$structure$ = %GLOBAL%$entry$$player$		:i $band_lobby_get_player_submenu_index$$player_num$ = (%GLOBAL%$entry$->$player$)		:i if (%i(4294967295) !== %GLOBAL%$submenu_index$)			:i $player_index$ = %GLOBAL%$submenu_index$		:i endif	:i endif	:i if NOT $ResolveScreenElementID$$id$ = :a{			:i :s{$id$ = %GLOBAL%$viewport_vmenu$:s}			:i :s{$index$ = %GLOBAL%$player_index$:s}		:i :a}		:i return ${StructQBKey false}$	:i endif	:i if %GLOBAL%$resolved_id$.$desc_resolvealias$$name$ = $alias_viewport_loading_window$$param$ = $viewport_window$		:i return $true$$parent$ = %GLOBAL%$viewport_window$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_is_anyone_in_forced_flow fedded7d [	:i $i$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $menu$	:i switch (%GLOBAL%$menu$)		:i case $forced_difficulty$			:i endcase		case $forced_instruments$			:i endcase		case $forced_vocal_highway$			:i endcase		case $forced_mic_preference$			:i endcase		case $forced_lefty_flip$			:i return ${StructQBKey true}$	:i end_switch	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_is_single_player 0x942ed744 [	:i $i$ = %i(0)	:i $num_players$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $occupied$	:i if (%GLOBAL%$occupied$ = %i(1))		:i %GLOBAL%$num_players$ = (%GLOBAL%$num_players$ + %i(1))	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i if (%GLOBAL%$num_players$ = %i(1))		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script band_lobby_update_part_to_match_controller 0x8ea39fb4 [	:i if (~$allow_controller_for_all_instruments$ = %i(1))		:i return 	:i endif	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$submenu_index$	:i $player$ = (~%GLOBAL%$submenu_data$->$player$)	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i $getplayerinfo$%GLOBAL%$player$$part$$out$ = $old_part$	:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$	:i $GetControllerType$$controller$ = %GLOBAL%$controller$	:i switch %GLOBAL%$controller_type$		:i case $guitar$			:i $part$ = $guitar$			:i endcase		case $drum$			:i $part$ = $drum$			:i endcase		case $Vocals$			:i endcase		case $controller$			:i $part$ = $Vocals$	:i end_switch	:i if (~$g_leader_player_num$ = %GLOBAL%$player$)		:i $local_primary_joining$ = %i(1)	:i endif	:i if $IsPS3$		:i if $GotParam$${StructQBKey local_primary_joining}$			:i $band_lobby_switch_characters_for_ps3_at_join$$player$ = %GLOBAL%$player$$controller$ = %GLOBAL%$controller$		:i endif	:i endif	:i $band_lobby_handle_character_swap$:s{		:i $player$ = %GLOBAL%$player$		:i $old_part$ = %GLOBAL%$old_part$		:i $new_part$ = %GLOBAL%$part$		:i $no_refresh$	:i :s}	:i $SetPlayerInfo$%GLOBAL%$player$$part$ = %GLOBAL%$part$	:i $band_lobby_local_join_get_character_id$:s{		:i $savegame$ = %GLOBAL%$savegame$		:i $playerinfo$ = %GLOBAL%$player$		:i $local_primary_joining$ = %GLOBAL%$local_primary_joining$		:i $borrowed_from_band_leader$ = %GLOBAL%$borrowed_from_band_leader$	:i :s}	:i $SetPlayerInfo$%GLOBAL%$player$$character_id$ = %GLOBAL%$character_id$	:i $SetPlayerInfo$%GLOBAL%$player$$character_savegame$ = %GLOBAL%$character_savegame$	:i $SetPlayerInfo$%GLOBAL%$player$$stored_character_index$ = %GLOBAL%$stored_character_index$	:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$	:i $persistent_band_refresh_changed_characters$	:i $band_lobby_change_menu$:s{$menu$ = $main$$action$ = $forward$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$focus$ = %i(1):s}	:i endfunction]Script band_lobby_is_not_career a0cdb33c [	:i if $band_lobby_is_career_state$		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script bl_should_do_party_connection_lost_logic 0x81bf4946 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x66ce6fde	}$		:i if $InNetGame$		:i if $NetSessionFunc$${				StructQBKey obj = match				StructQBKey func = is_matchmaking_active			}$						:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i elseif $ScriptIsRunning$${StructQBKey band_lobby_end_game}$		:i return ${StructQBKey false}$	:i elseif $ScriptIsRunning$${StructQBKey band_lobby_end_game_spawned}$		:i return ${StructQBKey false}$	:i elseif (~$g_connection_loss_dialogue$ = %i(1))		:i return ${StructQBKey false}$	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script bl_do_nothing ffffffff [	:i endfunction]Script bl_update_submenus_stored_gamertag 0x02eb61d2 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x17898809	}$		:i %GLOBAL%$submenu_index$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $occupied$	:i if (%i(1) = %GLOBAL%$occupied$)		:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $player$		:i %GLOBAL%$array$ = :a{%i(0)%i(0):a}		:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller$$dont_set_primary$				:i $GetNetID$$controller_index$ = %GLOBAL%$controller$				:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$				:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$			:i endif			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $net_id$$value$ = %GLOBAL%$array$			:i if NOT $NetSessionFunc$$obj$ = $match$$func$ = $get_gamertag$$params$ = :s{$controller$ = %GLOBAL%$controller$:s}				:i %GLOBAL%$name$ = ^[00000000]^			:i endif			:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $gamertag_checksum$			:i $change$$globalname$ = %GLOBAL%$gamertag_checksum$$newValue$ = %GLOBAL%$name$		:i else 			:i $getplayerinfo$%GLOBAL%$player$$net_id_first$			:i $getplayerinfo$%GLOBAL%$player$$net_id_second$			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$			:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $net_id$$value$ = %GLOBAL%$array$			:i $getplayerinfo$%GLOBAL%$player$$gamertag$			:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$param$ = $gamertag_checksum$			:i $change$$globalname$ = %GLOBAL%$gamertag_checksum$$newValue$ = (~%GLOBAL%$gamertag$)		:i endif	:i endif	:i %GLOBAL%$submenu_index$ = (%i(1) + %GLOBAL%$submenu_index$)	:i loop_to (~$g_num_lobby_total_submenus$)	:i endfunction]Script debug_bl_dump_submenu_data_all 0x948e0ae8 [	:i $printf$${StructQBStringQs a220a895}$	:i $i$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$i$	:i $printstruct$(~%GLOBAL%$submenu_data$)	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_total_submenus$)	:i endfunction]Script debug_bl_dump_submenu_data 0x3e5721dd [	:i $printf$${StructQBStringQs 0x157248ca}$	:i if $GotParam$${StructQBKey index}$		:i $printf$^[d959eec4]^$a$ = %GLOBAL%$index$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$index$		:i $printstruct$(~%GLOBAL%$submenu_data$)	:i else 		:i $printf$${StructQBStringQs f9fe8783}$	:i endif	:i endfunction]Script debug_bl_dump_in_game_player_ids 0x28f90061 [	:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$party_id$		:i $getplayerinfo$%GLOBAL%$player$$net_id_first$		:i $getplayerinfo$%GLOBAL%$player$$net_id_second$		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $printf$^[0c15a2f6]^$a$ = %GLOBAL%$player$$b$ = %GLOBAL%$party_id$$c$ = %GLOBAL%$net_id_first$$d$ = %GLOBAL%$net_id_second$$e$ = %GLOBAL%$controller$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]