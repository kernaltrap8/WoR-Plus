Unknown [1c000000000000000000368c0000000000000000]Script band_lobby_focus_rocker a7370bd0 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index				savegame			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[5b5b48b9]^$p$ = %GLOBAL%$player$$v$ = %GLOBAL%$submenu_index$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if (($GotParam$$is_new_rocker$) OR ($GotParam$$is_random_rocker$))		:i $FormatText$$checksumname$ = $character_id$%s("temporary_car_%d")$d$ = %GLOBAL%$submenu_index$$addtostringlookup$ = $true$	:i elseif $GotParam$${StructQBKey is_random_avatar}$		:i $FormatText$$checksumname$ = $character_id$%s("temporary_avatar_%d")$d$ = %GLOBAL%$submenu_index$$addtostringlookup$ = $true$	:i endif	:i if NOT $GotParam$${StructQBKey character_id}$		:i $scriptassert$${StructString 0x00000000 = "missing character_id"}$		:i $character_id$ = (~$failsafe_car_profile$)	:i endif	:i if NOT $CharacterProfileExists$$savegame$ = %GLOBAL%$savegame$$name$ = %GLOBAL%$character_id$		:i $printf$$channel$ = $band_lobby_rocker$^[cc8a7845]^$s$ = %GLOBAL%$savegame$$c$ = %GLOBAL%$character_id$		:i return 	:i endif	:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = %GLOBAL%$character_id$$savegame$ = %GLOBAL%$savegame$	:i $persistent_band_refresh_changed_characters$	:i $update_camera_for_viewport$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$	:i endfunction]Script band_lobby_unfocus_rocker ffbeed5e [	:i $printf$${StructQBStringQs 0x82019063}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i endfunction]Script band_lobby_confirm_rocker 0x5aaff4fa [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i if $GotParam$${StructQBKey random_rocker}$		:i if $band_lobby_has_max_cars$$savegame$ = %GLOBAL%$savegame$			:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$			:i $band_lobby_update_ticker$${StructQBKey msg_checksum = car_full}$			:i return 		:i endif	:i endif	:i if NOT $band_lobby_is_edit_rocker_allowed$		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i return 	:i endif	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))		:i $menu$ = $main$	:i else 		:i $menu$ = $manage_member$	:i endif	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$chosen_character_id$	:i $character_id$ = %GLOBAL%$chosen_character_id$	:i if NOT $CharacterProfileExists$$savegame$ = %GLOBAL%$savegame$$name$ = %GLOBAL%$character_id$		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i return 	:i endif	:i if $GotParam$${StructQBKey random_rocker}$		:i $band_lobby_commit_random_rocker$ isNull 	:i endif	:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$	:i $array$ = (~%GLOBAL%$submenu_data$->$menu_indices$)	:i $SetArrayElement$${		StructQBKey arrayName = array		StructInt index = 0		StructInt newValue = 0	}$		:i $SetArrayElement$${		StructQBKey arrayName = array		StructInt index = 1		StructInt newValue = 0	}$		:i $SetArrayElement$${		StructQBKey arrayName = array		StructInt index = 2		StructInt newValue = 0	}$		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu_indices$$value$ = %GLOBAL%$array$	:i $band_lobby_change_playerinfo$:s{		:i $action$ = $back$		:i $character_id$ = %GLOBAL%$character_id$		:i $character_savegame$ = %GLOBAL%$savegame$		:i $menu$ = %GLOBAL%$menu$		:i $player$ = %GLOBAL%$player$		:i $submenu_index$ = %GLOBAL%$submenu_index$	:i :s}	:i endfunction]Script band_lobby_cancel_select_rocker da598eed [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				menu				player				submenu_index			]		}		StructQBKey all	}$		:i $printf$^[23bb4baa]^$d$ = %GLOBAL%$player$$v$ = %GLOBAL%$submenu_index$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$	:i $persistent_band_refresh_changed_characters$	:i $update_camera_for_viewport$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$	:i if (%GLOBAL%$menu$ = $rocker$)		:i if NOT (~$g_lobby_net_state$ = $local$)			:i $menu$ = $main$		:i endif	:i endif	:i $band_lobby_change_menu$$action$ = $back$$menu$ = %GLOBAL%$menu$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$	:i endfunction]Script band_lobby_has_max_cars 0x5d567bf9 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				savegame			]		}		StructQBKey all	}$		:i $CharacterProfileGetList$$savegame$ = %GLOBAL%$savegame$$categories$ = :a{$cars$:a}	:i $GetArraySize$%GLOBAL%$profile_list$	:i if (%GLOBAL%$array_size$ >= ~$max_num_create_a_rockers$)		:i return ${StructQBKey true}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_build_select_rocker_submenu dfac2112 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $printf$$channel$ = $band_lobby$^[3f03caf0]^$d$ = %GLOBAL%$player$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i $check_CAR_unlocks$$controller$ = %GLOBAL%$controller$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$character_id$$out$ = $current_character_id$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$character_savegame$$out$ = $current_character_savegame$	:i $submenu_states$ = (~$band_lobby_submenu_states$)	:i $focus_index$ = %i(0)	:i $menu_index$ = %i(0)	:i $array$ = :a{:a}	:i $menu_index$ = %i(0)	:i if $band_lobby_is_edit_rocker_allowed$		:i $CharacterProfileGetList$$savegame$ = %GLOBAL%$savegame$$categories$ = :a{$cars$:a}		:i $GetArraySize$%GLOBAL%$profile_list$		:i if (%GLOBAL%$array_size$ < ~$max_num_create_a_rockers$)			:i $AddArrayElement$:s{				:i $array$ = %GLOBAL%$array$				:i $element$ = :s{					:i $text$ = ^[aba58505]^					:i $checksum$ = $random_rocker$					:i $choose_script$ = $band_lobby_random_rocker_advance_to_menu$					:i $select_params$ = :s{						:i $menu$ = $accept_create_random_rocker$						:i $player$ = %GLOBAL%$player$						:i $submenu_index$ = %GLOBAL%$submenu_index$					:i :s}					:i $additional_focus_script$ = $band_lobby_focus_rocker$					:i $additional_focus_params$ = :s{						:i $player$ = %GLOBAL%$player$						:i $submenu_index$ = %GLOBAL%$submenu_index$						:i $savegame$ = %GLOBAL%$savegame$						:i $is_random_rocker$					:i :s}					:i $additional_unfocus_script$ = $band_lobby_unfocus_rocker$					:i $additional_unfocus_params$ = :s{						:i $player$ = %GLOBAL%$player$						:i $submenu_index$ = %GLOBAL%$submenu_index$						:i $savegame$ = %GLOBAL%$savegame$						:i $is_random_rocker$					:i :s}				:i :s}			:i :s}			:i $menu_index$ = (%GLOBAL%$menu_index$ + %i(1))			:i if $IsAvatarSystemInitialized$				:i $AddArrayElement$:s{					:i $array$ = %GLOBAL%$array$					:i $element$ = :s{						:i $text$ = ^[345f304f]^						:i $checksum$ = $random_rocker$						:i $choose_script$ = $band_lobby_random_rocker_advance_to_menu$						:i $select_params$ = :s{							:i $menu$ = $accept_create_random_avatar$							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$						:i :s}						:i $additional_focus_script$ = $band_lobby_focus_rocker$						:i $additional_focus_params$ = :s{							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$							:i $savegame$ = %GLOBAL%$savegame$							:i $is_random_avatar$						:i :s}						:i $additional_unfocus_script$ = $band_lobby_unfocus_rocker$						:i $additional_unfocus_params$ = :s{							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$							:i $savegame$ = %GLOBAL%$savegame$							:i $is_random_avatar$						:i :s}					:i :s}				:i :s}				:i $menu_index$ = (%GLOBAL%$menu_index$ + %i(1))			:i endif			:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))				:i $AddArrayElement$:s{					:i $array$ = %GLOBAL%$array$					:i $element$ = :s{						:i $text$ = ^[610b4705]^						:i $checksum$ = $edit_rockers$						:i $choose_script$ = $band_lobby_create_new_rocker$						:i $select_params$ = :s{							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$						:i :s}						:i $additional_focus_script$ = $band_lobby_focus_rocker$						:i $additional_focus_params$ = :s{							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$							:i $savegame$ = %GLOBAL%$savegame$							:i $is_new_rocker$						:i :s}						:i $additional_unfocus_script$ = $band_lobby_unfocus_rocker$						:i $additional_unfocus_params$ = :s{							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$							:i $savegame$ = %GLOBAL%$savegame$							:i $is_new_rocker$						:i :s}					:i :s}				:i :s}				:i $menu_index$ = (%GLOBAL%$menu_index$ + %i(1))			:i endif		:i else 			:i $AddArrayElement$:s{				:i $array$ = %GLOBAL%$array$				:i $element$ = :s{					:i $text$ = ^[aba58505]^					:i $checksum$ = $edit_rockers$					:i $choose_script$ = $band_lobby_update_ticker$					:i $select_params$ = :s{$msg_checksum$ = $car_full$:s}				:i :s}			:i :s}			:i if $IsAvatarSystemInitialized$				:i $AddArrayElement$:s{					:i $array$ = %GLOBAL%$array$					:i $element$ = :s{						:i $text$ = ^[345f304f]^						:i $checksum$ = $edit_rockers$						:i $choose_script$ = $band_lobby_update_ticker$						:i $select_params$ = :s{$msg_checksum$ = $car_full$:s}					:i :s}				:i :s}			:i endif			:i $AddArrayElement$:s{				:i $array$ = %GLOBAL%$array$				:i $element$ = :s{					:i $text$ = ^[610b4705]^					:i $checksum$ = $edit_rockers$					:i $choose_script$ = $band_lobby_update_ticker$					:i $select_params$ = :s{$msg_checksum$ = $car_full$:s}				:i :s}			:i :s}			:i $menu_index$ = (%GLOBAL%$menu_index$ + %i(1))		:i endif	:i endif	:i $getplayerinfo$%GLOBAL%$player$$part$	:i $CharacterProfileGetList$$savegame$ = %GLOBAL%$savegame$	:i $band_lobby_add_characters_to_menu$:s{		:i $focus_index$ = %GLOBAL%$focus_index$		:i $menu_index$ = %GLOBAL%$menu_index$		:i $savegame$ = %GLOBAL%$savegame$		:i $profile_list$ = %GLOBAL%$profile_list$		:i $current_character_id$ = %GLOBAL%$current_character_id$		:i $current_character_savegame$ = %GLOBAL%$current_character_savegame$		:i $part$ = %GLOBAL%$part$		:i $submenu_data$ = %GLOBAL%$submenu_data$		:i $array$ = %GLOBAL%$array$		:i $player$ = %GLOBAL%$player$		:i $submenu_index$ = %GLOBAL%$submenu_index$	:i :s}	:i if $IsXenon$		:i if NOT $band_lobby_controller_can_save$$controller$ = %GLOBAL%$savegame$			:i $old_savegame$ = %GLOBAL%$savegame$			:i if (~$g_leader_player_num$ >= %i(0))				:i $get_savegame_from_player$$player$ = (~$g_leader_player_num$)			:i else 				:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)			:i endif			:i if (%GLOBAL%$old_savegame$ !== %GLOBAL%$savegame$)				:i $CharacterProfileGetList$$savegame$ = %GLOBAL%$savegame$$categories$ = :a{$cars$:a}				:i $band_lobby_add_characters_to_menu$:s{					:i $band_leader_character_grab$ = %i(1)					:i $focus_index$ = %GLOBAL%$focus_index$					:i $menu_index$ = %GLOBAL%$menu_index$					:i $savegame$ = %GLOBAL%$savegame$					:i $profile_list$ = %GLOBAL%$profile_list$					:i $current_character_id$ = %GLOBAL%$current_character_id$					:i $current_character_savegame$ = %GLOBAL%$current_character_savegame$					:i $part$ = %GLOBAL%$part$					:i $submenu_data$ = %GLOBAL%$submenu_data$					:i $array$ = %GLOBAL%$array$					:i $player$ = %GLOBAL%$player$					:i $submenu_index$ = %GLOBAL%$submenu_index$				:i :s}			:i endif		:i endif	:i endif	:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))		:i $back_menu$ = $main$		:i $add_shortcuts$ = %i(1)	:i else 		:i $back_menu$ = $manage_member$		:i $add_shortcuts$ = %i(0)	:i endif	:i $FormatText$$checksumname$ = $select_rocker$%s("select_rocker%i")$i$ = %GLOBAL%$submenu_index$	:i $select_rocker_options$ = :s{		:i (%GLOBAL%$submenu_states$->%GLOBAL%$select_rocker$)		:i $options$ = %GLOBAL%$array$		:i $focus_param$ = $character_id$		:i $add_shortcuts$ = %GLOBAL%$add_shortcuts$		:i $back_script$ = $band_lobby_cancel_select_rocker$		:i $back_params$ = :s{			:i $menu$ = %GLOBAL%$back_menu$			:i $player$ = %GLOBAL%$player$			:i $submenu_index$ = %GLOBAL%$submenu_index$		:i :s}	:i :s}	:i $AddParam$$structure_name$ = $submenu_states$$name$ = %GLOBAL%$select_rocker$$value$ = %GLOBAL%$select_rocker_options$	:i $change$$band_lobby_submenu_states$ = %GLOBAL%$submenu_states$	:i $band_lobby_change_menu$$action$ = $forward$$menu$ = $select_rocker$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$$no_forced$	:i endfunction]Script band_lobby_random_rocker_advance_to_menu 0x014332e0 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				menu				player				submenu_index			]		}		StructQBKey all	}$		:i if $band_lobby_is_edit_rocker_allowed$		:i $band_lobby_change_menu$:s{			:i $action$ = $forward$			:i $menu$ = %GLOBAL%$menu$			:i $player$ = %GLOBAL%$player$			:i $submenu_index$ = %GLOBAL%$submenu_index$		:i :s}	:i else 		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$	:i endif	:i endfunction]Script band_lobby_borrow_band_leader_car 0x1e415265 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index				character_id				character_savegame				action				menu			]		}		StructQBKey all	}$		:i $printf$${StructString 0x00000000 = "band_lobby_borrow_band_leader_car"}$	:i $printstruct$ isNull 	:i $band_lobby_change_playerinfo$:s{		:i $action$ = %GLOBAL%$action$		:i $character_id$ = %GLOBAL%$character_id$		:i $character_savegame$ = %GLOBAL%$character_savegame$		:i $menu$ = %GLOBAL%$menu$		:i $player$ = %GLOBAL%$player$		:i $submenu_index$ = %GLOBAL%$submenu_index$	:i :s}	:i $set_chosen_character_id$$player$ = %GLOBAL%$player$$id$ = $None$	:i endfunction]Script band_lobby_add_characters_to_menu c8101560 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				focus_index				menu_index				savegame				profile_list				current_character_id				current_character_savegame				part				submenu_data				array				player				submenu_index			]		}		StructQBKey all	}$		:i $GetArraySize$%GLOBAL%$profile_list$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $this_id$ = (%GLOBAL%$profile_list$:a{%GLOBAL%$i$:a})		:i $CharacterProfileGetStruct$$savegame$ = %GLOBAL%$savegame$$name$ = %GLOBAL%$this_id$		:i if $display_character_logic$$profile_struct$ = %GLOBAL%$profile_struct$$savegame$ = %GLOBAL%$savegame$$part$ = %GLOBAL%$part$			:i $show_character$ = %i(1)			:i if NOT $is_completely_custom_musician$$id$ = %GLOBAL%$this_id$				:i if $is_avatar_character$$savegame$ = %GLOBAL%$savegame$$id$ = %GLOBAL%$this_id$					:i if ((~%GLOBAL%$submenu_data$->$occupied$) = %i(0))						:i %GLOBAL%$show_character$ = %i(0)					:i else 						:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$controller$						:i if NOT $CheckForSignin$$local$$controller_index$ = %GLOBAL%$controller$							:i %GLOBAL%$show_character$ = %i(0)						:i elseif $IsXenonOrWinDX$							:i if $NetSessionFunc$$func$ = $xenonisguest$$params$ = :s{$controller_index$ = %GLOBAL%$controller$:s}								:i %GLOBAL%$show_character$ = %i(0)							:i endif						:i endif					:i endif				:i endif			:i endif			:i if (%GLOBAL%$show_character$ = %i(1))				:i if $playerinfoequals$(~%GLOBAL%$submenu_data$->$player$)$is_local_client$ = %i(1)					:i $get_fullname_of_character$$savegame$ = %GLOBAL%$savegame$$id$ = %GLOBAL%$this_id$$profanity_allowed$				:i else 					:i $get_fullname_of_character$$savegame$ = %GLOBAL%$savegame$$id$ = %GLOBAL%$this_id$				:i endif				:i $AddArrayElement$:s{					:i $array$ = %GLOBAL%$array$					:i $element$ = :s{						:i $text$ = %GLOBAL%$fullname$						:i $checksum$ = %GLOBAL%$this_id$						:i $choose_script$ = $band_lobby_select_rocker$						:i $select_params$ = :s{							:i $band_leader_character_grab$ = %GLOBAL%$band_leader_character_grab$							:i $savegame$ = %GLOBAL%$savegame$							:i $character_id$ = %GLOBAL%$this_id$							:i $character_savegame$ = %GLOBAL%$savegame$							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$						:i :s}						:i $additional_focus_script$ = $band_lobby_focus_rocker$						:i $additional_focus_params$ = :s{							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$							:i $character_id$ = %GLOBAL%$this_id$							:i $savegame$ = %GLOBAL%$savegame$						:i :s}						:i $additional_unfocus_script$ = $band_lobby_unfocus_rocker$						:i $additional_unfocus_params$ = :s{							:i $player$ = %GLOBAL%$player$							:i $submenu_index$ = %GLOBAL%$submenu_index$							:i $character_id$ = %GLOBAL%$this_id$							:i $savegame$ = %GLOBAL%$savegame$						:i :s}					:i :s}				:i :s}				:i if ((%GLOBAL%$this_id$ = %GLOBAL%$current_character_id$) AND (%GLOBAL%$savegame$ = %GLOBAL%$current_character_savegame$))					:i $focus_index$ = %GLOBAL%$menu_index$				:i endif				:i $menu_index$ = (%GLOBAL%$menu_index$ + %i(1))			:i endif		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i return $focus_index$ = %GLOBAL%$focus_index$$menu_index$ = %GLOBAL%$menu_index$$array$ = %GLOBAL%$array$	:i endfunction]Script band_lobby_select_rocker 0x15dfcaa7 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				savegame				character_id				character_savegame				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))		:i $menu$ = $main$		:i $choose_action$ = $back$		:i $choose_script$ = $band_lobby_change_playerinfo$	:i else 		:i $menu$ = $manage_member$		:i $choose_action$ = $back$		:i $choose_script$ = $band_lobby_change_playerinfo$	:i endif	:i if $GotParam$${StructQBKey band_leader_character_grab}$		:i $choose_script$ = $band_lobby_borrow_band_leader_car$	:i else 		:i if $band_lobby_is_edit_rocker_allowed$			:i if $is_completely_custom_musician$$id$ = %GLOBAL%$character_id$				:i %GLOBAL%$menu$ = $accept_saved_rocker$				:i %GLOBAL%$choose_action$ = $forward$				:i %GLOBAL%$choose_script$ = $band_lobby_change_menu$			:i else 				:i if $is_avatar_character$$savegame$ = %GLOBAL%$savegame$$id$ = %GLOBAL%$character_id$					:i if $band_lobby_is_not_managed_player$$submenu_index$ = %GLOBAL%$submenu_index$						:i %GLOBAL%$menu$ = $accept_avatar$						:i %GLOBAL%$choose_action$ = $forward$						:i %GLOBAL%$choose_script$ = $band_lobby_change_menu$					:i endif				:i endif			:i endif			:i if $is_ghrocker$$id$ = %GLOBAL%$character_id$				:i %GLOBAL%$menu$ = $accept_gh_rocker$				:i %GLOBAL%$choose_action$ = $forward$				:i %GLOBAL%$choose_script$ = $band_lobby_change_menu$			:i endif		:i endif	:i endif	:i %GLOBAL%$choose_script$:s{		:i $action$ = %GLOBAL%$choose_action$		:i $menu$ = %GLOBAL%$menu$		:i $character_id$ = %GLOBAL%$character_id$		:i $character_savegame$ = %GLOBAL%$character_savegame$		:i $player$ = %GLOBAL%$player$		:i $submenu_index$ = %GLOBAL%$submenu_index$	:i :s}	:i endfunction]Script band_lobby_commit_random_rocker 0x48e174bb [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$chosen_character_id$	:i $character_id$ = %GLOBAL%$chosen_character_id$	:i if $GotParam$${StructQBKey random_rocker}$		:i $create_new_car_from_character_id$$character_id$ = %GLOBAL%$character_id$$savegame$ = %GLOBAL%$savegame$		:i if $GotParam$${StructQBKey random_avatar}$			:i $update_temporary_random_avatar$$slot$ = %GLOBAL%$submenu_index$$savegame$ = %GLOBAL%$savegame$		:i else 			:i $update_temporary_random_car$$slot$ = %GLOBAL%$submenu_index$$savegame$ = %GLOBAL%$savegame$		:i endif		:i $character_id$ = %GLOBAL%$new_character_id$	:i endif	:i return $character_id$ = %GLOBAL%$character_id$	:i endfunction]Script band_lobby_choose_edit_rocker 0x343e032f [	:i $printf$${StructQBStringQs a4a8c912}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i if $GotParam$${StructQBKey random_rocker}$		:i if $band_lobby_has_max_cars$$savegame$ = %GLOBAL%$savegame$			:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$			:i $band_lobby_update_ticker$${StructQBKey msg_checksum = car_full}$			:i return 		:i endif	:i endif	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$chosen_character_id$	:i $character_id$ = %GLOBAL%$chosen_character_id$	:i if NOT $CharacterProfileExists$$savegame$ = %GLOBAL%$savegame$$name$ = %GLOBAL%$character_id$		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i return 	:i endif	:i if $band_lobby_is_edit_rocker_allowed$		:i $band_lobby_change_network$$player$ = %GLOBAL%$player$$network$ = $local$$focus$ = %i(0)	:i else 		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i return 	:i endif	:i $band_lobby_kick_leader_out_of_band_manage$	:i $band_lobby_force_submenu_change_all$${		StructQBKey menu = main		StructQBKey submenu_data_match = occupied		StructInt match_value = 1	}$		:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$	:i $change$${StructInt respond_to_signin_changed = 1}$	:i $change$${StructInt respond_to_signin_changed_all_players = 1}$	:i $change$$cas_current_player$ = %GLOBAL%$player$	:i $FormatText$$checksumname$ = $player_name$%s("cas_player%i")$i$ = %GLOBAL%$player$	:i $change$$cas_current_player_name$ = %GLOBAL%$player_name$	:i if $GotParam$${StructQBKey random_rocker}$		:i $band_lobby_commit_random_rocker$ isNull 		:i $getplayerinfo$(%GLOBAL%$submenu_index$ + %i(1))$character_id$$out$ = $old_character_id$		:i $set_charselect_previous_character_id$$id$ = %GLOBAL%$old_character_id$		:i $change$${StructQBKey cas_editing_new_character = true}$	:i else 		:i $change$${StructQBKey cas_editing_new_character = false}$	:i endif	:i $cas_edit_character_profile$$character_id$ = %GLOBAL%$character_id$$savegame$ = %GLOBAL%$savegame$	:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$	:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))		:i $menu$ = $main$	:i else 		:i $menu$ = $manage_member$	:i endif	:i $band_lobby_change_playerinfo$:s{		:i $action$ = $back$		:i $character_id$ = %GLOBAL%$character_id$		:i $character_savegame$ = %GLOBAL%$savegame$		:i $menu$ = %GLOBAL%$menu$		:i $player$ = %GLOBAL%$player$		:i $submenu_index$ = %GLOBAL%$submenu_index$	:i :s}	:i $change$${StructQBKey cas_started_from = lobby}$	:i $CasCancelLoading$	:i $cas_destroy_all_characters$	:i $hide_glitch$${StructInt num_frames = 8}$	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i $ui_event_wait$$event$ = $menu_change$$Data$ = :s{$state$ = $UIstate_customize_character_enter$$from_lobby$ = %i(1)$new_data$ = :s{$state_device$ = %GLOBAL%$controller$:s}:s}	:i endfunction]Script band_lobby_create_new_rocker dc38355a [	:i $printf$${StructQBStringQs 0x74d673e0}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i if $band_lobby_has_max_cars$$savegame$ = %GLOBAL%$savegame$		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i $band_lobby_update_ticker$${StructQBKey msg_checksum = car_full}$		:i return 	:i endif	:i if $band_lobby_is_edit_rocker_allowed$		:i $band_lobby_change_network$$player$ = %GLOBAL%$player$$network$ = $local$$focus$ = %i(0)	:i else 		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i return 	:i endif	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$chosen_character_id$	:i if (%GLOBAL%$chosen_character_id$ = $None$)		:i return 	:i endif	:i $change$${StructInt respond_to_signin_changed = 1}$	:i $change$${StructInt respond_to_signin_changed_all_players = 1}$	:i $band_lobby_kick_leader_out_of_band_manage$	:i $band_lobby_force_submenu_change_all$${		StructQBKey menu = main		StructQBKey submenu_data_match = occupied		StructInt match_value = 1	}$		:i $band_lobby_change_focus_submenu_all$${StructQBKey focus_type = unfocus}$	:i $change$$cas_current_player$ = (~%GLOBAL%$submenu_data$->$player$)	:i $FormatText$$checksumname$ = $player_name$%s("cas_player%i")$i$ = (~%GLOBAL%$submenu_data$->$player$)	:i $change$$cas_current_player_name$ = %GLOBAL%$player_name$	:i $character_id$ = %GLOBAL%$chosen_character_id$	:i $band_lobby_commit_random_rocker$$random_rocker$ isNull 	:i $cas_edit_character_profile$$character_id$ = %GLOBAL%$character_id$$savegame$ = %GLOBAL%$savegame$	:i $change$${StructQBKey cas_editing_new_character = true}$	:i $change$${StructQBKey cas_started_from = lobby}$	:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$	:i $getplayerinfo$(%GLOBAL%$submenu_index$ + %i(1))$character_id$$out$ = $old_character_id$	:i $set_charselect_previous_character_id$$id$ = %GLOBAL%$old_character_id$	:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))		:i $menu$ = $main$	:i else 		:i $menu$ = $manage_member$	:i endif	:i $band_lobby_change_playerinfo$:s{		:i $action$ = $back$		:i $character_id$ = %GLOBAL%$character_id$		:i $character_savegame$ = %GLOBAL%$savegame$		:i $menu$ = %GLOBAL%$menu$		:i $player$ = %GLOBAL%$player$		:i $submenu_index$ = %GLOBAL%$submenu_index$	:i :s}	:i $CasCancelLoading$	:i $cas_destroy_all_characters$	:i $hide_glitch$${StructInt num_frames = 8}$	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i $ui_event_wait$$event$ = $menu_change$$Data$ = :s{		:i $state$ = $UIstate_customize_character_enter$		:i $from_lobby$ = %i(1)		:i $new_state$ = $UIstate_customize_character$		:i $new_data$ = :s{			:i $state_device$ = %GLOBAL%$controller$			:i $from_lobby$ = %i(1)		:i :s}	:i :s}	:i endfunction]Script band_lobby_find_missing_part bba0d73a [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$part$	:i $GetArraySize$(~$part_priority$)	:i $i$ = %i(0)	:i while 	:i if (%GLOBAL%$part$ !== ~$part_priority$:a{%GLOBAL%$i$:a})		:i $found_part$ = $None$		:i $j$ = %i(0)		:i while 		:i $FormatText$$checksumname$ = $submenu$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$j$		:i $getplayerinfo$(~%GLOBAL%$submenu$->$player$)$part$$out$ = $this_part$		:i if ((~$part_priority$:a{%GLOBAL%$i$:a}) = %GLOBAL%$this_part$)			:i %GLOBAL%$found_part$ = %GLOBAL%$this_part$			:i continue		:i endif		:i %GLOBAL%$j$ = (%GLOBAL%$j$ + %i(1))		:i loop_to (~$g_num_lobby_local_submenus$)		:i if (%GLOBAL%$found_part$ = $None$)			:i return $true$$missing_part$ = (~$part_priority$:a{%GLOBAL%$i$:a})		:i endif	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_get_used_band_member_parts 0x394de046 [	:i $used_parts$ = :a{:a}	:i $used_indices$ = :a{:a}	:i $GetArraySize$(~$part_priority$)	:i $i$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$i$	:i if $playerinfoequals$(~%GLOBAL%$submenu_data$->$player$)$in_game$ = %i(1)		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$stored_character_index$		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$character_id$		:i $AddArrayElement$$array$ = %GLOBAL%$used_parts$$element$ = %GLOBAL%$part$		:i $used_parts$ = %GLOBAL%$array$		:i if $playerinfoequals$(~%GLOBAL%$submenu_data$->$player$)$is_local_client$ = %i(1)			:i $AddArrayElement$$array$ = %GLOBAL%$used_indices$$element$ = %GLOBAL%$stored_character_index$			:i $used_indices$ = %GLOBAL%$array$			:i if $IsXenon$				:i if (%GLOBAL%$stored_character_index$ = %i(0))					:i if (((~%GLOBAL%$submenu_data$->$player$) !== ~$g_leader_player_num$) AND (~$g_leader_player_num$ !== %i(4294967295)))						:i $get_saved_band_member$$savegame$ = %GLOBAL%$i$$index$ = %i(0)						:i if (%GLOBAL%$user_changed$ = %i(0))							:i if ((%GLOBAL%$band_leader_member_id$ > %i(0)) AND (%GLOBAL%$band_leader_member_id$ < %i(4)))								:i $printf$%s("Controller %c is using buddy character index %i")$c$ = %GLOBAL%$i$$i$ = %GLOBAL%$band_leader_member_id$								:i $AddArrayElement$$array$ = %GLOBAL%$used_indices$$element$ = %GLOBAL%$band_leader_member_id$								:i $used_indices$ = %GLOBAL%$array$							:i endif						:i endif					:i endif				:i endif			:i endif		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i return $used_parts$ = %GLOBAL%$used_parts$$used_indices$ = %GLOBAL%$used_indices$	:i endfunction]Script band_lobby_load_band_leader_character b2542759 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index				part				character_index			]		}		StructQBKey all	}$		:i $get_part_text_nl$$part$ = %GLOBAL%$part$	:i $printf$$channel$ = $band_lobby$^[a66f064f]^$s$ = %GLOBAL%$submenu_index$$p$ = %GLOBAL%$part_text$	:i if (~$g_leader_player_num$ >= %i(0))		:i $get_savegame_from_player$$player$ = (~$g_leader_player_num$)	:i else 		:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i endif	:i $printf$$channel$ = $band_lobby$^[4844fa55]^$s$ = %GLOBAL%$savegame$	:i $printf$$channel$ = $band_lobby$^[a857703d]^$s$ = %GLOBAL%$character_index$	:i if NOT $get_saved_band_member$$index$ = %GLOBAL%$character_index$$savegame$ = %GLOBAL%$savegame$		:i $scriptassert$^[c56971ee]^$p$ = %GLOBAL%$index$$i$ = (~$g_leader_player_num$)	:i endif	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $printf$$channel$ = $band_lobby$^[eb6d8e8a]^$a$ = (~%GLOBAL%$submenu_data$->$player$)$b$ = %GLOBAL%$part$$c$ = %GLOBAL%$character_id$	:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$part$ = %GLOBAL%$part$$store$	:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$character_id$ = %GLOBAL%$character_id$$store$	:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$character_savegame$ = %GLOBAL%$character_savegame$$store$	:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$stored_character_index$ = %GLOBAL%$character_index$$store$	:i if NOT $GotParam$${StructQBKey no_refresh}$		:i $persistent_band_refresh_changed_characters$	:i endif	:i $update_camera_for_viewport$$player$ = (~%GLOBAL%$submenu_data$->$player$)$submenu_index$ = %GLOBAL%$submenu_index$	:i endfunction]Script band_lobby_fix_cpu_parts 0x2d840573 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x784863bb	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				used_parts				buddy_parts			]		}		StructQBKey all	}$		:i $bad_cpu_players$ = :a{:a}	:i $required_buddy_parts$ = %GLOBAL%$buddy_parts$	:i $GetArraySize$%GLOBAL%$used_parts$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $used_part$ = (%GLOBAL%$used_parts$:a{%GLOBAL%$i$:a})		:i if $ArrayContains$$array$ = %GLOBAL%$required_buddy_parts$$contains$ = %GLOBAL%$used_part$			:i $RemoveArrayElement$$array$ = %GLOBAL%$required_buddy_parts$$element$ = %GLOBAL%$used_part$			:i $required_buddy_parts$ = %GLOBAL%$array$		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i $i$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$i$	:i if ((~%GLOBAL%$submenu_data$->$occupied$) = %i(0))		:i if NOT $band_lobby_player_in_use$$player$ = (~%GLOBAL%$submenu_data$->$player$)			:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$$out$ = $cpu_part$			:i if $ArrayContains$$array$ = %GLOBAL%$used_parts$$contains$ = %GLOBAL%$cpu_part$				:i $AddArrayElement$$array$ = %GLOBAL%$bad_cpu_players$$element$ = (~%GLOBAL%$submenu_data$->$player$)				:i $bad_cpu_players$ = %GLOBAL%$array$			:i else 				:i if $ArrayContains$$array$ = %GLOBAL%$required_buddy_parts$$contains$ = %GLOBAL%$cpu_part$					:i $RemoveArrayElement$$array$ = %GLOBAL%$required_buddy_parts$$element$ = %GLOBAL%$cpu_part$					:i $required_buddy_parts$ = %GLOBAL%$array$				:i endif				:i $AddArrayElement$$array$ = %GLOBAL%$used_parts$$element$ = %GLOBAL%$cpu_part$				:i %GLOBAL%$used_parts$ = %GLOBAL%$array$			:i endif		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i $GetArraySize$%GLOBAL%$bad_cpu_players$	:i $num_bad_players$ = %GLOBAL%$array_size$	:i if (%GLOBAL%$num_bad_players$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $bad_player$ = (%GLOBAL%$bad_cpu_players$:a{%GLOBAL%$i$:a})		:i $GetArraySize$%GLOBAL%$required_buddy_parts$		:i if (%GLOBAL%$array_size$ = %i(0))			:i $printstruct$ isNull 			:i $scriptassert$%s("required_buddy_parts is empty, trying to set player %a")$a$ = %GLOBAL%$bad_player$			:i continue		:i endif		:i $new_part$ = (%GLOBAL%$required_buddy_parts$:a{%i(0):a})		:i $RemoveArrayElement$$array$ = %GLOBAL%$required_buddy_parts$$index$ = %i(0)		:i $required_buddy_parts$ = %GLOBAL%$array$		:i $SetPlayerInfo$%GLOBAL%$bad_player$$part$ = %GLOBAL%$new_part$$store$		:i $printf$%s("Changed player %a part to %b")$a$ = %GLOBAL%$bad_player$$b$ = %GLOBAL%$new_part$		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$num_bad_players$	:i endif	:i endfunction]Script band_lobby_refresh_band_leader_characters 0x6e1b5b59 [	:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x67d3c9d8	}$		:i if (~$g_leader_player_num$ = %i(4294967295))		:i return 	:i endif	:i $band_lobby_get_used_band_member_parts$	:i $getplayerinfo$(~$g_leader_player_num$)$part$$out$ = $leader_part$	:i $RemoveArrayElement$$array$ = (~$part_priority$)$element$ = %GLOBAL%$leader_part$	:i $buddy_parts$ = %GLOBAL%$array$	:i $band_lobby_fix_cpu_parts$$used_parts$ = %GLOBAL%$used_parts$$buddy_parts$ = %GLOBAL%$buddy_parts$	:i $GetArraySize$%GLOBAL%$buddy_parts$	:i $i$ = %i(0)	:i while 	:i $part$ = (%GLOBAL%$buddy_parts$:a{%GLOBAL%$i$:a})	:i $member_index$ = (%GLOBAL%$i$ + %i(1))	:i if NOT $ArrayContains$$array$ = %GLOBAL%$used_indices$$contains$ = %GLOBAL%$member_index$		:i if NOT $ArrayContains$$array$ = %GLOBAL%$used_parts$$contains$ = %GLOBAL%$part$			:i if $band_lobby_find_buddy_submenu$$part$ = %GLOBAL%$part$				:i $band_lobby_load_band_leader_character$:s{					:i $submenu_index$ = %GLOBAL%$submenu_index$					:i $character_index$ = %GLOBAL%$member_index$					:i $part$ = %GLOBAL%$part$					:i $no_refresh$				:i :s}			:i endif		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i if NOT $GotParam$${StructQBKey no_refresh}$		:i $persistent_band_refresh_changed_characters$	:i endif	:i endfunction]Script band_lobby_player_in_use 0x0f82203a [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $check_player$ = %GLOBAL%$player$	:i $GetNumPlayersInGame$$local$ = %GLOBAL%$local$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$$local$ = %GLOBAL%$local$		:i while 		:i if (%GLOBAL%$player$ = %GLOBAL%$check_player$)			:i return ${StructQBKey true}$		:i endif		:i $GetNextPlayer$$local$ = %GLOBAL%$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_find_buddy_submenu 0x5e3ad8f8 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part			]		}		StructQBKey all	}$		:i $i$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$i$	:i if NOT $band_lobby_player_in_use$$player$ = (~%GLOBAL%$submenu_data$->$player$)		:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$part$$out$ = $other_part$		:i $printf$%s("band_lobby_find_buddy_submenu - viewport=%v player=%p part=%a not in use")$v$ = %GLOBAL%$i$$p$ = (~%GLOBAL%$submenu_data$->$player$)$a$ = %GLOBAL%$other_part$		:i if (%GLOBAL%$other_part$ = %GLOBAL%$part$)			:i return $true$$submenu_index$ = %GLOBAL%$i$			:i continue		:i endif	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_find_lower_part_priority_buddy_submenu fb8aa5ab [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part			]		}		StructQBKey all	}$		:i $GetArraySize$(~$part_priority$)	:i $i$ = (%GLOBAL%$array_size$ - %i(1))	:i while 	:i if (%GLOBAL%$part$ = ~$part_priority$:a{%GLOBAL%$i$:a})		:i continue	:i endif	:i $j$ = %i(0)	:i while 	:i $FormatText$$checksumname$ = $submenu$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$j$	:i if NOT $band_lobby_player_in_use$$player$ = (~%GLOBAL%$submenu$->$player$)		:i $getplayerinfo$(~%GLOBAL%$submenu$->$player$)$part$$out$ = $this_part$		:i if ((~$part_priority$:a{%GLOBAL%$i$:a}) = %GLOBAL%$this_part$)			:i return $true$$submenu_index$ = %GLOBAL%$j$		:i endif	:i endif	:i %GLOBAL%$j$ = (%GLOBAL%$j$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i %GLOBAL%$i$ = (%GLOBAL%$i$ - %i(1))	:i loop_to %GLOBAL%$array_size$	:i return ${StructQBKey false}$	:i endfunction]Script band_lobby_handle_character_swap 0x5a9ce2af [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				old_part				new_part			]		}		StructQBKey all	}$		:i $printf$${		StructQBKey channel = band_lobby		StructQBStringQs 0x85af9b5d	}$		:i if $band_lobby_find_buddy_submenu$$part$ = %GLOBAL%$new_part$		:i $part$ = %GLOBAL%$old_part$	:i else 		:i $SetPlayerInfo$%GLOBAL%$player$$part$ = %GLOBAL%$new_part$		:i if $band_lobby_find_missing_part$$player$ = %GLOBAL%$player$			:i if $band_lobby_find_lower_part_priority_buddy_submenu$$part$ = %GLOBAL%$missing_part$				:i $part$ = %GLOBAL%$missing_part$			:i endif		:i endif	:i endif	:i $printstruct$ isNull 	:i if $GotParam$${StructQBKey submenu_index}$		:i $swap_submenu_index$ = %GLOBAL%$submenu_index$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%d")$d$ = %GLOBAL%$swap_submenu_index$		:i $getplayerinfo$%GLOBAL%$player$$in_game$		:i if (%GLOBAL%$in_game$ = %i(1))			:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$stored_character_index$$out$ = $swap_character_index$			:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$character_id$$out$ = $swap_character_id$			:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$character_savegame$$out$ = $swap_character_savegame$			:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$part$ = %GLOBAL%$old_part$			:i $SetPlayerInfo$%GLOBAL%$player$$part$ = %GLOBAL%$new_part$			:i $SetPlayerInfo$%GLOBAL%$player$$stored_character_index$ = %GLOBAL%$swap_character_index$			:i if $GotParam$${StructQBKey no_refresh}$				:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$			:i else 				:i $band_lobby_refresh_band_leader_characters$			:i endif			:i $SetPlayerInfo$%GLOBAL%$player$$character_id$ = %GLOBAL%$swap_character_id$			:i $SetPlayerInfo$%GLOBAL%$player$$character_savegame$ = %GLOBAL%$swap_character_savegame$		:i else 			:i $SetPlayerInfo$(~%GLOBAL%$submenu_data$->$player$)$part$ = %GLOBAL%$old_part$			:i $SetPlayerInfo$%GLOBAL%$player$$part$ = %GLOBAL%$new_part$			:i if $GotParam$${StructQBKey no_refresh}$				:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$			:i else 				:i $band_lobby_refresh_band_leader_characters$			:i endif		:i endif	:i endif	:i endfunction]Script band_lobby_switch_characters_for_ps3_at_join bfa27728 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				controller			]		}		StructQBKey all	}$		:i $printf$%s("band_lobby_switch_characters_for_ps3_at_join %a %b")$a$ = %GLOBAL%$player$$b$ = %GLOBAL%$controller$	:i if $IsGuitarController$$controller$ = %GLOBAL%$controller$		:i $part$ = $guitar$		:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$option$ = %s("guitar_bass_flip")		:i $guitar_bass_flip$ = %GLOBAL%$user_option$		:i if (%GLOBAL%$guitar_bass_flip$ = $Bass$)			:i $part$ = $Bass$		:i endif	:i elseif $IsDrumController$$controller$ = %GLOBAL%$controller$		:i $part$ = $drum$	:i else 		:i if (~$allow_controller_for_all_instruments$ = %i(1))			:i $part$ = $guitar$		:i else 			:i $part$ = $Vocals$		:i endif	:i endif	:i $getplayerinfo$%GLOBAL%$player$$part$$out$ = $old_part$	:i $SetPlayerInfo$%GLOBAL%$player$$is_local_client$ = %i(1)	:i $SetPlayerInfo$%GLOBAL%$player$$in_game$ = %i(1)	:i if (%GLOBAL%$old_part$ !== %GLOBAL%$part$)		:i $band_lobby_handle_character_swap$:s{			:i $player$ = %GLOBAL%$player$			:i $old_part$ = %GLOBAL%$old_part$			:i $new_part$ = %GLOBAL%$part$			:i $no_refresh$		:i :s}	:i endif	:i $SetPlayerInfo$%GLOBAL%$player$$stored_character_index$ = %i(0)	:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$	:i endfunction]Script band_lobby_rerandomize_rocker c0a218f5 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i if NOT $band_lobby_is_edit_rocker_allowed$		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i return 	:i endif	:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i if $GotParam$${StructQBKey random_avatar}$		:i $update_temporary_random_avatar$$slot$ = %GLOBAL%$submenu_index$$savegame$ = %GLOBAL%$savegame$	:i else 		:i $update_temporary_random_car$$slot$ = %GLOBAL%$submenu_index$$savegame$ = %GLOBAL%$savegame$	:i endif	:i $persistent_band_refresh_changed_characters$	:i endfunction]Script band_lobby_delete_saved_rocker 0x871d6f1e [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$chosen_character_id$	:i $character_id$ = %GLOBAL%$chosen_character_id$	:i if NOT $CharacterProfileExists$$savegame$ = %GLOBAL%$savegame$$name$ = %GLOBAL%$character_id$		:i $SoundEvent$${StructQBKey event = Audio_UI_Generic_Warning}$		:i return 	:i endif	:i if $band_lobby_desc_id$.$desc_resolvealias$${StructQBKey name = alias_pu_cont_parent}$		:i $band_lobby_create_popup_menu$:s{			:i $menu$ = $delete_rocker$			:i $player$ = %GLOBAL%$player$			:i $container$ = %GLOBAL%$resolved_id$			:i $submenu_index$ = %GLOBAL%$submenu_index$		:i :s}	:i endif	:i endfunction]Script band_lobby_delete_saved_rocker_confirm 0x25e6c180 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				submenu_index			]		}		StructQBKey all	}$		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$	:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i $getplayerinfo$(~%GLOBAL%$submenu_data$->$player$)$chosen_character_id$	:i $character_id$ = %GLOBAL%$chosen_character_id$	:i $set_chosen_character_id$$player$ = (~%GLOBAL%$submenu_data$->$player$)$id$ = $None$	:i $delete_custom_profile$$id$ = %GLOBAL%$character_id$$savegame$ = %GLOBAL%$savegame$	:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)	:i $array$ = (~%GLOBAL%$submenu_data$->$menu_indices$)	:i $SetArrayElement$${		StructQBKey arrayName = array		StructInt index = 0		StructInt newValue = 0	}$		:i $SetArrayElement$${		StructQBKey arrayName = array		StructInt index = 1		StructInt newValue = 0	}$		:i $SetArrayElement$${		StructQBKey arrayName = array		StructInt index = 2		StructInt newValue = 0	}$		:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$submenu_index$$element$ = $menu_indices$$value$ = %GLOBAL%$array$	:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))		:i $band_lobby_change_menu$:s{$action$ = $back$$menu$ = $main$$submenu_index$ = %GLOBAL%$submenu_index$$player$ = %GLOBAL%$player$$reset_characters$:s}	:i endif	:i $i$ = %i(0)	:i while 	:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $menu$	:i switch (%GLOBAL%$menu$)		:i case $select_rocker0$			:i endcase		case $select_rocker1$			:i endcase		case $select_rocker2$			:i endcase		case $select_rocker3$			:i endcase		case $accept_saved_rocker$			:i endcase		case $accept_gh_rocker$			:i endcase		case $accept_create_random_rocker$			:i endcase		case $accept_create_random_avatar$			:i endcase		case $accept_avatar$			:i $band_lobby_get_submenu_data$$submenu_index$ = %GLOBAL%$i$$param$ = $player$			:i if $playerinfoequals$%GLOBAL%$player$$is_local_client$ = %i(1)				:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$i$				:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(0))					:i $band_lobby_update_submenu_data$$submenu_index$ = %GLOBAL%$i$$element$ = $menu_indices$$value$ = :a{%i(0)%i(0)%i(0):a}					:i $band_lobby_change_menu$$action$ = $back$$menu$ = $main$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$i$$focus$ = %i(0)$no_forced$					:i $set_chosen_character_id$$player$ = %GLOBAL%$player$$id$ = $None$				:i endif			:i endif			:i endcase		default 			:i $printf$${StructString 0x00000000 = "all good"}$	:i end_switch	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to (~$g_num_lobby_local_submenus$)	:i $persistent_band_refresh_changed_characters$	:i $band_lobby_update_ticker$${StructQBKey msg_checksum = current_state}$	:i $band_lobby_destroy_popup_menu$	:i endfunction]Script band_lobby_is_edit_rocker_allowed 0x605c2486 [	:i if $savegame_async_is_busy$		:i return ${StructQBKey false}$	:i endif	:i if (~$is_in_cas$ = %i(1))		:i return ${StructQBKey false}$	:i endif	:i if $band_lobby_are_remote_players_in_game$		:i return ${StructQBKey false}$	:i endif	:i if (~$cas_current_savegame$ !== %i(4294967295))		:i return ${StructQBKey false}$	:i endif	:i if (~$g_career_search$ !== $null$)		:i return ${StructQBKey false}$	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_is_select_rocker_menu 0x65ca1583 [	${Unknown [0001260082fac56c6969696900000000]}$	:i switch (%GLOBAL%$menu$)		:i case $select_rocker0$			:i endcase		case $select_rocker1$			:i endcase		case $select_rocker2$			:i endcase		case $select_rocker3$			:i endcase		case $accept_saved_rocker$			:i endcase		case $accept_gh_rocker$			:i endcase		case $accept_create_random_rocker$			:i endcase		case $accept_create_random_avatar$			:i endcase		case $accept_avatar$			:i return ${StructQBKey true}$			:i endcase		default 			:i return ${StructQBKey false}$	:i end_switch	:i endfunction]Script band_lobby_is_not_managed_player 0x32386f1d [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				submenu_index			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$	:i if (~%GLOBAL%$submenu_data$->$is_managed$ = %i(1) AND ~%GLOBAL%$submenu_data$->$occupied$ = %i(1))		:i return ${StructQBKey false}$	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script band_lobby_get_character_id cc420145 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i $getplayerinfo$%GLOBAL%$player$$chosen_character_id$	:i if (%GLOBAL%$chosen_character_id$ = $None$)		:i $getplayerinfo$%GLOBAL%$player$$character_id$		:i $getplayerinfo$%GLOBAL%$player$$character_savegame$	:i else 		:i $getplayerinfo$%GLOBAL%$player$$chosen_character_savegame$		:i $character_id$ = %GLOBAL%$chosen_character_id$		:i $character_savegame$ = %GLOBAL%$chosen_character_savegame$	:i endif	:i return $character_id$ = %GLOBAL%$character_id$$character_savegame$ = %GLOBAL%$character_savegame$	:i endfunction]Script band_lobby_reset_all_chosen_characters d85df7f3 [	:i $GetMaxPlayers$	:i %GLOBAL%$i$ = %i(1)	:i while 	:i if $GotParam$${StructQBKey not_silhouettes}$		:i $getplayerinfo$%GLOBAL%$i$$chosen_character_id$		:i if (%GLOBAL%$chosen_character_id$ !== $silhouette$)			:i $set_chosen_character_id$$player$ = %GLOBAL%$i$$id$ = $None$		:i endif	:i else 		:i $set_chosen_character_id$$player$ = %GLOBAL%$i$$id$ = $None$	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$max_players$	:i endfunction]Script band_lobby_rocker_changed_player_part 0x856a4bda [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part				player			]		}		StructQBKey all	}$		:i if ((%GLOBAL%$part$ = $guitar$) OR (%GLOBAL%$part$ = $Bass$))		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $get_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$option$ = %s("guitar_bass_flip")		:i $guitar_bass_flip$ = %GLOBAL%$user_option$		:i if (%GLOBAL%$guitar_bass_flip$ !== %GLOBAL%$part$)			:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)			:i $save_progression_instrument_user_option$$controller$ = %GLOBAL%$controller$$option$ = %s("guitar_bass_flip")$new_value$ = %GLOBAL%$part$		:i endif		:i $get_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("difficulty")		:i if (%GLOBAL%$user_option$ = $None$)			:i if (%GLOBAL%$part$ = $guitar$)				:i $get_progression_instrument_user_option$$part$ = $Bass$$controller$ = %GLOBAL%$controller$$option$ = %s("difficulty")			:i else 				:i $get_progression_instrument_user_option$$part$ = $guitar$$controller$ = %GLOBAL%$controller$$option$ = %s("difficulty")			:i endif			:i if (%GLOBAL%$user_option$ !== $None$)				:i $SetPlayerInfo$%GLOBAL%$player$$difficulty$ = %GLOBAL%$user_option$$store$				:i $save_progression_instrument_user_option$$part$ = %GLOBAL%$part$$controller$ = %GLOBAL%$controller$$option$ = %s("difficulty")$new_value$ = %GLOBAL%$user_option$				:i $band_lobby_set_dirty_save_flag$$player$ = %GLOBAL%$player$$flag$ = %i(1)			:i endif		:i else 			:i $SetPlayerInfo$%GLOBAL%$player$$difficulty$ = %GLOBAL%$user_option$$store$		:i endif	:i endif	:i $getplayerinfo$%GLOBAL%$player$$part$$out$ = $old_part$	:i if (%GLOBAL%$player$ <= %i(4))		:i if (%GLOBAL%$old_part$ !== %GLOBAL%$part$)			:i $getplayerinfo$%GLOBAL%$player$$stored_character_index$			:i $get_savegame_from_player$$player$ = %GLOBAL%$player$			:i $get_saved_band_member$$index$ = %GLOBAL%$stored_character_index$$savegame$ = %GLOBAL%$savegame$			:i if $IsPS3$				:i $user_changed$ = %i(0)			:i endif			:i if ((%GLOBAL%$user_changed$ = %i(0)) AND (~$g_leader_player_num$ !== %GLOBAL%$player$))				:i $band_lobby_handle_character_swap$:s{					:i $player$ = %GLOBAL%$player$					:i $old_part$ = %GLOBAL%$old_part$					:i $new_part$ = %GLOBAL%$part$					:i $no_refresh$				:i :s}				:i if $IsXenon$					:i $getplayerinfo$%GLOBAL%$player$$stored_character_index$					:i $getplayerinfo$%GLOBAL%$player$$character_id$					:i $getplayerinfo$%GLOBAL%$player$$character_savegame$					:i $globaltag_fix_band_member0_at_join$:s{						:i $savegame$ = %GLOBAL%$savegame$						:i $existing_character_id$ = %GLOBAL%$character_id$						:i $existing_character_savegame$ = %GLOBAL%$character_savegame$						:i $existing_stored_character_index$ = %GLOBAL%$stored_character_index$					:i :s}					:i $SetPlayerInfo$%GLOBAL%$player$$stored_character_index$ = %i(0)$store$				:i endif			:i endif			:i $SetPlayerInfo$%GLOBAL%$player$$part$ = %GLOBAL%$part$$store$			:i if $band_lobby_find_buddy_submenu$$part$ = %GLOBAL%$part$				:i $FormatText$$checksumname$ = $buddy_submenu_data$%s("band_lobby_submenu_data_%i")$i$ = %GLOBAL%$submenu_index$				:i $SetPlayerInfo$(~%GLOBAL%$buddy_submenu_data$->$player$)$part$ = %GLOBAL%$old_part$$store$			:i endif			:i $band_lobby_refresh_band_leader_characters$${StructQBKey no_refresh}$		:i endif	:i endif	:i $SetPlayerInfo$%GLOBAL%$player$$part$ = %GLOBAL%$part$$store$	:i if (%GLOBAL%$player$ <= %i(4))		:i $band_lobby_get_player_submenu_index$$player_num$ = %GLOBAL%$player$		:i if (%GLOBAL%$submenu_index$ >= %i(0))			:i $update_camera_for_viewport$$player$ = %GLOBAL%$player$$submenu_index$ = %GLOBAL%$submenu_index$		:i endif	:i endif	:i endfunction]Script use_alternate_if_from_lobby a8b81f33 [	:i if $ui_event_exists_in_stack$${StructString name = "band_lobby"}$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]