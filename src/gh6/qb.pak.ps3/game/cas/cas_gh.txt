Unknown [1c00000000000000000019000000000000000000]Script get_section_index_from_desc_id fee65dd1 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part				target_desc_id			]		}		StructQBKey all	}$		:i if $GetCAPSectionsArray$$appearance$ = ~$cas_current_appearance$$part$ = %GLOBAL%$part$		:i $GetArraySize$${StructQBKey sections}$		:i if (%GLOBAL%$array_size$ > %i(0))			:i $i$ = %i(0)			:i while 			:i if ((%GLOBAL%$sections$:a{%GLOBAL%$i$:a}->$desc_id$) = %GLOBAL%$target_desc_id$)				:i return $true$$section_index$ = %GLOBAL%$i$			:i endif			:i $i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$array_size$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script find_bone_deform_info 0x096031ea [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				deform_bones				group_name			]		}		StructQBKey all	}$		:i $GetArraySize$%GLOBAL%$deform_bones$$globalarray$	:i $i$ = %i(0)	:i while 	:i if ((((~%GLOBAL%$deform_bones$):a{%GLOBAL%$i$:a})->$group_name$) = %GLOBAL%$group_name$)		:i return $true$$bone_deform_info$ = ((~%GLOBAL%$deform_bones$):a{%GLOBAL%$i$:a})	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i return ${StructQBKey false}$	:i endfunction]Script reset_bone_deform_info 0x5842e4b6 [	:i $SetCASAppearanceBones$$part$ = %GLOBAL%$part$$bones$ = :s{:s}	:i $UpdateCurrentCASModel$${StructQBKey buildscript = modelbuilder_update_reskins}$	:i endfunction]Script verify_genre_data e58f5608 [	:i if NOT $cd$		:i $ForEachIn$${			StructQBString master_editable_list			StructQBKey do = verify_genre_data_foreach		}$				:i $ForEachIn$${			StructQBString cas_random_female_vocals			StructQBKey do = verify_genre_data_foreach_part		}$				:i $ForEachIn$${			StructQBString cas_random_male_vocals			StructQBKey do = verify_genre_data_foreach_part		}$				:i $ForEachIn$${			StructQBString cas_random_guitars			StructQBKey do = verify_genre_data_foreach_part		}$				:i $ForEachIn$${			StructQBString cas_random_basses			StructQBKey do = verify_genre_data_foreach_part		}$				:i $ForEachIn$${			StructQBString cas_random_drums			StructQBKey do = verify_genre_data_foreach_part		}$			:i endif	:i endfunction]Script verify_genre_data_foreach e6aaf63d [	:i if $globalexists$$name$ = %GLOBAL%$part$$type$ = $array$		:i $ForEachIn$(~%GLOBAL%$part$)$do$ = $verify_genre_data_foreach_part$	:i endif	:i endfunction]Script verify_genre_data_foreach_part 0x8bd1a9ac [	:i if $GotParam$${StructQBKey genre}$		:i if NOT $IsArray$(%GLOBAL%$genre$)			:i $scriptassert$%s("CAS Piece %d's genre parameter must be an array, using [ and ]")$d$ = %GLOBAL%$desc_id$		:i else 			:i $ForEachIn$%GLOBAL%$genre$$do$ = $verify_genre_data_foreach_part_genre$$params$ = :s{$piece$ = %GLOBAL%$desc_id$:s}		:i endif	:i endif	:i endfunction]Script verify_genre_data_foreach_part_genre 0x75affaa3 [	:i if (%GLOBAL%$checksum$ = $any$)		:i $scriptassert$${StructString 0x00000000 = "Cannot use the :any: genre on CAS pieces"}$	:i endif	:i $verify_genre$$genre$ = %GLOBAL%$checksum$$piece$ = %GLOBAL%$piece$	:i endfunction]Script verify_genre 0x8d0cf900 [	:i $i$ = %i(0)	:i $GetArraySize$(~$cas_genre_list$)	:i while 	:i if ((((~$cas_genre_list$):a{%GLOBAL%$i$:a})->$desc_id$) = %GLOBAL%$genre$)		:i $found$ = %i(1)		:i continue	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i if NOT $GotParam$${StructQBKey found}$		:i if NOT $GotParam$${StructQBKey piece}$			:i $piece$ = $None$		:i endif		:i $scriptassert$%s("%p - Genre %g not found. Should match something in the cas_common_arrays.q list")$p$ = %GLOBAL%$piece$$g$ = %GLOBAL%$genre$$DoNotResolve$	:i endif	:i endfunction]Script cas_artist_flush e57bb801 [	:i if NOT $cd$		:i if $CasArtist$			:i if (~$is_in_cas$ = %i(1))				:i $stars$				:i $printf$${StructString 0x00000000 = "******* cas_artist_flush ********"}$				:i $stars$				:i if $ScriptIsRunning$${StructQBKey cas_artist_flush_worker}$					:i return 				:i endif				:i $spawnscriptnow$${StructQBKey cas_artist_flush_worker}$			:i endif		:i else 			:i $stars$			:i $printf$${StructString 0x00000000 = "cas_artist=1 must be set in your personal.q file"}$			:i $stars$		:i endif	:i endif	:i endfunction]Script cas_artist_flush_worker 0x9d292f2d [	:i if NOT $ChecksumEquals$${			StructQBString a = cas_reskin_preview			StructQBKey b = None		}$				:i $cas_bonemenu_apply_changes$${StructInt kill_objects = 1}$	:i endif	:i $KillAllCompositeTextures$	:i $flush_cas_caches$	:i $CasCancelLoading$	:i $CasBlockForComposite$	:i $CasBlockForLoading$	:i $cas_queue_wait$	:i $GetCurrentCASObject$	:i %GLOBAL%$cas_object$.$Accoutrement_RemoveAllData$	:i %GLOBAL%$cas_object$.$obj_cleargeoms$	:i $FinishRendering$	:i %GLOBAL%$cas_object$.$modelbuilder_unload$	:i $CASTemporariesFlush$	:i $WaitUnloadGroup$${		StructQBKey cas		StructInt async = 0	}$		:i $cas_artist_reload_globalpaks$	:i $RebuildCurrentCASModel$${StructInt force_update = 1}$	:i endfunction]Script cas_artist_reload_globalpaks bf7aa23f [	:i $printf$${StructString 0x00000000 = "cas_artist_reload_globalpaks"}$	:i endfunction]Script cas_edit_character_profile 0x1f18b6a3 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				character_id				savegame			]		}		StructQBKey all	}$		:i $change$${StructQBKey cas_current_instrument = guitar_and_vocals}$	:i $CharacterProfileGetStruct$$name$ = %GLOBAL%$character_id$$savegame$ = %GLOBAL%$savegame$	:i $SetCASAppearance$$appearance$ = (%GLOBAL%$profile_struct$->$appearance$)	:i $change$$cas_current_profile$ = %GLOBAL%$character_id$	:i if (%GLOBAL%$savegame$ = %i(4294967295))		:i $scriptassert$%s("savegame %s is invalid")$s$ = %GLOBAL%$savegame$	:i endif	:i $change$$cas_current_savegame$ = %GLOBAL%$savegame$	:i endfunction]Script cas_get_player 0x1e0e9ff7 [	:i return $player$ = (~$cas_current_player$)	:i endfunction]Script cas_load_and_setup_resources 0x0ec3894e [	${StructInt async = 1}$	:i $printscriptinfo$${		StructQBKey channel = cas_debug		StructString 0x00000000 = "cas_load_and_setup_resources"	}$		:i if (~$is_in_cas$ = %i(1))		:i $scriptassert$${StructString 0x00000000 = "Already have resources loaded"}$	:i endif	:i $change$${StructInt is_in_cas = 1}$	:i if (($GotParam$$album_art$) OR ($GotParam$$band_logo$))		:i $PushUnsafeForShutdown$${StructQBKey context = cas_load_and_setup_resources}$		:i $WaitUnloadGroup$${			StructQBKey cas			StructInt async = 0		}$				:i $FinishRendering$		:i if NOT $GotParam$${StructQBKey album_art}$			:i $PlayIGCCam$${				StructQBKey id = cas_view_cam_id				StructQBKey name = cas_view_cam				StructQBKey viewport = bg_viewport				StructQBKey LockTo = world				StructFloatX3 Pos				{					Floats [2.02892, 0.879576, -0.0596310]				}				StructFloatX3 Quat				{					Floats [-0.000911000, 0.999070, 0.0273450]				}				StructFloat FOV = 72.00				StructInt Play_hold = 1				StructQBKey interrupt_current			}$					:i else 			:i $PlayIGCCam$${				StructQBKey id = cas_view_cam_id				StructQBKey name = cas_view_cam				StructQBKey viewport = bg_viewport				StructQBKey LockTo = world				StructFloatX3 Pos				{					Floats [-0.536864, 2.10435, 15.1486]				}				StructFloatX3 Quat				{					Floats [0.00529400, 0.0276800, -0.000218000]				}				StructFloat FOV = 72.00				StructInt Play_hold = 1				StructQBKey interrupt_current			}$					:i endif	:i else 		:i $destroy_song_and_musicstudio_heaps$${StructQBKey do_unloads}$		:i $LoadPakAsync$$pak_name$ = %s("pak/cas_precache_lists.pak")$heap$ = $heap_cas_cache$$async$ = %GLOBAL%$async$		:i $memory_get_heap_sizes$		:i $create_cas_caches$	:i endif	:i $AnimKickoffSkinningEnable$${StructInt enabled = 0}$	:i if (($GotParam$$album_art$) OR ($GotParam$$band_logo$))		:i $PopUnsafeForShutdown$${StructQBKey context = cas_load_and_setup_resources}$	:i endif	:i endfunction]Script cas_free_resources 0x8d6dacb3 [	:i $printscriptinfo$${		StructQBKey channel = cas_debug		StructString 0x00000000 = "cas_free_resources"	}$		:i if (~$is_in_cas$ = %i(1))		:i $AnimKickoffSkinningEnable$${StructInt enabled = 1}$		:i $PushUnsafeForShutdown$${StructQBKey context = cas_free_resources}$		:i $UnloadPak$${StructString 0x00000000 = "pak/cas_precache_lists.pak"}$		:i $KillSpawnedScript$${StructQBKey name = UpdateCurrentCASModelSpawned}$		:i $FinishRendering$		:i $CasBlockForLoading$		:i $KillAllCompositeTextures$		:i $WaitUnloadGroup$${			StructQBKey cas			StructInt async = 0		}$				:i $ArchiveCancelLoading$${StructQBKey cas_building_cache}$		:i $ArchiveWaitLoading$${			StructQBKey cas_building_cache			StructInt async = 0		}$				:i $free_cas_caches$		:i $create_song_and_musicstudio_heaps$		:i if NOT $GotParam$${StructQBKey no_fix_camera}$		:i endif		:i $PopUnsafeForShutdown$${StructQBKey context = cas_free_resources}$		:i $change$${StructInt cas_free_cam_active = 0}$		:i $change$${StructInt is_in_cas = 0}$	:i endif	:i endfunction]Script RefreshCASProfile cde39c27 [	:i if $cd$		:i return 	:i endif	:i if NOT $CasArtist$		:i $stars$		:i $printf$${StructString 0x00000000 = "cas_artist=1 must be set in your personal.q file"}$		:i $stars$		:i return 	:i endif	:i if (~$is_in_cas$ = %i(0))		:i $printf$${StructString 0x00000000 = "Only works in CAS"}$		:i return 	:i endif	:i if NOT $GetCurrentCASObject$		:i $printf$${StructString 0x00000000 = "Only works in CAS"}$		:i return 	:i endif	:i $cas_queue_new_character_profile$$id$ = (~$cas_current_profile$)$player$ = (~$cas_current_player$)$savegame$ = (~$cas_current_savegame$)$Instrument$ = (~$cas_current_instrument$)	:i $CharacterProfileGetStruct$$name$ = (~$cas_current_profile$)$savegame$ = (~$cas_current_savegame$)	:i $SetCASAppearance$$appearance$ = (%GLOBAL%$profile_struct$->$appearance$)	:i endfunction]Script CreateAssetStorageFromBudgetBlock 0x89f7b491 [	:i if NOT $GotParam$${StructQBKey slopheap}$		:i $slopheap$ = %GLOBAL%$name$	:i endif	:i if NOT $GotParam$${StructQBKey assetcontext}$		:i $assetcontext$ = %GLOBAL%$name$	:i endif	:i $CASSetupAssetStorage$$name$ = %GLOBAL%$name$$params$ = :s{		:i $allocator$ = $budget$		:i $blockname$ = %GLOBAL%$name$		:i $assetcontext$ = %GLOBAL%$assetcontext$		:i $slopheap$ = %GLOBAL%$slopheap$	:i :s}	:i endfunction]Script is_avatar_appearance 0x77631e5c [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				appearance			]		}		StructQBKey all	}$		:i if $StructureContains$$structure$ = %GLOBAL%$appearance$$CAS_Full_Body$		:i if $ChecksumEquals$$a$ = ((%GLOBAL%$appearance$->$CAS_Full_Body$)->$desc_id$)$b$ = $Avatar$			:i return ${StructQBKey true}$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script is_avatar_character 0x19482997 [	${Unknown [0001260040c698af6969696900000018000124001b0509c56969696900000000]}$	:i if (%GLOBAL%$id$ = $Avatar$)		:i return ${StructQBKey true}$	:i endif	:i if $CharacterProfileGetStruct$$name$ = %GLOBAL%$id$$savegame$ = %GLOBAL%$savegame$		:i if $is_avatar_appearance$$appearance$ = (%GLOBAL%$profile_struct$->$appearance$)			:i return ${StructQBKey true}$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script generate_random_avatar 0x9e912774 [	:i if $get_random_avatar_appearance$$is_female$ = %GLOBAL%$is_female$		:i $change$$cas_current_appearance$ = %GLOBAL%$appearance$		:i $generate_random_genre$		:i $cas_set_random_avatar_instrument$$is_female$ = %GLOBAL%$is_female$$genre$ = %GLOBAL%$genre$	:i endif	:i endfunction]Script generate_random_name dc330b79 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				is_female			]		}	}$		:i if (%GLOBAL%$is_female$ = %i(1))		:i $GetRandomArrayElement$(~$gh_random_car_female_names$)	:i else 		:i $GetRandomArrayElement$(~$gh_random_car_male_names$)	:i endif	:i return $random_name$ = %GLOBAL%$element$	:i endfunction]Script generate_random_genre 0x3ea3a3d4 [	:i $takeaway$ = %i(2)	:i if $GotParam$${StructQBKey allow_mixed}$		:i $takeaway$ = %i(1)	:i endif	:i $GetArraySize$${StructQBString cas_genre_list}$	:i $getrandomvalue$$a$ = %i(0)$b$ = (%GLOBAL%$array_size$ - %GLOBAL%$takeaway$)$name$ = $genre_index$$integer$	:i return $genre$ = (~$cas_genre_list$:a{%GLOBAL%$genre_index$:a}->$desc_id$)	:i endfunction]Script cas_change_current_character_gender 0x24e6a165 [	${StructQBKey Instrument = None}$	:i $genre$ = ((~$cas_current_appearance$)->$genre$)	:i $generate_random_name$$is_female$ = %GLOBAL%$is_female$	:i $cas_set_random_appearance$$is_female$ = %GLOBAL%$is_female$$genre$ = %GLOBAL%$genre$$savegame$ = (~$cas_current_savegame$)$new_car_character$$random_instruments$	:i $change$$cas_current_fullname$ = %GLOBAL%$random_name$	:i if ($is_female$ = %i(0))		:i $modify_custom_profile_blurb$$id$ = (~$cas_current_profile$)$savegame$ = (~$cas_current_savegame$)$blurb$ = ((~$default_custom_musician_profile_male$)->$blurb$)	:i else 		:i $modify_custom_profile_blurb$$id$ = (~$cas_current_profile$)$savegame$ = (~$cas_current_savegame$)$blurb$ = ((~$default_custom_musician_profile_female$)->$blurb$)	:i endif	:i if (~$leaving_genre_select$ = %i(1))		:i return 	:i endif	:i $cas_queue_add_request$$appearance$ = (~$cas_current_appearance$)$player$ = (~$cas_current_player$)$Instrument$ = %GLOBAL%$Instrument$	:i endfunction]Script get_random_avatar_appearance 0x6c169cff [	:i if $GetAvatarCASMetadata$$randomize$$is_female$ = %GLOBAL%$is_female$		:i $fullbody_part$ = (~$avatar_profile$->$appearance$->$CAS_Full_Body$)		:i $fullbody_part$ = :s{%GLOBAL%$fullbody_part$$avatar_meta_data$ = %GLOBAL%$metadata$:s}		:i $UpdateStructElement$$struct$ = (~$avatar_profile$->$appearance$)$element$ = $CAS_Full_Body$$value$ = %GLOBAL%$fullbody_part$		:i return $true$$appearance$ = %GLOBAL%$newstruct$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script is_part_editable 0x6ba04b06 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part				desc_id			]		}		StructQBKey all	}$		:i $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$	:i if $part_has_sections$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i return ${StructQBKey true}$	:i elseif $part_has_materials$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script part_has_sections 0x45db95f5 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part				desc_id			]		}		StructQBKey all	}$		:i $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$	:i if $GotParam$${StructQBKey cap_textures}$		:i return ${StructQBKey true}$	:i endif	:i if $GotParam$${StructQBKey sections}$		:i $scriptassert$${StructString 0x00000000 = "sections is deprecated"}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script part_has_materials 0x4e7c008c [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part				desc_id			]		}		StructQBKey all	}$		:i if NOT $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i return ${StructQBKey false}$	:i endif	:i if $GotParam$${StructQBKey materials}$		:i $GetArraySize$%GLOBAL%$materials$		:i if (%GLOBAL%$array_size$ = %i(0))			:i $scriptassert$%s("material array on %s is empty, remove it")$s$ = %GLOBAL%$desc_id$		:i endif		:i if (%GLOBAL%$array_size$ > %i(0))			:i return ${StructQBKey true}$		:i endif	:i else 		:i if $GotParam$${StructQBKey material_groups}$			:i $GetArraySize$%GLOBAL%$material_groups$			:i if (%GLOBAL%$array_size$ = %i(0))				:i $scriptassert$%s("material array on %s is empty, remove it")$s$ = %GLOBAL%$desc_id$			:i endif			:i if (%GLOBAL%$array_size$ > %i(0))				:i return ${StructQBKey true}$			:i endif		:i else 			:i if $GotParam$${StructQBKey modify_all_materials}$				:i return ${StructQBKey true}$			:i endif		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script part_has_swatch_list a8b35860 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part				desc_id			]		}		StructQBKey all	}$		:i if NOT $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i return ${StructQBKey false}$	:i endif	:i if $GotParam$${StructQBKey swatch_list}$		:i return $true$$parent_swatch$ = %GLOBAL%$desc_id$	:i endif	:i if $GotParam$${StructQBKey swatch_for}$		:i return $true$$parent_swatch$ = %GLOBAL%$swatch_for$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script get_cas_sponsor_texture_and_title 0x24d8e068 [	:i if NOT $GotParam$${StructQBKey sponsor_id}$		:i if NOT $GetCASAppearancePartDescID$$part$ = %GLOBAL%$part$			:i return ${StructQBKey false}$		:i endif		:i if NOT $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$			:i return ${StructQBKey false}$		:i endif		:i if NOT $GotParam$${StructQBKey sponsor_id}$			:i return ${StructQBKey false}$		:i endif	:i endif	:i $GetArraySize$(~$CAS_Sponsors$)	:i $j$ = %i(0)	:i while 	:i if (((~$CAS_Sponsors$:a{%GLOBAL%$j$:a})->$id$) = %GLOBAL%$sponsor_id$)		:i $Title$ = ((~$CAS_Sponsors$:a{%GLOBAL%$j$:a})->$display_name$)		:i $texture$ = ((~$CAS_Sponsors$:a{%GLOBAL%$j$:a})->$texture$)		:i return $true$$Title$ = %GLOBAL%$Title$$texture$ = %GLOBAL%$texture$	:i endif	:i %GLOBAL%$j$ = (%GLOBAL%$j$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i return ${StructQBKey false}$	:i endfunction]