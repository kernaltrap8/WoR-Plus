Unknown [1c00000000000000000027580000000000000000]Script GetCurrentCASObject 0x9953bf32 [	:i if $cas_player_has_character_object$$player$ = (~$cas_current_player$)		:i return $true$$cas_object$ = %GLOBAL%$character_object$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script GetCASAppearance 0x3386368a [	:i return $true$$appearance$ = (~$cas_current_appearance$)	:i endfunction]Script GetCASAppearancePartInstance a5a32e49 [	${Unknown [00012600b6f08f396969696900000000]}$	:i $ResolveBodySpecificPartInAppearance$$part$ = %GLOBAL%$part$	:i if $StructureContains$$structure$ = (~$cas_current_appearance$)%GLOBAL%$part$		:i $app_struct$ = ((~$cas_current_appearance$)->%GLOBAL%$part$)		:i if $StructureContains$$structure$ = %GLOBAL%$app_struct$$desc_id$			:i return $true$$part_instance$ = (%GLOBAL%$app_struct$)		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script SetCASAppearancePartInstance 0x567ab4f3 [	${Unknown [00012600b6f08f39696969690000001800012b002a9dcb5e6969696900000000]}$	:i $ResolveBodySpecificPartInAppearance$$part$ = %GLOBAL%$part$	:i $AddParam$$name$ = %GLOBAL%$part$$structure_name$ = $part_struct$$value$ = %GLOBAL%$part_instance$	:i $change$$cas_current_appearance$ = :s{		:i (~$cas_current_appearance$)		:i %GLOBAL%$part_struct$	:i :s}	:i endfunction]Script EditCASAppearance 0x964f42cd [	${Unknown [00012600b990d003696969690000001800012b0046a2869c6969696900000000]}$	:i $modelbuilder_check_lock$	:i $part$ = (%GLOBAL%$targetParams$->$part$)	:i $ResolveBodySpecificPartInAppearance$$part$ = %GLOBAL%$part$	:i switch (%GLOBAL%$target$)		:i case $setpart$			:i $newstruct$ = :s{$desc_id$ = (%GLOBAL%$targetParams$->$desc_id$):s}			:i $add_default_cap_array_to_newstruct$$part$ = %GLOBAL%$part$$newstruct$ = %GLOBAL%$newstruct$			:i $add_default_chosen_materials_to_newstruct$$part$ = %GLOBAL%$part$$newstruct$ = %GLOBAL%$newstruct$			:i $UpdateStructElement$$struct$ = ~$cas_current_appearance$$element$ = %GLOBAL%$part$$value$ = %GLOBAL%$newstruct$			:i $change$$cas_current_appearance$ = %GLOBAL%$newstruct$			:i endcase		case $clearpart$			:i $newstruct$ = (~$cas_current_appearance$)			:i $RemoveComponent$$structure_name$ = $newstruct$$name$ = %GLOBAL%$part$			:i $change$$cas_current_appearance$ = %GLOBAL%$newstruct$			:i endcase		case $hidegeom$			:i $hide_geom$ = (%GLOBAL%$targetParams$->$hide_geom$)			:i if $StructureContains$$structure$ = (~$cas_current_appearance$)%GLOBAL%$part$				:i $newstruct$ = :s{					:i ((~$cas_current_appearance$)->%GLOBAL%$part$)					:i $hide_geom$ = %GLOBAL%$hide_geom$				:i :s}				:i $UpdateStructElement$$struct$ = ~$cas_current_appearance$$element$ = %GLOBAL%$part$$value$ = %GLOBAL%$newstruct$				:i $change$$cas_current_appearance$ = %GLOBAL%$newstruct$			:i endif			:i endcase		default 			:i $scriptassert$%s("EditCASAppearance - %s not supported")$s$ = %GLOBAL%$target$	:i end_switch	:i endfunction]Script add_default_chosen_materials_to_newstruct 0x446d5d87 [	${Unknown [00012600b6f08f39696969690000001800012b0037c387906969696900000000]}$	:i if NOT $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = (%GLOBAL%$newstruct$->$desc_id$)		:i $scriptassert$%s("%s %t not found")$s$ = %GLOBAL%$part$$t$ = (%GLOBAL%$newstruct$->$desc_id$)	:i endif	:i if $GotParam$${StructQBKey chosen_materials}$		:i return $newstruct$ = :s{			:i %GLOBAL%$newstruct$			:i $chosen_materials$ = %GLOBAL%$chosen_materials$		:i :s}	:i endif	:i endfunction]Script printcurrentappearance 0x2e2743da [	:i $ReorderStructForCAS$$struct$ = (~$cas_current_appearance$)	:i $printcompactstruct$%GLOBAL%$out$	:i endfunction]Script GetCASMaterialValue 0x275063eb [	${Unknown [00012600b6f08f3969696969000000180001260083418a6a6969696900000000]}$	:i if $StructureContains$$structure$ = (~$cas_current_appearance$)%GLOBAL%$part$		:i $str$ = ((~$cas_current_appearance$)->%GLOBAL%$part$)		:i if $StructureContains$$structure$ = %GLOBAL%$str$$chosen_materials$			:i if $StructureContains$$structure$ = (%GLOBAL%$str$->$chosen_materials$)%GLOBAL%$material$				:i return $true$$value$ = ((%GLOBAL%$str$->$chosen_materials$)->%GLOBAL%$material$)			:i endif		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script SetCASAppearanceMaterial 0x4a515aa1 [	${Unknown [00012600b6f08f3969696969000000180001260083418a6a6969696900000000]}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				value			]		}		StructQBKey all	}$		:i $modelbuilder_check_lock$	:i if $StructureContains$$structure$ = (~$cas_current_appearance$)%GLOBAL%$part$		:i $str$ = ((~$cas_current_appearance$)->%GLOBAL%$part$)		:i if $StructureContains$$structure$ = %GLOBAL%$str$$chosen_materials$			:i $chosen_materials$ = (%GLOBAL%$str$->$chosen_materials$)		:i else 			:i $chosen_materials$ = :s{:s}		:i endif		:i $UpdateStructElement$$struct$ = %GLOBAL%$chosen_materials$$element$ = %GLOBAL%$material$$value$ = %GLOBAL%$value$		:i $chosen_materials$ = :s{			:i %GLOBAL%$chosen_materials$%GLOBAL%$newstruct$		:i :s}		:i $AppendStruct$$struct$ = $cas_current_appearance$$field$ = %GLOBAL%$part$$params$ = :s{%GLOBAL%$str$$chosen_materials$ = %GLOBAL%$chosen_materials$:s}$globalstruct$	:i endif	:i endfunction]Script GetCASPartMaterials d5cb6ddc [	${Unknown [00012600b6f08f396969696900000000]}$	:i if NOT $GetCASAppearancePartDescID$$part$ = %GLOBAL%$part$		:i return ${StructQBKey false}$	:i endif	:i if NOT $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i return ${StructQBKey false}$	:i endif	:i if $GotParam$${StructQBKey materials}$		:i $GetArraySize$%GLOBAL%$materials$		:i if (%GLOBAL%$array_size$ > %i(0))			:i $array$ = :a{:a}			:i $i$ = %i(0)			:i while 			:i $Title$ = ^[1a32079f]^			:i if (%GLOBAL%$array_size$ = %i(1))				:i $name$ = ^[aa2546c1]^			:i else 				:i $FormatText$$textname$ = $name$^[dfd513db]^$d$ = (%GLOBAL%$i$ + %i(1))			:i endif			:i if $GotParam$${StructQBKey material_names}$				:i $name$ = (%GLOBAL%$material_names$:a{%GLOBAL%$i$:a})				:i $Title$ = (%GLOBAL%$material_names$:a{%GLOBAL%$i$:a})			:i endif			:i $FormatText$$checksumname$ = $desc_id$%s("material%d")$d$ = (%GLOBAL%$i$ + %i(1))			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = :s{$desc_id$ = %GLOBAL%$desc_id$$name$ = %GLOBAL%$name$$Title$ = %GLOBAL%$Title$:s}			:i $i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$array_size$			:i return $true$$part_materials$ = %GLOBAL%$array$		:i endif	:i else 		:i if $GotParam$${StructQBKey material_groups}$			:i $GetArraySize$%GLOBAL%$material_groups$			:i if (%GLOBAL%$array_size$ > %i(0))				:i $array$ = :a{:a}				:i $i$ = %i(0)				:i while 				:i $Title$ = ^[1a32079f]^				:i if (%GLOBAL%$array_size$ = %i(1))					:i $name$ = ^[aa2546c1]^				:i else 					:i $FormatText$$textname$ = $name$^[dfd513db]^$d$ = (%GLOBAL%$i$ + %i(1))				:i endif				:i if $StructureContains$$structure$ = (%GLOBAL%$material_groups$:a{%GLOBAL%$i$:a})$name$					:i $name$ = ((%GLOBAL%$material_groups$:a{%GLOBAL%$i$:a})->$name$)					:i $Title$ = ((%GLOBAL%$material_groups$:a{%GLOBAL%$i$:a})->$name$)				:i endif				:i if $StructureContains$$structure$ = (%GLOBAL%$material_groups$:a{%GLOBAL%$i$:a})$desc_id$					:i $desc_id$ = ((%GLOBAL%$material_groups$:a{%GLOBAL%$i$:a})->$desc_id$)				:i else 					:i $FormatText$$checksumname$ = $desc_id$%s("material%d")$d$ = (%GLOBAL%$i$ + %i(1))				:i endif				:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = :s{$desc_id$ = %GLOBAL%$desc_id$$name$ = %GLOBAL%$name$$Title$ = %GLOBAL%$Title$:s}				:i $i$ = (%GLOBAL%$i$ + %i(1))				:i loop_to %GLOBAL%$array_size$				:i return $true$$part_materials$ = %GLOBAL%$array$			:i endif		:i else 			:i if $GotParam$${StructQBKey modify_all_materials}$				:i $name$ = ^[aa2546c1]^				:i $Title$ = ^[1a32079f]^				:i if $GotParam$${StructQBKey material_names}$					:i $name$ = (%GLOBAL%$material_names$:a{%i(0):a})					:i $Title$ = (%GLOBAL%$material_names$:a{%i(0):a})				:i endif				:i return $true$$part_materials$ = :a{:s{$desc_id$ = $material1$$name$ = %GLOBAL%$name$$Title$ = %GLOBAL%$Title$:s}:a}			:i endif		:i endif		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script GetCASPartSwatches 0x7d5b65a1 [	${Unknown [00012600b6f08f396969696900000000]}$	:i if NOT $GetCASAppearancePartDescID$$part$ = %GLOBAL%$part$		:i return ${StructQBKey false}$	:i endif	:i if NOT $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i return ${StructQBKey false}$	:i endif	:i $current_swatch_desc_id$ = %GLOBAL%$desc_id$	:i if $GotParam$${StructQBKey swatch_for}$		:i if NOT $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$swatch_for$			:i return ${StructQBKey false}$		:i endif	:i endif	:i if $GotParam$${StructQBKey swatch_list}$		:i $GetArraySize$%GLOBAL%$swatch_list$		:i if (%GLOBAL%$array_size$ > %i(0))			:i $array$ = :a{:a}			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = :s{$desc_id$ = %GLOBAL%$desc_id$:s}			:i $i$ = %i(0)			:i while 			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = :s{$desc_id$ = (%GLOBAL%$swatch_list$:a{%GLOBAL%$i$:a}):s}			:i $i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$array_size$			:i return $true$$part_swatches$ = %GLOBAL%$array$$frontend_desc$ = %GLOBAL%$frontend_desc$$current_swatch_desc_id$ = %GLOBAL%$current_swatch_desc_id$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script SetCASAppearanceBones ed47682a [	${Unknown [00012600b6f08f39696969690000001800012b002aa592d46969696900000000]}$	:i $modelbuilder_check_lock$	:i if $StructureContains$$structure$ = (~$cas_current_appearance$)%GLOBAL%$part$		:i $str$ = ((~$cas_current_appearance$)->%GLOBAL%$part$)		:i $AppendStruct$$struct$ = $cas_current_appearance$$field$ = %GLOBAL%$part$$params$ = :s{%GLOBAL%$str$$bones$ = %GLOBAL%$bones$:s}$globalstruct$	:i endif	:i endfunction]Script SetCASAppearanceCAP fba68910 [	${Unknown [00012600b6f08f396969696900000000]}$	:i $modelbuilder_check_lock$	:i if $StructureContains$$structure$ = (~$cas_current_appearance$)%GLOBAL%$part$		:i $str$ = ((~$cas_current_appearance$)->%GLOBAL%$part$)		:i if $GotParam$${StructQBKey cap}$			:i $AppendStruct$$struct$ = $cas_current_appearance$$field$ = %GLOBAL%$part$$params$ = :s{%GLOBAL%$str$$cap$ = %GLOBAL%$cap$:s}$globalstruct$		:i else 			:i $RemoveComponent$${				StructQBKey name = cap				StructQBKey structure_name = str			}$						:i $AppendStruct$$struct$ = $cas_current_appearance$$field$ = %GLOBAL%$part$$params$ = :s{%GLOBAL%$str$:s}$globalstruct$		:i endif	:i endif	:i endfunction]Script GetCASAppearanceCAP 0x164aceaa [	${Unknown [00012600b6f08f396969696900000000]}$	:i if NOT $StructureContains$$structure$ = (~$cas_current_appearance$)%GLOBAL%$part$		:i $scriptassert$^[1136de11]^$p$ = %GLOBAL%$part$	:i endif	:i %GLOBAL%$part_struct$ = (~$cas_current_appearance$->%GLOBAL%$part$)	:i if $StructureContains$$structure$ = %GLOBAL%$part_struct$$cap$		:i return $true$$cap$ = (%GLOBAL%$part_struct$->$cap$)	:i else 		:i return ${			StructQBKey false			StructArray cap			{				Floats [0.00000, 0.00000]			}		}$			:i endif	:i endfunction]Script SetCASAppearanceCAPMakeup be0b5cdf [	${Unknown [000126007f74fec7696969690000001800012c008c3f520a6969696900000000]}$	:i $GetCASAppearanceCAP$${StructQBKey part = cas_body}$	:i $GetArraySize$%GLOBAL%$cap$	:i if (%GLOBAL%$array_size$ = %i(0))		:i $SetCASAppearanceCAP$$part$ = $cas_body$$cap$ = :a{:s{$base_tex$ = %GLOBAL%$base_tex$$post_layer$ = %GLOBAL%$post_layer$$layers$ = %GLOBAL%$layers$:s}:a}		:i return 	:i endif	:i %GLOBAL%$i$ = %i(0)	:i while 	:i %GLOBAL%$cap_entry$ = (%GLOBAL%$cap$:a{%GLOBAL%$i$:a})	:i if $StructureContains$$structure$ = %GLOBAL%$cap_entry$$base_tex$		:i if ((%GLOBAL%$cap_entry$->$base_tex$) = %GLOBAL%$base_tex$)			:i $SetArrayElement$$arrayName$ = $cap$$index$ = %GLOBAL%$i$$newValue$ = :s{$base_tex$ = %GLOBAL%$base_tex$$post_layer$ = %GLOBAL%$post_layer$$layers$ = %GLOBAL%$layers$:s}			:i $SetCASAppearanceCAP$$part$ = $cas_body$$cap$ = %GLOBAL%$cap$			:i return 		:i endif	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $AddArrayElement$$array$ = %GLOBAL%$cap$$element$ = :s{$base_tex$ = %GLOBAL%$base_tex$$post_layer$ = %GLOBAL%$post_layer$$layers$ = %GLOBAL%$layers$:s}	:i $SetCASAppearanceCAP$$part$ = $cas_body$$cap$ = %GLOBAL%$array$	:i endfunction]Script cas_set_cap_layer_from_preset b2510449 [	${Unknown [00012600b6f08f396969696900000018000126007f74fec76969696900000000]}$	:i $GetCASAppearanceCAP$${StructQBKey part = cas_body}$	:i $GetArraySize$%GLOBAL%$cap$	:i if (%GLOBAL%$array_size$ > %i(0))		:i %GLOBAL%$i$ = %i(0)		:i while 		:i if ((%GLOBAL%$cap$:a{%GLOBAL%$i$:a})->$base_tex$ = %GLOBAL%$base_tex$)			:i if $GotParam$${StructQBKey new_layers}$				:i $printf$%s("cas_set_cap_layer_from_preset %t - Setting existing")$t$ = %GLOBAL%$base_tex$				:i $SetArrayElement$$arrayName$ = $cap$$index$ = %GLOBAL%$i$$newValue$ = :s{					:i (%GLOBAL%$cap$:a{%GLOBAL%$i$:a})					:i $layers$ = %GLOBAL%$new_layers$				:i :s}				:i $SetCASAppearanceCAP$$part$ = %GLOBAL%$part$$cap$ = %GLOBAL%$cap$			:i else 				:i $printf$%s("cas_set_cap_layer_from_preset %t - Removing existing")$t$ = %GLOBAL%$base_tex$				:i $remove_layers_struct_from_cap$$part$ = %GLOBAL%$part$$cap$ = %GLOBAL%$cap$$cap_index$ = %GLOBAL%$i$			:i endif			:i return 		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i if $GotParam$${StructQBKey new_layers}$		:i $printf$%s("cas_set_cap_layer_from_preset %t - Adding new")$t$ = %GLOBAL%$base_tex$		:i $AddArrayElement$$array$ = %GLOBAL%$cap$$element$ = :s{			:i $base_tex$ = %GLOBAL%$base_tex$			:i $layers$ = %GLOBAL%$new_layers$		:i :s}		:i $SetCASAppearanceCAP$$part$ = %GLOBAL%$part$$cap$ = %GLOBAL%$array$	:i else 		:i $printf$%s("cas_set_cap_layer_from_preset %t - Nothing to delete")$t$ = %GLOBAL%$base_tex$	:i endif	:i endfunction]Script cas_merge_in_cap_layers a7650dbf [	${Unknown [00012600b6f08f396969696900000018000126007f74fec7696969690000002800012c00106803246969696900000000]}$	:i $GetArraySize$%GLOBAL%$merge_in$	:i if (%GLOBAL%$array_size$ > %i(0))		:i %GLOBAL%$i$ = %i(0)		:i while 		:i if ((%GLOBAL%$merge_in$:a{%GLOBAL%$i$:a})->$base_tex$ = %GLOBAL%$base_tex$)			:i if $StructureContains$$structure$ = (%GLOBAL%$merge_in$:a{%GLOBAL%$i$:a})$layers$				:i $cas_set_cap_layer_from_preset$:s{					:i $part$ = %GLOBAL%$part$					:i $base_tex$ = %GLOBAL%$base_tex$					:i $new_layers$ = ((%GLOBAL%$merge_in$:a{%GLOBAL%$i$:a})->$layers$)				:i :s}				:i return ${StructQBKey true}$			:i endif		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i $cas_set_cap_layer_from_preset$:s{		:i $part$ = %GLOBAL%$part$		:i $base_tex$ = %GLOBAL%$base_tex$	:i :s}	:i return ${StructQBKey false}$	:i endfunction]Script SetCASAppearanceCAPTattoo 0x9ba248b3 [	${		Unknown [00012c0039f1a271696969690000001800012c0058f662f46969696900000028]		StructQBKey part = cas_body	}$		:i $GetArraySize$%GLOBAL%$div_ids$	:i %GLOBAL%$i$ = %i(0)	:i while 	:i if $get_div_info$$part$ = %GLOBAL%$part$$div_id$ = (%GLOBAL%$div_ids$:a{%GLOBAL%$i$:a})		:i $cas_merge_in_cap_layers$:s{			:i $part$ = %GLOBAL%$part$			:i $base_tex$ = %GLOBAL%$base_tex$			:i $merge_in$ = %GLOBAL%$tattoos$		:i :s}	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i endfunction]Script SetCASAppearancePresets 0x5854b33c [	${Unknown [00012c002c0a3e906969696900000000]}$	:i $modelbuilder_check_lock$	:i $change$$cas_current_appearance$ = :s{		:i (~$cas_current_appearance$)		:i $presets$ = %GLOBAL%$presets$	:i :s}	:i endfunction]Script GetCASAppearancePresets a6fed9b4 [	${Unknown [00012c002c0a3e906969696900000000]}$	:i if $StructureContains$$structure$ = (~$cas_current_appearance$)$presets$		:i return $true$$presets$ = (~$cas_current_appearance$->$presets$)	:i else 		:i return ${			StructQBKey false			StructArray presets			{				Floats [0.00000, 0.00000]			}		}$			:i endif	:i endfunction]Script SetCASAppearance 0x0533aaa9 [	${Unknown [00012b00554c7d6f6969696900000000]}$	:i $modelbuilder_check_lock$	:i $VerifyCAPProfile$$profile$ = :s{$appearance$ = %GLOBAL%$appearance$:s}$allowlocked$	:i $change$$cas_current_appearance$ = :s{%GLOBAL%$appearance$:s}	:i endfunction]Script HideInstrument Z_DT_DT_Olivera_Stairs_02 [	:i $Obj_SetIntegerTag$${		StructQBKey tag_name = instrument_hidden		StructInt integer_value = 1	}$		:i $Obj_GetChecksumTag$${StructQBKey tag_name = Instrument}$	:i if (%GLOBAL%$checksum_value$ !== $None$)		:i $ForEachIn$((~$instrument_part_sets$)->%GLOBAL%$checksum_value$)$do$ = $HideInstrument_Foreach$	:i endif	:i endfunction]Script HideInstrument_Foreach 0x092912f4 [	:i $switchoffatomic$%GLOBAL%$checksum$	:i endfunction]Script UnHideInstrument 0x7ecfed60 [	:i $Obj_SetIntegerTag$${		StructQBKey tag_name = instrument_hidden		StructInt integer_value = 0	}$		:i $Obj_GetChecksumTag$${StructQBKey tag_name = Instrument}$	:i if (%GLOBAL%$checksum_value$ !== $None$)		:i $ForEachIn$((~$instrument_part_sets$)->%GLOBAL%$checksum_value$)$do$ = $UnhideInstrument_Foreach$	:i endif	:i endfunction]Script UnhideInstrument_Foreach bfb8f379 [	:i $switchonatomic$%GLOBAL%$checksum$	:i endfunction]Script HideMusician a0695a9c [	:i $ForEachIn$${		StructQBString body_parts		StructQBKey do = HideMusician_Foreach	}$		:i $obj_getid$	:i $character_hide_particle_systems$$object_name$ = %GLOBAL%$ObjID$	:i endfunction]Script HideMusician_Foreach 0x092912f4 [	:i $switchoffatomic$%GLOBAL%$checksum$	:i endfunction]Script UnHideMusician 0x9bf52aa7 [	:i $ForEachIn$${		StructQBString body_parts		StructQBKey do = UnHideMusician_Foreach	}$		:i $obj_getid$	:i $character_unhide_particle_systems$$object_name$ = %GLOBAL%$ObjID$	:i endfunction]Script UnHideMusician_Foreach bfb8f379 [	:i $switchonatomic$%GLOBAL%$checksum$	:i endfunction]Script PushTemporaryCASAppearance 0x69aa88c2 [	:i $AddArrayElement$$array$ = (~$cas_temporary_appearance_stack$)$element$ = (~$cas_current_appearance$)	:i $change$$cas_temporary_appearance_stack$ = %GLOBAL%$array$	:i endfunction]Script PrintTemporaryCASAppearanceStack 0x7ce86b04 [	:i $printcompactstruct$(~$cas_temporary_appearance_stack$)	:i endfunction]Script PopTemporaryCASAppearance b9e66d9b [	:i $GetArraySize$(~$cas_temporary_appearance_stack$)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $RemoveArrayElement$$array$ = (~$cas_temporary_appearance_stack$)$index$ = (%GLOBAL%$array_size$%i(4294967295))		:i $change$$cas_temporary_appearance_stack$ = %GLOBAL%$array$	:i endif	:i endfunction]Script RestoreTopTemporaryCASAppearance aadb3d7a [	:i $GetArraySize$(~$cas_temporary_appearance_stack$)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $change$$cas_current_appearance$ = ((~$cas_temporary_appearance_stack$):a{(%GLOBAL%$array_size$%i(4294967295)):a})	:i endif	:i if $GotParam$${StructQBKey update_cap}$		:i $UpdateCASModelCAP$$part$ = %GLOBAL%$part$	:i elseif $GotParam$${StructQBKey update_color}$		:i $UpdateCurrentCASModel$${StructQBKey buildscript = modelbuilder_update_colors}$	:i elseif NOT $GotParam$${StructQBKey no_rebuild}$		:i $RebuildCurrentCASModel$	:i endif	:i endfunction]Script MergePartIntoTemporaryCASAppearance b4f138be [	${		Unknown [00012c00c19f796a6969696900000018]		StructQBKey merge_presets = false	}$		:i $part_list_instances$ = :a{:a}	:i $GetArraySize$%GLOBAL%$part_list$	:i $i$ = %i(0)	:i while 	:i if NOT $GetCASAppearancePartInstance$$part$ = (%GLOBAL%$part_list$:a{%GLOBAL%$i$:a})		:i %GLOBAL%$part_instance$ = :s{:s}	:i endif	:i $AddArrayElement$$array$ = %GLOBAL%$part_list_instances$$element$ = %GLOBAL%$part_instance$	:i $part_list_instances$ = %GLOBAL%$array$	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $old_presets$ = :s{:s}	:i if $StructureContains$${			StructQBString structure = cas_current_appearance			StructQBKey presets		}$				:i $old_presets$ = (~$cas_current_appearance$->$presets$)	:i endif	:i $GetArraySize$(~$cas_temporary_appearance_stack$)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $change$$cas_current_appearance$ = ((~$cas_temporary_appearance_stack$):a{(%GLOBAL%$array_size$%i(4294967295)):a})		:i $RemoveArrayElement$$array$ = (~$cas_temporary_appearance_stack$)$index$ = (%GLOBAL%$array_size$%i(4294967295))		:i $change$$cas_temporary_appearance_stack$ = %GLOBAL%$array$		:i $GetArraySize$%GLOBAL%$part_list$		:i $i$ = %i(0)		:i while 		:i if $StructureContains$$structure$ = (%GLOBAL%$part_list_instances$:a{%GLOBAL%$i$:a})$desc_id$			:i $SetCASAppearancePartInstance$$part$ = (%GLOBAL%$part_list$:a{%GLOBAL%$i$:a})$part_instance$ = (%GLOBAL%$part_list_instances$:a{%GLOBAL%$i$:a})		:i endif		:i if ((%GLOBAL%$part_list$:a{%GLOBAL%$i$:a}) = $CAS_Hair$)			:i $ResolveBodySpecificPartInAppearance$${StructQBKey part = CAS_Hat_Hair}$			:i $EditCASAppearance$:s{				:i $target$ = $clearpart$				:i $targetParams$ = :s{$part$ = %GLOBAL%$part$:s}			:i :s}			:i if $GetCASAppearancePartInstance$${StructQBKey part = CAS_Hat}$				:i $ResolveBodySpecificPartInAppearance$${StructQBKey part = CAS_Hat}$				:i $EditCASAppearance$:s{					:i $target$ = $clearpart$					:i $targetParams$ = :s{$part$ = %GLOBAL%$part$:s}				:i :s}				:i $cas_add_item_to_appearance$$part$ = %GLOBAL%$part$$desc_id$ = (%GLOBAL%$part_instance$->$desc_id$)$no_rebuild$				:i $SetCASAppearancePartInstance$$part$ = %GLOBAL%$part$$part_instance$ = %GLOBAL%$part_instance$			:i endif		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$		:i if (%GLOBAL%$merge_presets$ = $true$)			:i $change$$cas_current_appearance$ = :s{(~$cas_current_appearance$)$presets$ = %GLOBAL%$old_presets$:s}		:i endif		:i $RebuildCurrentCASModel$	:i endif	:i endfunction]Script selective_restore_top_temporary_appearance 0x6e39b542 [	${Unknown [00012c0096bf58016969696900000000]}$	:i $GetArraySize$(~$cas_temporary_appearance_stack$)	:i %GLOBAL%$changed$ = %i(0)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $old_appearance$ = ((~$cas_temporary_appearance_stack$):a{(%GLOBAL%$array_size$%i(4294967295)):a})		:i $GetArraySize$%GLOBAL%$parts$		:i $i$ = %i(0)		:i while 		:i %GLOBAL%$part$ = (%GLOBAL%$parts$:a{%GLOBAL%$i$:a})		:i $ResolveBodySpecificPartInAppearance$$part$ = %GLOBAL%$part$		:i if $StructureContains$$structure$ = %GLOBAL%$old_appearance$%GLOBAL%$part$			:i $SetCASAppearancePartInstance$$part$ = %GLOBAL%$part$$part_instance$ = (%GLOBAL%$old_appearance$->%GLOBAL%$part$)			:i %GLOBAL%$changed$ = %i(1)		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i if (%GLOBAL%$changed$ = %i(1))		:i return ${StructQBKey true}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script CompareTopTemporaryCASAppearance 0x31a1a61a [	:i $GetArraySize$(~$cas_temporary_appearance_stack$)	:i if $CompareStructs$$struct1$ = ((~$cas_temporary_appearance_stack$):a{(%GLOBAL%$array_size$%i(4294967295)):a})$struct2$ = (~$cas_current_appearance$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script generic_exit_restore ecc49a74 [	:i $RestoreTopTemporaryCASAppearance$	:i $ui_event$${StructQBKey event = menu_back}$	:i endfunction]Script generic_exit_restore_refresh fb1ee66a [	:i $RestoreTopTemporaryCASAppearance$	:i $ui_event$${		StructQBKey event = menu_back		StructStruct Data		{			StructHeader			{				StructQBKey refresh_previous_state			}		}	}$		:i endfunction]SectionArray musician_heaps{	ArrayQBKey	[		heap_musician1		heap_musician2		heap_musician3		heap_musician4	]}SectionFloat g_best_heap_score_iterative_bias 0.0100000SectionInteger g_best_heap_score_iterative_bias_index 0Script get_best_heap_for_appearance a823bca0 [	${Unknown [00012b00554c7d6f696969690000001800012600c34096226969696900000000]}$	:i $best_heap$ = $None$	:i $best_score$ = %f(-1.0)	:i $GetHatHairChoice$	:i $FilterAppearance$$appearance_name$ = $appearance$$part_set$ = ~$instrument_part_sets$$chosen_set$ = %GLOBAL%$Instrument$	:i $FilterAppearance$$appearance_name$ = $appearance$$part_set$ = ~$hair_part_sets$$chosen_set$ = %GLOBAL%$hat_hair_choice$	:i $GetArraySize$${StructQBString musician_heaps}$	:i $i$ = %i(0)	:i while 	:i $heap_name$ = (~$musician_heaps$:a{%GLOBAL%$i$:a})	:i $get_appearance_heap_score$$appearance$ = %GLOBAL%$appearance$$heap_name$ = %GLOBAL%$heap_name$	:i if ((~$g_best_heap_score_iterative_bias_index$) = %GLOBAL%$i$)		:i %GLOBAL%$Score$ = (%GLOBAL%$Score$ + (~$g_best_heap_score_iterative_bias$))	:i endif	:i if (%GLOBAL%$Score$ >= %GLOBAL%$best_score$)		:i $best_score$ = %GLOBAL%$Score$		:i $best_heap$ = %GLOBAL%$heap_name$	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $change$$g_best_heap_score_iterative_bias_index$ = ((~$g_best_heap_score_iterative_bias_index$) + %i(1))	:i if ((~$g_best_heap_score_iterative_bias_index$) = %GLOBAL%$array_size$)		:i $change$${StructInt g_best_heap_score_iterative_bias_index = 0}$	:i endif	:i $printstruct$:s{$best_heap$ = %GLOBAL%$best_heap$$best_score$ = %GLOBAL%$best_score$:s}	:i if (%GLOBAL%$best_score$ < %f(0.0))		:i $scriptassert$${StructString 0x00000000 = "No available heaps"}$	:i endif	:i if $CASIsAssetStorageUsed$$name$ = %GLOBAL%$best_heap$		:i $scriptassert$%s("Asset storage %s is already used")$s$ = %GLOBAL%$best_heap$	:i endif	:i return $best_heap$ = %GLOBAL%$best_heap$	:i endfunction]Script get_appearance_heap_score aeaaa43b [	${Unknown [00012b00554c7d6f6969696900000018000126008581d5a26969696900000000]}$	:i if $CASIsAssetStorageUsed$$name$ = %GLOBAL%$heap_name$		:i $printf$%s("get_appearance_heap_score - %s is being used!")$s$ = %GLOBAL%$heap_name$		:i return ${StructFloat Score = -1.00}$	:i else 		:i $CASCompareAssetStorage$$name$ = %GLOBAL%$heap_name$$appearance$ = %GLOBAL%$appearance$		:i return $Score$ = %GLOBAL%$comparevalue$	:i endif	:i endfunction]Script get_appearance_checksum 0x6a0b6dfd [	${Unknown [00012b00554c7d6f696969690000001800012600c340962269696969000000280001240020359e926969696900000000]}$	:i $GenerateChecksumFromStruct$${StructQBKey structname = appearance}$	:i $appearance_checksum$ = %GLOBAL%$structure_checksum$	:i if $GotParam$${StructQBKey Instrument}$		:i $appearance_checksum$ = (%GLOBAL%$appearance_checksum$ + %GLOBAL%$Instrument$)	:i endif	:i if (%GLOBAL%$mic$ > %i(0))		:i $appearance_checksum$ = (%GLOBAL%$appearance_checksum$ + $mic$)	:i endif	:i return $new_appearance_checksum$ = %GLOBAL%$appearance_checksum$	:i endfunction]Script FlushAllCompositeTexturesFromUI 0x7ed35034 [	:i $printscriptinfo$${StructString 0x00000000 = "FlushAllCompositeTexturesFromUI"}$	:i $FlushAllCompositeTextures$	:i if $ScriptIsRunning$${StructQBKey UpdateCurrentCASModelSpawned}$		:i $printf$${StructString 0x00000000 = "DEALING WITH AN ONGOING UPDATE!"}$		:i $KillSpawnedScript$${StructQBKey name = UpdateCurrentCASModelSpawned}$		:i $RebuildCurrentCASModel$$Instrument$ = (~$cas_current_instrument$)	:i endif	:i endfunction]Script is_preset_type_in_appearance b6f963ea [	${Unknown [00012600f229e7676969696900000000]}$	:i %GLOBAL%$appearance$ = (~$cas_current_appearance$)	:i if NOT $StructureContains$$structure$ = %GLOBAL%$appearance$$presets$		:i return ${StructQBKey false}$	:i endif	:i %GLOBAL%$gender$ = $Male$	:i $cas_get_is_female$$player$ = (~$cas_current_player$)	:i if (%GLOBAL%$is_female$ = %i(1))		:i %GLOBAL%$gender$ = $Female$	:i endif	:i if $StructureContains$$structure$ = (%GLOBAL%$appearance$->$presets$)%GLOBAL%$preset_type$		:i return $true$$preset_index$ = (%GLOBAL%$appearance$->$presets$->%GLOBAL%$preset_type$->$index$)$preset_list$ = (~%GLOBAL%$preset_type$->%GLOBAL%$gender$)	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script add_preset_to_appearance 0x275774f4 [	${Unknown [00012600f229e767696969690000001800012400c36b13ab6969696900000000]}$	:i %GLOBAL%$appearance$ = (~$cas_current_appearance$)	:i if NOT $StructureContains$$structure$ = %GLOBAL%$appearance$$presets$		:i return ${StructQBKey false}$	:i endif	:i %GLOBAL%$presets$ = (%GLOBAL%$appearance$->$presets$)	:i $AddParam$$structure_name$ = $presets$$name$ = %GLOBAL%$preset_type$$value$ = :s{$index$ = %GLOBAL%$preset_index$:s}	:i if (%GLOBAL%$preset_type$ = $car_presets_face$)		:i $AddParam$$structure_name$ = $presets$$name$ = $car_presets_original_face$$value$ = :s{$index$ = %GLOBAL%$preset_index$:s}	:i endif	:i %GLOBAL%$appearance$ = :s{%GLOBAL%$appearance$$presets$ = %GLOBAL%$presets$:s}	:i $change$$cas_current_appearance$ = %GLOBAL%$appearance$	:i endfunction]Script remove_preset_from_appearance 0x434dc026 [	${Unknown [00012600f229e7676969696900000000]}$	:i %GLOBAL%$appearance$ = (~$cas_current_appearance$)	:i if NOT $StructureContains$$structure$ = %GLOBAL%$appearance$$presets$		:i return ${StructQBKey false}$	:i endif	:i %GLOBAL%$presets$ = (%GLOBAL%$appearance$->$presets$)	:i if NOT $StructureContains$$structure$ = $presets$%GLOBAL%$preset_type$		:i return 	:i endif	:i $RemoveComponent$$structure_name$ = $presets$$name$ = %GLOBAL%$preset_type$	:i %GLOBAL%$appearance$ = :s{%GLOBAL%$appearance$$presets$ = %GLOBAL%$presets$:s}	:i $change$$cas_current_appearance$ = %GLOBAL%$appearance$	:i endfunction]Script get_frontend_desc c427f567 [	${Unknown [00012600b6f08f396969696900000018000126004bb2084e6969696900000000]}$	:i if $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i if $GotParam$${StructQBKey frontend_desc}$			:i return $true$$frontend_desc$ = %GLOBAL%$frontend_desc$		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script cas_apply_preset 0x354ff88e [	${Unknown [00012600f229e767696969690000001800012400c36b13ab69696969000000280001260038b8f5bd6969696900000000]}$	:i %GLOBAL%$new_preset$ = ((~%GLOBAL%$preset_type$->%GLOBAL%$gender$):a{%GLOBAL%$preset_index$:a})	:i %GLOBAL%$parts_list$ = (~$g_preset_parts_lists$->%GLOBAL%$preset_type$)	:i $GetArraySize$%GLOBAL%$parts_list$	:i if (%GLOBAL%$array_size$ > %i(0))		:i %GLOBAL%$i$ = %i(0)		:i while 		:i %GLOBAL%$cur_part$ = (%GLOBAL%$parts_list$:a{%GLOBAL%$i$:a})		:i if $StructureContains$$structure$ = %GLOBAL%$new_preset$%GLOBAL%$cur_part$			:i %GLOBAL%$part_struct$ = (%GLOBAL%$new_preset$->%GLOBAL%$cur_part$)			:i if (%GLOBAL%$cur_part$ = $cas_body$)				:i $scriptassert$${StructString 0x00000000 = "CAS_Body parts shouldn't be used on presets!"}$			:i else 				:i $cas_add_item_to_appearance$$part$ = %GLOBAL%$cur_part$$desc_id$ = (%GLOBAL%$part_struct$->$desc_id$)$no_rebuild$				:i $SetCASAppearancePartInstance$$part$ = %GLOBAL%$cur_part$$part_instance$ = %GLOBAL%$part_struct$			:i endif		:i else 			:i $EditCASAppearance$:s{				:i $target$ = $clearpart$				:i $targetParams$ = :s{$part$ = %GLOBAL%$cur_part$:s}			:i :s}		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i if (%GLOBAL%$preset_type$ = $car_presets_face$)		:i %GLOBAL%$bone_settings$ = :s{:s}		:i if $StructureContains$$structure$ = %GLOBAL%$new_preset$$cas_body$			:i if $StructureContains$$structure$ = (%GLOBAL%$new_preset$->$cas_body$)$bones$				:i %GLOBAL%$bone_settings$ = ((%GLOBAL%$new_preset$->$cas_body$)->$bones$)			:i endif		:i endif		:i $SetCASAppearanceBones$$part$ = $cas_body$$bones$ = %GLOBAL%$bone_settings$	:i endif	:i if (%GLOBAL%$preset_type$ = $car_presets_face$)		:i $cas_set_body_material_from_preset$:s{			:i $preset$ = %GLOBAL%$new_preset$			:i $mat_name$ = $Skin$			:i $default_value$ = $skin_white3$		:i :s}	:i endif	:i if (%GLOBAL%$preset_type$ = $CAR_Presets_Body$)		:i $cas_set_body_material_from_preset$:s{			:i $preset$ = %GLOBAL%$new_preset$			:i $mat_name$ = $Nails$			:i $default_value$ = $grey_3$		:i :s}	:i endif	:i if (%GLOBAL%$preset_type$ = $CAR_Presets_Makeup$)		:i if $StructureContains$$structure$ = %GLOBAL%$new_preset$$post_layer$			:i if $StructureContains$$structure$ = %GLOBAL%$new_preset$$base_tex$				:i %GLOBAL%$base_tex$ = (%GLOBAL%$new_preset$->$base_tex$)				:i %GLOBAL%$post_layer$ = (%GLOBAL%$new_preset$->$post_layer$)				:i if $StructureContains$$structure$ = %GLOBAL%$new_preset$$layers$					:i $SetCASAppearanceCAPMakeup$$base_tex$ = %GLOBAL%$base_tex$$post_layer$ = %GLOBAL%$post_layer$$layers$ = (%GLOBAL%$new_preset$->$layers$)				:i else 					:i $SetCASAppearanceCAPMakeup$$base_tex$ = %GLOBAL%$base_tex$$post_layer$ = %GLOBAL%$post_layer$				:i endif			:i endif		:i endif	:i endif	:i if (%GLOBAL%$preset_type$ = $CAR_Presets_Tattoo$)		:i if $StructureContains$$structure$ = %GLOBAL%$new_preset$$tattoos$			:i $SetCASAppearanceCAPTattoo$:s{				:i $tattoos$ = (%GLOBAL%$new_preset$->$tattoos$)				:i $div_ids$ = :a{$Body$$Left Arm$$Right Arm$:a}			:i :s}		:i endif	:i endif	:i $add_preset_to_appearance$$preset_type$ = %GLOBAL%$preset_type$$preset_index$ = %GLOBAL%$preset_index$	:i endfunction]