Unknown [1c00000000000000000019700000000000000000]SectionInteger global_end_session_when_write_completes 0Script check_score_leap_event 0x077ed47f [	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%i(0) < %GLOBAL%$num_players$)		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i %GLOBAL%$error_flag$ = %i(0)		:i $getplayerinfo$%GLOBAL%$player$$part$		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if $playerinfoequals$%GLOBAL%$player$$bot_play$ = %i(1)			:i $getplayerinfo$%GLOBAL%$player$$bot_original_controller$			:i if (%i(4) > %GLOBAL%$bot_original_controller$)				:i %GLOBAL%$controller$ = %GLOBAL%$bot_original_controller$			:i else 				:i %GLOBAL%$error_flag$ = %i(1)			:i endif		:i endif		:i if (%i(0) = %GLOBAL%$error_flag$)			:i $GetNetID$$controller_index$ = %GLOBAL%$controller$			:i if $GMan_GetGoalsByPlayer$$player$ = %GLOBAL%$player$				:i %GLOBAL%$goal_index$ = %i(0)				:i while 				:i %GLOBAL%$user_ids$ = :a{:a}				:i %GLOBAL%$current_goal$ = (%GLOBAL%$goal_strings_by_player$:a{%GLOBAL%$goal_index$:a})				:i $GMan_GetData$$goal$ = (%GLOBAL%$goals_by_player$:a{%GLOBAL%$goal_index$:a})$player$ = %GLOBAL%$player$$name$ = $current_progress$				:i %GLOBAL%$current_player_score$ = %GLOBAL%$current_progress$				:i $FriendStats_GetScores$$goal_name$ = %GLOBAL%$current_goal$$controller_index$ = %GLOBAL%$controller$$Instrument$ = %GLOBAL%$part$				:i $GetArraySize$${					StructQBKey rows					StructQBKey param = num_friend_entries				}$								:i if (%i(0) < %GLOBAL%$num_friend_entries$)					:i %GLOBAL%$friend_index$ = %i(0)					:i $GetNetID$$controller_index$ = %GLOBAL%$controller$					:i while 					:i if (%GLOBAL%$current_player_score$ > (%GLOBAL%$rows$:a{%GLOBAL%$friend_index$:a}->$Score$))						:i %GLOBAL%$current_friend_index$ = %GLOBAL%$friend_index$						:i if (%GLOBAL%$num_friend_entries$ - %GLOBAL%$current_friend_index$ > %i(0))							:i while 							:i if (%GLOBAL%$net_id_first$ = (%GLOBAL%$rows$:a{%GLOBAL%$friend_index$:a}->$player_id$:a{%i(0):a}) AND 								:i %GLOBAL%$net_id_second$ = (%GLOBAL%$rows$:a{%GLOBAL%$friend_index$:a}->$player_id$:a{%i(1):a}))								:i $printf$${StructQBStringQs d3c172de}$								:i continue							:i endif							:i $AddArrayElement$$array$ = %GLOBAL%$user_ids$$element$ = (%GLOBAL%$rows$:a{%GLOBAL%$friend_index$:a}->$player_id$)							:i %GLOBAL%$user_ids$ = %GLOBAL%$array$							:i %GLOBAL%$friend_index$ = (%i(1) + %GLOBAL%$friend_index$)							:i loop_to (%GLOBAL%$num_friend_entries$ - %GLOBAL%$current_friend_index$)						:i endif						:i continue					:i elseif (%GLOBAL%$net_id_first$ = (%GLOBAL%$rows$:a{%GLOBAL%$friend_index$:a}->$player_id$:a{%i(0):a}) AND 						:i %GLOBAL%$net_id_second$ = (%GLOBAL%$rows$:a{%GLOBAL%$friend_index$:a}->$player_id$:a{%i(1):a}))						:i continue					:i endif					:i %GLOBAL%$friend_index$ = (%i(1) + %GLOBAL%$friend_index$)					:i loop_to %GLOBAL%$num_friend_entries$				:i endif				:i $send_leap_score_event$$player$ = %GLOBAL%$player$$controller$ = %GLOBAL%$controller$$goal$ = %GLOBAL%$current_goal$$user_ids$ = %GLOBAL%$user_ids$				:i %GLOBAL%$goal_index$ = (%i(1) + %GLOBAL%$goal_index$)				:i loop_to %GLOBAL%$goals_by_player_size$			:i endif		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script send_leap_score_event 0x4ce96cbe [	${Unknown [0001240067e6859a696969690000001800012400b30d9965696969690000002800012600032314d1696969690000003800012c00643339ec6969696900000000]}$	:i $GetArraySize$${		StructQBKey user_ids		StructQBKey param = num_players_beat	}$		:i if (%i(0) < %GLOBAL%$num_players_beat$)		:i $broadcastevent$:s{			:i $type$ = $beat_score$			:i $Data$ = :s{				:i $player$ = %GLOBAL%$player$				:i $controller_index$ = %GLOBAL%$controller$				:i $challenge_type$ = %GLOBAL%$goal$				:i $friends_beat$ = %GLOBAL%$user_ids$			:i :s}		:i :s}	:i endif	:i endfunction]Script check_for_leaderboard_write 0x95156ed0 [	:i $printf$${		StructQBKey channel = net_leaderboards		StructQBStringQs 0x669a0012	}$		:i $gamemode_gettype$	:i if NOT (%GLOBAL%$type$ = $freeplay$)		:i if NOT $IsBandCheating$			:i if NOT $song_is_jamsession$$song$ = %GLOBAL%$song_checksum$				:i $WriteLeaderboards$${					StructQBKey leaderboard_id = lb_rock_record_2					StructQBKey callback = RockRecordWriteComplete				}$							:i endif			:i if ((%GLOBAL%$type$ = $quickplay$) AND (%GLOBAL%$end_credits$ = %i(0)))				:i $GetNumPlayersInGame$				:i $get_song_struct$$song$ = %GLOBAL%$song_checksum$				:i if (%GLOBAL%$num_players$ = %i(1))					:i $get_player_num_from_controller$$controller_index$ = (~$primary_controller$)					:i if (%GLOBAL%$player_num$ !== %i(4294967295))						:i $getplayerinfo$%GLOBAL%$player_num$$part$					:i else 						:i $part$ = $None$					:i endif					:i switch (%GLOBAL%$part$)						:i case $guitar$							:i $part_text$ = %s("guitar")							:i endcase						case $Bass$							:i $part_text$ = %s("backup")							:i endcase						case $drum$							:i $part_text$ = %s("drums")							:i endcase						case $Vocals$							:i $part_text$ = %s("mic")							:i endcase						case $rhythm$							:i $part_text$ = %s("backup")							:i endcase						default 							:i $part_text$ = %s("none")					:i end_switch					:i $FormatText$$checksumname$ = $lb_song_id$%s("%s_%p")$s$ = (%GLOBAL%$song_struct$->$name$)$p$ = %GLOBAL%$part_text$				:i else 					:i if $is_traditional_game$						:i $FormatText$$checksumname$ = $lb_song_id$%s("%s_%p")$s$ = (%GLOBAL%$song_struct$->$name$)$p$ = %s("band")					:i else 						:i $FormatText$$checksumname$ = $lb_song_id$%s("%s_%p")$s$ = (%GLOBAL%$song_struct$->$name$)$p$ = %s("altband")					:i endif				:i endif				:i $get_highest_difficulty$				:i if (%GLOBAL%$highest_difficulty$ !== $beginner$)					:i if (~$is_network_game$ = %i(1))						:i $write_leaderboard_stats$$song_checksum$ = %GLOBAL%$song_checksum$$end_session$ = %GLOBAL%$end_session$$game_type$ = %GLOBAL%$type$$lb_song_id$ = %GLOBAL%$lb_song_id$					:i else 						:i if (%GLOBAL%$song_checksum$ !== $jamsession$)							:i $write_leaderboard_stats$$song_checksum$ = %GLOBAL%$song_checksum$$end_session$ = %GLOBAL%$end_session$$game_type$ = %GLOBAL%$type$$lb_song_id$ = %GLOBAL%$lb_song_id$						:i elseif (%GLOBAL%$song_checksum$ = $jamsession$ AND %GLOBAL%$end_session$ = %i(1))							:i $end_singleplayer_game$						:i endif					:i endif				:i endif				:i if (%GLOBAL%$end_session$ = %i(1) AND ((~$is_network_game$) = %i(1)))					:i if $NetSessionFunc$${							StructQBKey obj = session							StructQBKey func = has_active_session						}$												:i $NetSessionFunc$${							StructQBKey obj = session							StructQBKey func = end_active_session						}$											:i endif				:i endif			:i else 				:i if (~$is_network_game$ = %i(1))					:i if $NetSessionFunc$${							StructQBKey obj = session							StructQBKey func = has_active_session						}$												:i $NetSessionFunc$${							StructQBKey obj = session							StructQBKey func = end_active_session						}$											:i endif				:i else 					:i $end_singleplayer_game$					:i $spawnscriptnow$${StructQBKey xenon_singleplayer_session_complete_uninit}$				:i endif			:i endif		:i else 			:i if (~$is_network_game$ = %i(1))				:i $NetSessionFunc$${					StructQBKey obj = session					StructQBKey func = end_active_session				}$							:i else 				:i $xenon_singleplayer_session_begin_uninit$			:i endif		:i endif	:i else 		:i if (~$is_network_game$ = %i(1))			:i $NetSessionFunc$${				StructQBKey obj = session				StructQBKey func = end_active_session			}$					:i else 			:i $xenon_singleplayer_session_begin_uninit$		:i endif	:i endif	:i endfunction]Script write_leaderboard_stats be5d522b [	${StructInt end_session = 0}$	:i $printf$${		StructQBKey channel = net_leaderboards		StructQBStringQs 0x81aa287d	}$		:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $quickplay$)		:i $get_song_struct$$song$ = %GLOBAL%$song_checksum$		:i $FormatText$$checksumname$ = $qp_challenge_lb_id$%s("%s_%p")$s$ = (%GLOBAL%$song_struct$->$name$)$p$ = %s("challenge")		:i $WriteLeaderboards$$leaderboard_id$ = %GLOBAL%$qp_challenge_lb_id$$callback$ = $quickplay_challenger_lb_write_complete$	:i endif	:i if $GMan_IsPowerScoreEnabled$		:i if (%GLOBAL%$end_session$ = %i(1))			:i $change$${StructInt global_end_session_when_write_completes = 1}$		:i endif	:i else 		:i if (%GLOBAL%$end_session$ = %i(1))			:i $change$${StructInt global_end_session_when_write_completes = 1}$			:i $WriteLeaderboards$$leaderboard_id$ = %GLOBAL%$lb_song_id$$callback$ = $WriteStatsCallback$		:i else 			:i $WriteLeaderboards$$leaderboard_id$ = %GLOBAL%$lb_song_id$$callback$ = $WriteStatsCallback$		:i endif	:i endif	:i endfunction]Script is_traditional_game 0x04d9e241 [	:i %GLOBAL%$num_guitar$ = %i(0)	:i %GLOBAL%$num_drum$ = %i(0)	:i %GLOBAL%$num_vocals$ = %i(0)	:i %GLOBAL%$num_bass$ = %i(0)	:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$part$		:i switch (%GLOBAL%$part$)			:i case $guitar$				:i %GLOBAL%$num_guitar$ = (%GLOBAL%$num_guitar$ + %i(1))				:i endcase			case $Bass$				:i %GLOBAL%$num_bass$ = (%GLOBAL%$num_bass$ + %i(1))				:i endcase			case $drum$				:i %GLOBAL%$num_drum$ = (%GLOBAL%$num_drum$ + %i(1))				:i endcase			case $Vocals$				:i %GLOBAL%$num_vocals$ = (%GLOBAL%$num_vocals$ + %i(1))		:i end_switch		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i if (%GLOBAL%$num_guitar$ <= %i(1))		:i if (%GLOBAL%$num_drum$ <= %i(1))			:i if (%GLOBAL%$num_vocals$ <= %i(1))				:i if (%GLOBAL%$num_bass$ <= %i(1))					:i return ${StructQBKey true}$				:i endif			:i endif		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script net_retrieve_controller_scores f73f0de3 [	:i $GetNumPlayersInGame$	:i $total_score$ = %i(0)	:i $primary_index$ = %i(0)	:i %GLOBAL%$array$ = :a{:a}	:i $GetFirstPlayer$${StructQBKey out = index}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i while 		:i $getplayerinfo$%GLOBAL%$index$$Score$		:i $CastToInteger$${StructQBKey Score}$		:i $getplayerinfo$%GLOBAL%$index$$controller$		:i if (%GLOBAL%$controller$ = ~$primary_controller$)			:i %GLOBAL%$primary_index$ = (%GLOBAL%$index$ - %i(1))		:i endif		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$Score$		:i %GLOBAL%$total_score$ = (%GLOBAL%$total_score$ + %GLOBAL%$Score$)		:i $printstruct$ isNull 		:i $GetNextPlayer$$player$ = %GLOBAL%$index$$out$ = $index$		:i loop_to %GLOBAL%$num_players$	:i endif	:i $player_scores$ = %GLOBAL%$array$	:i return :s{		:i $scores$ = %GLOBAL%$player_scores$		:i $total_score$ = %GLOBAL%$total_score$		:i $primary_index$ = %GLOBAL%$primary_index$	:i :s}	:i endfunction]Script net_retrieve_primary_controller_part db21c6d2 [	:i $getplayerinfo$${		StructInt 1		StructQBKey controller		StructQBKey out = controller1	}$		:i $getplayerinfo$${		StructInt 2		StructQBKey controller		StructQBKey out = controller2	}$		:i if (%GLOBAL%$controller1$ = (~$primary_controller$))		:i $getplayerinfo$${			StructInt 1			StructQBKey part		}$				:i return $primary_part$ = %GLOBAL%$part$	:i elseif (%GLOBAL%$controller2$ = (~$primary_controller$))		:i $getplayerinfo$${			StructInt 2			StructQBKey part		}$				:i return $primary_part$ = %GLOBAL%$part$	:i else 		:i return ${StructQBKey primary_part = guitar}$	:i endif	:i endfunction]Script WriteStatsCallback 0x64108e4f [	:i if (%i(1) = (~$global_end_session_when_write_completes$))		:i $change$${StructInt global_end_session_when_write_completes = 0}$		:i $end_singleplayer_game$	:i endif	:i endfunction]Script quickplay_challenger_lb_write_complete b8f7a7e4 [	:i $printf$${StructQBStringQs 0x37b1d5b7}$	:i if $GMan_IsPowerScoreEnabled$		:i $printf$${StructQBStringQs b22fcccb}$		:i if (%i(1) = (~$global_end_session_when_write_completes$))			:i $change$${StructInt global_end_session_when_write_completes = 0}$			:i $printf$${StructQBStringQs 0x15c80607}$			:i $end_singleplayer_game$		:i endif	:i endif	:i endfunction]Script RockRecordWriteComplete ffffffff [	:i endfunction]Script request_friend_stats 0x1ea149a6 [	${Unknown [00012600cc12115e6969696900000000]}$	:i $FriendStats_ResetScores$	:i if (~$autolaunch_startnow$ = %i(0))		:i $get_song_struct$$song$ = %GLOBAL%$song$		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$			:i while 			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller$$network_platform_only$$dont_set_primary$				:i if (%GLOBAL%$num_players$ > %i(1))					:i if $is_traditional_game$						:i $FormatText$$checksumname$ = $leaderboard_id$%s("%s_%p")$s$ = (%GLOBAL%$song_struct$->$name$)$p$ = %s("_band")					:i else 						:i $FormatText$$checksumname$ = $leaderboard_id$%s("%s_%p")$s$ = (%GLOBAL%$song_struct$->$name$)$p$ = %s("_altband")					:i endif				:i else 					:i $getplayerinfo$%GLOBAL%$player$$part$					:i switch (%GLOBAL%$part$)						:i case $guitar$							:i $part_text$ = %s("guitar")							:i endcase						case $Bass$							:i $part_text$ = %s("backup")							:i endcase						case $drum$							:i $part_text$ = %s("drums")							:i endcase						case $Vocals$							:i $part_text$ = %s("mic")							:i endcase						case $rhythm$							:i $part_text$ = %s("backup")							:i endcase						default 							:i $part_text$ = %s("none")					:i end_switch					:i $FormatText$$checksumname$ = $leaderboard_id$%s("%s_%p")$s$ = (%GLOBAL%$song_struct$->$name$)$p$ = %GLOBAL%$part_text$				:i endif				:i $ReadLeaderboardByFriendsList$:s{					:i $callback$ = $request_friend_stats_callback$					:i $leaderboard_id$ = %GLOBAL%$leaderboard_id$					:i $Offset$ = %i(0)					:i $num_rows$ = (~$g_max_num_friends$)					:i $controller_id$ = %GLOBAL%$controller$				:i :s}				:i $FormatText$$checksumname$ = $leaderboard_id$%s("%s_challenge")$s$ = (%GLOBAL%$song_struct$->$name$)				:i $ReadLeaderboardByFriendsList$:s{					:i $callback$ = $request_friend_stats_challenge_callback$					:i $leaderboard_id$ = %GLOBAL%$leaderboard_id$					:i $Offset$ = %i(0)					:i $num_rows$ = (~$g_max_num_friends$)					:i $controller_id$ = %GLOBAL%$controller$				:i :s}			:i endif			:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$			:i loop_to %GLOBAL%$num_players$		:i endif	:i endif	:i endfunction]Script request_friend_stats_callback 0x25f18f6c [	:i if (%GLOBAL%$status$ !== $failed$)		:i $GetNumPlayersInGame$${StructQBKey local}$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$			:i while 			:i if $playerinfoequals$%GLOBAL%$player$$controller$ = %GLOBAL%$controller_index$				:i %GLOBAL%$config$ = $qp_score_points$				:i if (%GLOBAL%$num_players$ > %i(1))					:i if $is_traditional_game$						:i %GLOBAL%$config$ = $qp_score_points_stdband$					:i else 						:i %GLOBAL%$config$ = $qp_score_points_band$					:i endif				:i endif				:i $FriendStats_SetScores$$rows$ = %GLOBAL%$rows$$config$ = %GLOBAL%$config$$controller_index$ = %GLOBAL%$controller_index$			:i endif			:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$			:i loop_to %GLOBAL%$num_players$		:i endif	:i endif	:i $broadcastevent$${StructQBKey type = lb_read}$	:i endfunction]Script request_friend_stats_challenge_callback 0x918cdabc [	:i if (%GLOBAL%$status$ !== $failed$)		:i $FriendStats_SetScores$$rows$ = %GLOBAL%$rows$$config$ = $challenges$$controller_index$ = %GLOBAL%$controller_index$	:i endif	:i $broadcastevent$${StructQBKey type = lb_read}$	:i endfunction]Script get_friend_stats_scores 0x1ad36755 [	:i $Playlist_GetCurrentSong$	:i $get_song_prefix$$song$ = %GLOBAL%$current_song$	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller$$network_platform_only$$dont_set_primary$			:i $getplayerinfo$%GLOBAL%$player$$part$			:i $GMan_GetGoalsByPlayer$$player$ = %GLOBAL%$player$			:i $index$ = %i(0)			:i while 			:i $FriendStats_GetScores$$goal_name$ = (%GLOBAL%$goal_strings_by_player$:a{%GLOBAL%$index$:a})$controller_index$ = %GLOBAL%$controller$$Instrument$ = %GLOBAL%$part$			:i $printstruct$ isNull 			:i $index$ = (%GLOBAL%$index$ + %i(1))			:i loop_to %GLOBAL%$goals_by_player_size$		:i endif		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script rock_record_read_friends 0x382760d9 [	:i %GLOBAL%$written_controllers$ = :a{%i(0)%i(0)%i(0)%i(0)%i(0)%i(0)%i(0)%i(0):a}	:i $change$${		StructArray g_ff_rock_record_messages		{			Floats [0.00000, 0.00000]		}	}$		:i while 	:i $GetActiveControllers$	:i $GetArraySize$${StructQBKey active_controllers}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i %GLOBAL%$controller_index$ = %i(0)		:i $ui_leaderboard_reinit$		:i while 		:i if (%GLOBAL%$active_controllers$:a{%GLOBAL%$controller_index$:a} = %i(1) AND %GLOBAL%$written_controllers$:a{%GLOBAL%$controller_index$:a} = %i(0))			:i if $CheckForSignin$$controller_index$ = %GLOBAL%$controller_index$$network_platform_only$				:i if $ff_can_use_friend_feed$$controller_index$ = %GLOBAL%$controller_index$					:i if $NetSessionFunc$${StructQBKey func = is_leaderboard_lobby_available}$						:i $SetArrayElement$$arrayName$ = $written_controllers$$index$ = %GLOBAL%$controller_index$$newValue$ = %i(1)						:i $ReadLeaderboardByFriendsList$:s{							:i $callback$ = $rock_record_friends_lb_callback$							:i $leaderboard_id$ = $lb_rock_record_2$							:i $Offset$ = %i(0)							:i $num_rows$ = (~$g_max_num_friends$)							:i $controller_id$ = %GLOBAL%$controller_index$						:i :s}					:i endif				:i endif			:i endif		:i endif		:i %GLOBAL%$controller_index$ = (%GLOBAL%$controller_index$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i $wait$${		StructInt 1		StructQBKey second	}$		:i loop_to %i(30)	:i endfunction]Script rock_record_friends_lb_callback ae0d3b3a [	:i $printf$${StructQBStringQs a9827d54}$	:i if NOT $ChecksumEquals$$a$ = %GLOBAL%$status$$b$ = $failed$		:i $GetNetID$$controller_index$ = %GLOBAL%$controller_index$		:i %GLOBAL%$net_id$ = :a{%i(0)%i(0):a}		:i $SetArrayElement$$arrayName$ = $net_id$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$		:i $SetArrayElement$$arrayName$ = $net_id$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$		:i if $GotParam$${StructQBKey rows}$			:i $GetArraySize$${StructQBKey rows}$			:i if (%GLOBAL%$array_size$ > %i(0))				:i %GLOBAL%$index$ = %i(0)				:i while 				:i %GLOBAL%$player_id$ = (%GLOBAL%$rows$:a{%GLOBAL%$index$:a}->$player_id$)				:i if (%GLOBAL%$net_id$:a{%i(0):a} = %GLOBAL%$player_id$:a{%i(0):a} AND %GLOBAL%$net_id$:a{%i(1):a} = %GLOBAL%$player_id$:a{%i(1):a})					:i %GLOBAL%$user_rock_record$ = (%GLOBAL%$rows$:a{%GLOBAL%$index$:a})					:i $RemoveArrayElement$$array$ = %GLOBAL%$rows$$index$ = %GLOBAL%$index$					:i %GLOBAL%$rows$ = %GLOBAL%$array$					:i continue				:i endif				:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))				:i loop_to %GLOBAL%$array_size$				:i %GLOBAL%$num_msgs$ = (~$g_ff_num_rock_record_messages$)				:i if $GotParam$${StructQBKey user_rock_record}$					:i %GLOBAL%$ff_rock_record_stats_to_use$ = (~$g_ff_rock_record_stats$)					:i while 					:i $GetRandomArrayElement$${StructQBKey rows}$					:i if $GotParam$${StructQBKey element}$						:i %GLOBAL%$highest_percent_diff$ = %f(0.0)						:i %GLOBAL%$current_percent$ = %f(0.0)						:i %GLOBAL%$friend_feed_msg$ = ^[03ac90f0]^						:i %GLOBAL%$gamertag_text$ = (%GLOBAL%$rows$:a{%GLOBAL%$index$:a}->$gamer_tag$)						:i $GetArraySize$%GLOBAL%$ff_rock_record_stats_to_use$$param$ = $stats_size$						:i if (%GLOBAL%$stats_size$ > %i(0))							:i %GLOBAL%$stat_index$ = %i(0)							:i %GLOBAL%$stat_used$ = %i(4294967295)							:i while 							:i %GLOBAL%$ff_rock_record_stat_struct$ = (%GLOBAL%$ff_rock_record_stats_to_use$:a{%GLOBAL%$stat_index$:a})							:i $GetArraySize$(%GLOBAL%$ff_rock_record_stat_struct$->$columns$)							:i if (%GLOBAL%$array_size$ = %i(1))								:i %GLOBAL%$stat_checksum$ = (%GLOBAL%$ff_rock_record_stat_struct$->$columns$:a{%i(0):a})								:i %GLOBAL%$element_data$ = (%GLOBAL%$element$->%GLOBAL%$stat_checksum$)								:i %GLOBAL%$user_data$ = (%GLOBAL%$user_rock_record$->%GLOBAL%$stat_checksum$)								:i if (%GLOBAL%$stat_checksum$ = $total_time_playing_in_seconds$)									:i %GLOBAL%$element_data$ = (%GLOBAL%$element_data$ / %i(60))									:i %GLOBAL%$user_data$ = (%GLOBAL%$user_data$ / %i(60))									:i $printf$^[8d85dc83]^$d$ = %GLOBAL%$user_data$$e$ = %GLOBAL%$element_data$								:i endif							:i elseif (%GLOBAL%$array_size$ > %i(1))								:i %GLOBAL%$stat_total_chk$ = (%GLOBAL%$ff_rock_record_stat_struct$->$columns$:a{%i(0):a})								:i %GLOBAL%$stat_divisor_chk$ = (%GLOBAL%$ff_rock_record_stat_struct$->$columns$:a{%i(1):a})								:i if ((%GLOBAL%$user_rock_record$->%GLOBAL%$stat_divisor_chk$) > %i(0))									:i %GLOBAL%$user_data$ = ((%GLOBAL%$user_rock_record$->%GLOBAL%$stat_total_chk$) / (%GLOBAL%$user_rock_record$->%GLOBAL%$stat_divisor_chk$))								:i else 									:i %GLOBAL%$user_data$ = %i(0)								:i endif								:i if ((%GLOBAL%$element$->%GLOBAL%$stat_divisor_chk$) > %i(0))									:i %GLOBAL%$element_data$ = ((%GLOBAL%$element$->%GLOBAL%$stat_total_chk$) / (%GLOBAL%$element$->%GLOBAL%$stat_divisor_chk$))								:i else 									:i %GLOBAL%$element_data$ = %i(0)								:i endif							:i endif							:i if ((%GLOBAL%$element_data$ > %GLOBAL%$user_data$)								:i OR (%GLOBAL%$element_data$ < %GLOBAL%$user_data$))								:i %GLOBAL%$difference$ = ((%GLOBAL%$element_data$ - %GLOBAL%$user_data$) * %f(1.0))								:i %GLOBAL%$format_string$ = (%GLOBAL%$ff_rock_record_stat_struct$->$more_string$)								:i if (%GLOBAL%$difference$ < %f(0.0))									:i %GLOBAL%$difference$ = (%GLOBAL%$difference$ * %f(-1.0))									:i %GLOBAL%$format_string$ = (%GLOBAL%$ff_rock_record_stat_struct$->$less_string$)								:i endif								:i %GLOBAL%$current_percent$ = (%GLOBAL%$difference$ / ((%GLOBAL%$element_data$ + %GLOBAL%$user_data$) * %f(1.0)))								:i if (%GLOBAL%$current_percent$ > %GLOBAL%$highest_percent_diff$)									:i %GLOBAL%$highest_percent_diff$ = %GLOBAL%$current_percent$									:i if $StructureContains$$structure$ = %GLOBAL%$ff_rock_record_stat_struct$$integer$										:i $CastToInteger$${StructQBKey difference}$									:i endif									:i %GLOBAL%$stat_used$ = %GLOBAL%$stat_index$									:i $FormatText$$textname$ = $friend_feed_msg$%GLOBAL%$format_string$$s$ = %GLOBAL%$gamertag_text$$n$ = %GLOBAL%$element_data$$d$ = %GLOBAL%$difference$								:i endif							:i endif							:i %GLOBAL%$stat_index$ = (%GLOBAL%$stat_index$ + %i(1))							:i loop_to %GLOBAL%$stats_size$							:i if (%GLOBAL%$stat_used$ !== %i(4294967295))								:i $RemoveArrayElement$$array$ = %GLOBAL%$ff_rock_record_stats_to_use$$index$ = %GLOBAL%$stat_used$								:i %GLOBAL%$ff_rock_record_stats_to_use$ = %GLOBAL%$array$								:i $GenerateASCIIFromUTF16$$string$ = %GLOBAL%$gamertag_text$								:i $AddArrayElement$$array$ = (~$g_ff_rock_record_messages$)$element$ = :s{$controller$ = %GLOBAL%$controller_index$$msg_string$ = %GLOBAL%$friend_feed_msg$$sender_id$ = (%GLOBAL%$element$->$player_id$)$sender_name$ = %GLOBAL%$nlstring$$viewed$ = %i(0):s}								:i $change$$g_ff_rock_record_messages$ = %GLOBAL%$array$								:i if (%GLOBAL%$array_size$ > %i(1))									:i $RemoveArrayElement$$array$ = %GLOBAL%$rows$$index$ = %GLOBAL%$index$									:i %GLOBAL%$rows$ = %GLOBAL%$array$									:i %GLOBAL%$array_size$ = (%GLOBAL%$array_size$ - %i(1))								:i endif							:i endif						:i endif					:i endif					:i loop_to %GLOBAL%$num_msgs$				:i endif			:i endif		:i endif	:i endif	:i endfunction]SectionInteger current_friend_leaderboard_rating 1Script debug_write_user_leaderboard 0x2b74b947 [	:i if NOT $RetailBuild$		:i if $IsXenon$			:i %GLOBAL%$wrote_lb$ = %i(0)			:i %GLOBAL%$controllers$ = :a{%i(0)%i(1)%i(2)%i(3):a}			:i while 			:i $GetArraySize$${StructQBKey controllers}$			:i if (%GLOBAL%$array_size$ <= %i(0))				:i continue			:i endif			:i %GLOBAL%$index$ = %i(0)			:i while 			:i $ui_leaderboard_reinit$			:i %GLOBAL%$device_num$ = (%GLOBAL%$controllers$:a{%GLOBAL%$index$:a})			:i %GLOBAL%$player$ = (%GLOBAL%$device_num$ + %i(1))			:i $GetNetID$$controller_index$ = (%GLOBAL%$device_num$)			:i $array$ = :a{%i(0)%i(0):a}			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(0)$newValue$ = %GLOBAL%$net_id_first$			:i $SetArrayElement$$arrayName$ = $array$$index$ = %i(1)$newValue$ = %GLOBAL%$net_id_second$			:i %GLOBAL%$net_id$ = %GLOBAL%$array$			:i if NOT (%GLOBAL%$net_id$:a{%i(0):a} = %i(0) AND %GLOBAL%$net_id$:a{%i(1):a} = %i(0))				:i if $NetSessionFunc$${StructQBKey func = is_leaderboard_lobby_available}$					:i %GLOBAL%$wrote_lb$ = %i(1)					:i $WriteLeaderboards$${						StructQBKey leaderboard_id = lb_debug_friends						StructQBKey callback = debug_friends_leaderboard_callback						StructInt num_players = 4					}$										:i $getrandomvalue$${						StructQBKey name = Score						StructFloat a = 1.00						StructFloat b = 25000.00					}$										:i $SetPlayerInfo$%GLOBAL%$player$$Score$ = %GLOBAL%$Score$					:i $getplayerinfo$%GLOBAL%$player$$in_game$					:i $SetPlayerInfo$%GLOBAL%$player$$in_game$ = %i(1)					:i $getplayerinfo$%GLOBAL%$player$$difficulty$					:i $SetPlayerInfo$%GLOBAL%$player$$difficulty$ = $medium$					:i $WriteLeaderboards$${						StructQBKey leaderboard_id = getfree_guitar						StructQBKey callback = debug_friends_leaderboard_callback					}$										:i $SetPlayerInfo$%GLOBAL%$player$$Score$ = %f(0.0)					:i $SetPlayerInfo$%GLOBAL%$player$$in_game$ = %GLOBAL%$in_game$					:i $SetPlayerInfo$%GLOBAL%$player$$difficulty$ = %GLOBAL%$difficulty$					:i continue				:i endif			:i endif			:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))			:i loop_to %GLOBAL%$array_size$			:i if (%GLOBAL%$wrote_lb$ = %i(1))				:i continue			:i endif			:i $wait$${				StructInt 1				StructQBKey second			}$						:i loop_to %i(30)		:i endif	:i endif	:i $printf$${StructQBStringQs 0x6e4cdf4e}$	:i endfunction]Script debug_friends_leaderboard_callback 0x31d2584c [	:i $printf$${StructQBStringQs 0x421b3991}$	:i endfunction]