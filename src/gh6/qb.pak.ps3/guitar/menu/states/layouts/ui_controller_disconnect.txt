Unknown [1c000000000000000000120c0000000000000000]SectionInteger g_controller_unplugged_dialog_up 0SectionInteger controller_unplugged_frame_count 30SectionInteger control_dis_paused 0SectionInteger unknown_drum_type 0SectionInteger g_enable_pause_for_drum_type_missmatch 0Script ui_init_controller_disconnect 0x98ac480d [	:i if (~$is_network_game$)		:i $EnableAllInput$${StructQBKey Off}$	:i endif	:i $change$${StructInt g_controller_unplugged_dialog_up = 1}$	:i endfunction]Script ui_create_controller_disconnect 0x97a39746 [	:i $change$${StructInt g_enable_pause_for_drum_type_missmatch = 0}$	:i $disable_pause$	:i $GetNumPlayersInGame$	:i $device_array$ = :a{:a}	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $AddArrayElement$$array$ = %GLOBAL%$device_array$$element$ = %GLOBAL%$controller$		:i %GLOBAL%$device_array$ = %GLOBAL%$array$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i %GLOBAL%$continue_text$ = ^[182f0173]^	:i if (~$g_in_tutorial$ = %i(1))		:i %GLOBAL%$continue_text$ = ^[9c8bd769]^	:i endif	:i $continue_enabled$ = %i(1)	:i if (~$is_network_game$ = %i(1))		:i $ui_controller_disconnect_update$${StructQBKey no_text}$	:i endif	:i if (%GLOBAL%$continue_enabled$ = %i(1))		:i %GLOBAL%$options_array$ = :a{			:i :s{				:i $func$ = $ui_controller_disconnect_continue$				:i $text$ = %GLOBAL%$continue_text$				:i $sound_func$ = $NullScript$			:i :s}		:i :a}	:i else 		:i %GLOBAL%$options_array$ = :a{:a}	:i endif	:i if (~$g_in_tutorial$ = %i(1))		:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$			:i $LaunchEvent$${				StructQBKey type = unfocus				StructQBKey target = tutorial_main			}$					:i endif	:i endif	:i if (~$calibrate_lag_enabled$ = %i(1))		:i if (~$calibrate_highway_state$ = $menu$)			:i if $ScreenElementExists$${StructQBKey id = generic_barrel_vmenu}$				:i $LaunchEvent$${					StructQBKey type = unfocus					StructQBKey target = generic_barrel_vmenu				}$							:i endif		:i else 			:i if $ScreenElementExists$${StructQBKey id = calibrate_highway_events_container}$				:i $LaunchEvent$${					StructQBKey type = unfocus					StructQBKey target = calibrate_highway_events_container				}$							:i endif		:i endif	:i endif	:i if (~$end_credits$ = %i(0))		:i %GLOBAL%$element$ = :s{			:i $func$ = $ui_controller_disconnect_return_to_main_menu$			:i $text$ = ^[67d9c56d]^			:i $sound_func$ = $NullScript$		:i :s}		:i $AddArrayElement$$array$ = %GLOBAL%$options_array$$element$ = %GLOBAL%$element$		:i %GLOBAL%$options_array$ = %GLOBAL%$array$	:i endif	:i if (~$in_band_lobby$ = %i(1))		:i $text$ = ^[a171c713]^		:i $template$ = $standard$		:i %GLOBAL%$options_array$ = :a{			:i :s{				:i $func$ = $ui_controller_disconnect_continue$				:i $text$ = ^[0e41fe46]^				:i $sound_func$ = $NullScript$			:i :s}		:i :a}		:i $use_all_controllers$ = %i(1)	:i else 		:i $text$ = ^[00000000]^		:i $template$ = $standard$	:i endif	:i if (~$calibrate_lag_enabled$ = %i(0))		:i $use_all_controllers$ = %i(1)	:i endif	:i $create_dialog_box$:s{		:i $template$ = %GLOBAL%$template$		:i $no_background$		:i $heading_text$ = ^[aa163738]^		:i $body_text$ = %GLOBAL%$text$		:i $options$ = %GLOBAL%$options_array$		:i $dlg_z_priority$ = ((~$sys_fade_overlay_z_priority$) + %i(100))		:i $player_device$ = %GLOBAL%$device_array$		:i $use_all_controllers$ = %GLOBAL%$use_all_controllers$		:i $update_net_controllers$ = %i(0)	:i :s}	:i $dialog_box_desc_id$.$settags$${StructInt connected = 0}$	:i if (~$in_band_lobby$ !== %i(1))		:i if $ScreenElementExists$${StructQBKey id = dialog_box_vmenu}$			:i $dialog_box_vmenu$.$obj_spawnscript$${StructQBKey ui_controller_disconnect_pause}$		:i endif		:i if $ScreenElementExists$${StructQBKey id = dialog_box_desc_id}$			:i $dialog_box_desc_id$.$obj_spawnscript$${StructQBKey ui_controller_disconnect_update}$		:i endif	:i endif	:i $clean_up_user_control_helpers$	:i $add_user_control_helper$$text$ = ^[c18d5e76]^$button$ = $green$$z$ = ((~$sys_fade_overlay_z_priority$) + %i(1000))$all_buttons$	:i $startrendering$	:i endfunction]Script ui_destroy_controller_disconnect 0x6c24bf22 [	:i $destroy_dialog_box$	:i endfunction]Script ui_deinit_controller_disconnect 0x05f6104a [	:i if (~$is_network_game$)		:i $EnableAllInput$	:i endif	:i $change$${StructInt g_controller_unplugged_dialog_up = 0}$	:i endfunction]Script ui_controller_disconnect_pause bac5f49a [	:i $ui_event_wait_for_safe$	:i if NOT $GameIsPaused$		:i if NOT (~$is_network_game$)			:i $gh_pause_game$			:i $generic_barrel_menu_unpause_all_items$		:i endif		:i $change$${StructInt control_dis_paused = 1}$	:i elseif (~$paused_for_hardware$ = %i(1))		:i $change$${StructInt control_dis_paused = 1}$	:i endif	:i endfunction]Script ui_controller_disconnect_unfocus_menus f1b9cf55 [	:i if $ScreenElementExists$${StructQBKey id = menu_tutorial}$		:i $LaunchEvent$${			StructQBKey type = unfocus			StructQBKey target = menu_tutorial		}$			:i endif	:i if $ScreenElementExists$${StructQBKey id = calibrate_highway_events_container}$		:i $LaunchEvent$${			StructQBKey type = unfocus			StructQBKey target = calibrate_highway_events_container		}$			:i endif	:i endfunction]Script ui_controller_disconnect_update 0x70fe5e15 [	:i $setscriptcannotpause$	:i $ui_controller_disconnect_unfocus_menus$	:i $old_text$ = ^[03ac90f0]^	:i while 	:i $RemoveParameter$${StructQBKey array_size}$	:i $GetArraySize$${StructQBString sysnotify_paused_controllers}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i if NOT $GotParam$${StructQBKey no_text}$			:i $getsingletag$${StructQBKey connected}$			:i if $GotParam$${StructQBKey connected}$				:i $settags$${StructInt connected = 0}$			:i endif		:i endif		:i $text$ = ^[fbc815c6]^		:i $i$ = %i(0)		:i while 		:i $RemoveParameter$${StructQBKey part}$		:i $GetNumPlayersInGame$		:i if (%GLOBAL%$num_players$ > %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $RemoveParameter$${StructQBKey controller}$			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i if (%GLOBAL%$controller$ = (~$sysnotify_paused_controllers$:a{%GLOBAL%$i$:a}))				:i $getplayerinfo$%GLOBAL%$player$$part$				:i continue			:i endif			:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$			:i loop_to %GLOBAL%$num_players$		:i endif		:i %GLOBAL%$j$ = %GLOBAL%$player$		:i if $GotParam$${StructQBKey part}$			:i if ((%GLOBAL%$part$ = $guitar$) OR (%GLOBAL%$part$ = $Bass$))				:i if (~$calibrate_lag_enabled$ = %i(0))					:i $FormatText$$textname$ = $text$^[2e301f7d]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$				:i else 					:i if $IsPS3$						:i $FormatText$$textname$ = $text$^[766cf4b1]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$					:i else 						:i $FormatText$$textname$ = $text$^[046f071b]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$					:i endif				:i endif			:i endif			:i if (%GLOBAL%$part$ = $drum$)				:i $getplayerinfo$%GLOBAL%$j$$four_lane_highway$				:i if (%GLOBAL%$four_lane_highway$ = %i(1))					:i $FormatText$$textname$ = $text$^[43606ed7]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$				:i elseif (%GLOBAL%$four_lane_highway$ = %i(0))					:i $FormatText$$textname$ = $text$^[b2af53e5]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$$g$ = ~$guitar_hero_registered_string$				:i endif			:i endif			:i if (%GLOBAL%$part$ = $Vocals$)				:i $getplayerinfo$%GLOBAL%$j$$mic_connected$				:i if $IsXenonOrWinDX$					:i $getplayerinfo$%GLOBAL%$j$$mic_type$					:i switch %GLOBAL%$mic_connected$						:i case $mic_disconnected$							:i if (%GLOBAL%$mic_type$ = $headset$)								:i $FormatText$$textname$ = $text$^[27139544]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$							:i else 								:i $FormatText$$textname$ = $text$^[a8485a04]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$							:i endif							:i endcase						case $both_disconnected$							:i if (%GLOBAL%$mic_type$ = $headset$)								:i $FormatText$$textname$ = $text$^[4ce06e3a]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$							:i else 								:i $FormatText$$textname$ = $text$^[e6d2b7f0]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$							:i endif							:i endcase						case $controller_disconnected$							:i endcase						default 							:i $FormatText$$textname$ = $text$^[773068f3]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$					:i end_switch				:i else 					:i switch %GLOBAL%$mic_connected$						:i case $mic_disconnected$							:i $FormatText$$textname$ = $text$^[a8485a04]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$							:i endcase						case $both_disconnected$							:i $FormatText$$textname$ = $text$^[cac47d52]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$							:i endcase						case $controller_disconnected$							:i endcase						default 							:i $FormatText$$textname$ = $text$^[afdb2bc9]^$t$ = %GLOBAL%$text$$j$ = %GLOBAL%$j$					:i end_switch				:i endif			:i endif		:i endif		:i if $IsPS3$			:i $FormatText$$textname$ = $text$^[09536fe2]^$t$ = %GLOBAL%$text$$d$ = (%GLOBAL%$controller$ + %i(1))		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$		:i if $ScreenElementExists$${StructQBKey id = dialog_box_desc_id}$			:i $dialog_box_desc_id$.$se_setprops$${				StructFloatX2 dlog_body_internal_scale				{					Floats [0.450000, 0.450000]				}			}$					:i endif	:i else 		:i if NOT $GotParam$${StructQBKey no_text}$			:i $getsingletag$${StructQBKey connected}$			:i if $GotParam$${StructQBKey connected}$				:i if (%GLOBAL%$connected$ = %i(0))					:i $settags$${StructInt connected = 1}$					:i if $ScreenElementExists$${StructQBKey id = dialog_box_vmenu}$						:i $LaunchEvent$${							StructQBKey type = unfocus							StructQBKey target = dialog_box_vmenu						}$												:i $LaunchEvent$${							StructQBKey type = focus							StructQBKey target = dialog_box_vmenu						}$											:i endif				:i endif			:i endif		:i endif		:i if $ScreenElementExists$${StructQBKey id = dialog_box_desc_id}$			:i $dialog_box_desc_id$.$se_setprops$${				StructFloatX2 dlog_body_internal_scale				{					Floats [0.550000, 0.550000]				}			}$					:i endif		:i $text$ = ^[6c92395c]^	:i endif	:i if NOT $GotParam$${StructQBKey no_text}$		:i if NOT (%GLOBAL%$old_text$ = %GLOBAL%$text$)			:i $se_setprops$:s{$dlog_body_text$ = %GLOBAL%$text$:s}			:i $old_text$ = %GLOBAL%$text$		:i endif	:i else 		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i endfunction]Script ui_controller_disconnect_continue 0x295bb556 [	:i if (~$in_band_lobby$ = %i(0))		:i if (~$allow_controller_for_all_instruments$ = %i(0))			:i if (~$vocal_mic_invalid_dist$ = %i(0))				:i $GetArraySize$${StructQBString sysnotify_paused_controllers}$				:i if NOT (%GLOBAL%$array_size$ = %i(0))					:i $UI_SFX$${						StructQBKey menustate = generic						StructQBKey uitype = ScrollEndWarning					}$										:i return 				:i endif			:i else 				:i $vocals_distribute_mics$				:i $change$${StructInt vocal_mic_invalid_dist = 1}$				:i if NOT $vocals_mic_distribution_is_valid$					:i $UI_SFX$${						StructQBKey menustate = generic						StructQBKey uitype = ScrollEndWarning					}$										:i return 				:i endif			:i endif		:i endif		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i if (%GLOBAL%$player$ = %i(4294967295))			:i return 		:i endif		:i $getplayerinfo$%GLOBAL%$player$$controller$$out$ = $player_controller$		:i if (%GLOBAL%$player_controller$ = %GLOBAL%$device_num$)			:i continue		:i endif		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to 	:i endif	:i $change$${StructInt check_for_unplugged_controllers = 1}$	:i $vocals_set_mics_to_user_volumes$	:i if (~$g_in_tutorial$ = %i(1))		:i $UI_SFX$${			StructQBKey menustate = generic			StructQBKey uitype = select		}$				:i $generic_event_replace$$state$ = $UIState_pausemenu_restart_warning$$Data$ = :s{			:i $cancel_func$ = $ui_controller_disconnect_return_to_menu$			:i $is_popup$			:i $dlg_z_priority$ = ((~$sys_fade_overlay_z_priority$) + %i(100))			:i $player_device$ = %GLOBAL%$device_num$		:i :s}	:i elseif (~$calibrate_lag_enabled$ = %i(1))		:i $gh_unpause_game$		:i $change$${StructFloat pause_grace_period = -1.00}$		:i $ResumeControllerChecking$		:i $change$${			StructArray sysnotify_paused_controllers			{				Floats [0.00000, 0.00000]			}		}$				:i $generic_event_back$	:i else 		:i if (~$control_dis_paused$ = %i(1))			:i if (~$playing_song$ = %i(0))				:i $gh_unpause_game$				:i $change$${StructFloat pause_grace_period = -1.00}$			:i endif			:i $change$${StructInt control_dis_paused = 0}$		:i endif		:i if (~$playing_song$ = %i(1))			:i $in_musicstudio$ = $false$			:i if $musicstudio_mainobj$.$musicstudio_isinmusicstudio$				:i $in_musicstudio$ = $true$			:i endif			:i if (~$vocal_mic_invalid_dist$ > %i(0) AND %GLOBAL%$in_musicstudio$ = $false$)				:i if (~$is_network_game$)					:i $ui_controller_disconnect_return_to_main_menu$$device_num$ = %GLOBAL%$device_num$				:i else 					:i $UI_SFX$${						StructQBKey menustate = generic						StructQBKey uitype = select					}$										:i $generic_event_replace$:s{						:i $state$ = $UIState_pausemenu_restart_warning$						:i $Data$ = :s{							:i $is_popup$							:i $cancel_func$ = $generic_event_replace$							:i $cancel_func_params$ = :s{$state$ = $uistate_controller_disconnect$$Data$ = :s{$is_popup$:s}:s}							:i $dlg_z_priority$ = ((~$sys_fade_overlay_z_priority$) + %i(100))						:i :s}					:i :s}				:i endif			:i elseif NOT $verify_connected_in_game_drum_controllers$				:i $printf$${					StructQBKey channel = zdebug					StructQBStringQs 0x7f760478				}$								:i if (~$is_network_game$)					:i $ui_controller_disconnect_return_to_main_menu$$device_num$ = %GLOBAL%$device_num$				:i else 					:i $gamemode_gettype$					:i if (%GLOBAL%$type$ = $competitive$)						:i $ui_controller_disconnect_return_to_main_menu$$device_num$ = %GLOBAL%$device_num$					:i else 						:i $change$${StructInt g_enable_pause_for_drum_type_missmatch = 1}$						:i $UI_SFX$${							StructQBKey menustate = generic							StructQBKey uitype = select						}$												:i $generic_event_replace$:s{							:i $state$ = $UIState_pausemenu_restart_warning$							:i $Data$ = :s{								:i $is_popup$								:i $cancel_func$ = $generic_event_replace$								:i $cancel_func_params$ = :s{$state$ = $uistate_controller_disconnect$$Data$ = :s{$is_popup$:s}:s}								:i $dlg_z_priority$ = ((~$sys_fade_overlay_z_priority$) + %i(100))							:i :s}						:i :s}					:i endif				:i endif			:i elseif $ui_event_exists_in_stack$${					StructString above = "gameplay"					StructString name = "pausemenu"				}$								:i $UI_SFX$${					StructQBKey menustate = generic					StructQBKey uitype = back				}$								:i $generic_event_back$			:i else 				:i $GetGlobalTags$${					StructQBKey user_options					StructQBKey param = unpause_count				}$								:i $restart_song_state$ = $uistate_song_unpause$				:i $UI_SFX$${					StructQBKey menustate = generic					StructQBKey uitype = select				}$								:i $generic_event_replace$$state$ = %GLOBAL%$restart_song_state$			:i endif		:i else 			:i if (~$in_band_lobby$ = %i(1))				:i $change$${StructInt g_suppress_anim_in = 1}$			:i endif			:i $UI_SFX$${				StructQBKey menustate = generic				StructQBKey uitype = back			}$						:i $generic_event_back$		:i endif	:i endif	:i $change$${StructInt control_dis_paused = 0}$	:i endfunction]Script controller_discon_cleanup_stuff efdf9d84 [	:i $KillSpawnedScript$${StructQBKey name = audio_crowd_play_loading_screen_swell}$	:i $KillSpawnedScript$${StructQBKey name = audio_crowd_loading_whistle}$	:i $KillSpawnedScript$${StructQBKey name = audio_crowd_play_one_shots_between_songs}$	:i $KillSpawnedScript$${StructQBKey name = audio_crowd_play_surge_between_songs}$	:i $KillSpawnedScript$${StructQBKey name = create_exploding_text}$	:i $destroy_all_exploding_text$	:i $Stopsoundsbybuss$${StructQBKey Crowd_One_Shots}$	:i $Stopsoundsbybuss$${StructQBKey Encore_Events}$	:i $kill_intro_celeb_ui$	:i $change$${StructInt control_dis_paused = 0}$	:i endfunction]Script controller_discon_selected_quit 0x8df69877 [	:i $controller_discon_cleanup_stuff$	:i if $DemoBuild$		:i $controller_discon_selected_quit$		:i if $CompositeObjectExists$${StructQBKey CalibrationInterface}$			:i $calibrate_highway_shutdown$		:i endif		:i $UI_SFX$${			StructQBKey menustate = generic			StructQBKey uitype = select		}$				:i $kill_gem_scroller$		:i $ui_event_wait_for_safe$		:i $ui_event$${			StructQBKey event = menu_replace			StructStruct Data			{				StructHeader				{					StructQBKey state = UIstate_freeplay					StructQBKey clear_previous_stack					StructQBKey signin_change				}			}		}$			:i elseif (~$g_in_tutorial$ = %i(1))		:i $quit_warning_select_quit$	:i else 		:i $song_ended_menu_select_quit$${StructInt use_quit_early = 1}$	:i endif	:i endfunction]Script ui_controller_disconnect_return_to_main_menu 0x74da1a62 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				device_num			]		}		StructQBKey all	}$		:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $se_setprops$${StructQBKey block_events}$	:i $change$$last_start_pressed_device$ = %GLOBAL%$device_num$	:i if $DemoBuild$		:i $controller_discon_selected_quit$	:i elseif (~$g_in_tutorial$ = %i(1))		:i $UI_SFX$${			StructQBKey menustate = generic			StructQBKey uitype = select		}$				:i $generic_event_replace$$state$ = $UIstate_pausemenu_quit_warning$$Data$ = :s{			:i $option1_func$ = $ui_controller_disconnect_return_to_menu$			:i $option2_func$ = $controller_discon_selected_quit$			:i $is_popup$			:i $dlg_z_priority$ = ((~$sys_fade_overlay_z_priority$) + %i(100))			:i $disconnect_dialog$ = %i(1)		:i :s}	:i else 		:i $generic_event_replace$$state$ = $UIstate_pausemenu_quit_warning$$Data$ = :s{			:i $option1_func$ = $ui_controller_disconnect_return_to_menu$			:i $option2_func$ = $controller_discon_selected_quit$			:i $is_popup$			:i $dlg_z_priority$ = ((~$sys_fade_overlay_z_priority$) + %i(100))			:i $disconnect_dialog$ = %i(1)		:i :s}	:i endif	:i endfunction]Script ui_controller_disconnect_return_to_menu 0x1d6dc508 [	:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $UI_SFX$${		StructQBKey menustate = generic		StructQBKey uitype = select	}$		:i $se_setprops$${StructQBKey block_events}$	:i $generic_event_replace$${		StructQBKey state = uistate_controller_disconnect		StructStruct Data		{			StructHeader			{				StructQBKey is_popup			}		}	}$		:i endfunction]Script verify_connected_in_game_drum_controllers 0x8a9c911b [	:i %GLOBAL%$return_val$ = %i(1)	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i if $playerinfoequals$%GLOBAL%$player$$part$ = $drum$			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i if $playerinfoequals$%GLOBAL%$player$$four_lane_highway$ = %i(0)				:i if $isRBDrum$$controller$ = %GLOBAL%$controller$					:i %GLOBAL%$return_val$ = %i(0)					:i $change$${StructInt unknown_drum_type = 1}$				:i endif			:i else 				:i if NOT $isRBDrum$$controller$ = %GLOBAL%$controller$					:i %GLOBAL%$return_val$ = %i(0)					:i $change$${StructInt unknown_drum_type = 1}$				:i endif			:i endif		:i endif		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i if (%GLOBAL%$return_val$ = %i(1))		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]