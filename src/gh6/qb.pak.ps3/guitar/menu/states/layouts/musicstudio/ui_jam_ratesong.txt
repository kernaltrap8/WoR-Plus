Unknown [1c0000000000000000000e980000000000000000]SectionInteger jam_ratesong_is_definitely_last_song 0Script ui_create_jam_ratesong bd5f22d8 [	:i $printf$${StructString 0x00000000 = "in create ratesong"}$	:i $spawnscriptnow$${		StructQBKey jam_ratesong_menu		StructQBKey id = jam_ratesong_spawn	}$		:i endfunction]Script ui_destroy_jam_ratesong ffffffff [	:i endfunction]Script ui_init_jam_ratesong ffffffff [	:i endfunction]Script ui_deinit_jam_ratesong b42cbcdf [	:i if $ScreenElementExists$${StructQBKey id = jam_ratesong_dialog}$		:i $DestroyScreenElement$${StructQBKey id = jam_ratesong_dialog}$	:i endif	:i endfunction]Script jam_ratesong_menu 0x02b069f7 [	:i $startrendering$	:i $CreateScreenElement$${		StructQBKey parent = root_window		StructQBKey id = jam_ratesong_dialog		StructQBKey type = descinterface		StructString desc = "jam_ratesong"		StructFloatX2 Pos		{			Floats [0.00000, 0.00000]		}	}$		:i $jam_ratesong_dialog$.$settags$${StructInt current_rating = 7}$	:i %GLOBAL%$current_rating$ = %i(7)	:i $mod$$a$ = %GLOBAL%$current_rating$$b$ = %i(2)	:i if (%GLOBAL%$mod$ = %i(0))		:i $FormatText$$textname$ = $rating_text$^[b283ed85]^$a$ = (%GLOBAL%$current_rating$ / %i(2))$decimalplaces$ = %i(0)	:i else 		:i %GLOBAL%$decimal_rating$ = (%GLOBAL%$current_rating$ / %f(2.0))		:i $FormatText$$textname$ = $rating_text$^[b283ed85]^$a$ = %GLOBAL%$decimal_rating$$decimalplaces$ = %i(1)	:i endif	:i $getsonginfo$	:i $jam_ratesong_dialog$.$se_setprops$:s{$song_name_text$ = (~$jam_selected_song$)$artist_name_text$ = %GLOBAL%$artist$$rating_number_text$ = %GLOBAL%$rating_text$:s}	:i $ghtunes_rate_song_draw_album_cover$	:i $new_menu$:s{		:i $scrollid$ = $scrolling_ratesong$		:i $vmenuid$ = $vmenu_ratesong$		:i $menu_pos$ = %vec2(0.0,0.0)		:i $use_backdrop$ = %i(0)		:i $default_colors$ = %i(0)		:i $exclusive_device$ = %GLOBAL%$controller$		:i $event_handlers$ = :a{			:i :s{$pad_up$$jam_ratesong_updown$$params$ = :s{$up$:s}:s}			:i :s{$pad_down$$jam_ratesong_updown$$params$ = :s{$down$:s}:s}			:i :s{$pad_circle$$jam_ratesong_continue$$params$ = :s{$skip$:s}:s}			:i :s{$pad_choose$$jam_ratesong$:s}			:i :s{$pad_start$$jam_ratesong$:s}		:i :a}		:i $menu_parent$ = $jam_ratesong_dialog$	:i :s}	:i $add_user_control_helper$${		StructQBStringQs text = b73cb78f		StructQBKey button = green		StructInt z = 100	}$		:i $add_user_control_helper$${		StructQBStringQs text = 0x784c64ff		StructQBKey button = red		StructInt z = 100	}$		:i $LaunchEvent$${		StructQBKey type = focus		StructQBKey target = vmenu_ratesong	}$		:i endfunction]Script ghtunes_rate_song_draw_album_cover 0x545a6454 [	:i $remove_missing_album_cover_textures$${StructQBKey album_cover_global = musicstudio_current_album_art}$	:i $cas_band_logo_update$$album_art$$band_logo$ = (~$musicstudio_current_album_art$)	:i $PushAssetContext$$context$ = (~$CAS_Band_Logo_Details$->$assetcontext$)	:i if $ScreenElementExists$${StructQBKey id = jam_rate_song_album_cover}$		:i $DestroyScreenElement$${StructQBKey id = jam_rate_song_album_cover}$	:i endif	:i $CreateScreenElement$:s{		:i $type$ = $SpriteElement$		:i $parent$ = $jam_ratesong_dialog$		:i $id$ = $jam_rate_song_album_cover$		:i $texture$ = (~$CAS_Band_Logo_Details$->$textureasset$)		:i $dims$ = %vec2(300.0,300.0)		:i $Pos$ = %vec2(303.0,302.0)		:i $just$ = :a{$center$$center$:a}		:i $z_priority$ = %i(60)	:i :s}	:i $PopAssetContext$	:i endfunction]Script jam_ratesong_updown 0x5eb74ba4 [	:i $jam_ratesong_dialog$.$gettags$	:i if $GotParam$${StructQBKey up}$		:i $UI_SFX$${			StructQBKey menustate = jammode			StructQBKey uitype = ScrollUp		}$				:i %GLOBAL%$current_rating$ = (%GLOBAL%$current_rating$ + %i(1))		:i $jam_ratesong_dialog$.$se_setprops$${			StructFloat up_arrow_scale = 1.2999999523162842			StructQBKey relative_scale		}$				:i $jam_ratesong_dialog$.$se_setprops$${			StructFloat up_arrow_scale = 1.00			StructQBKey relative_scale			StructFloat time = 0.10000000149011612		}$				:i if (%GLOBAL%$current_rating$ > %i(10))			:i %GLOBAL%$current_rating$ = %i(10)		:i endif	:i elseif $GotParam$${StructQBKey down}$		:i $UI_SFX$${			StructQBKey menustate = jammode			StructQBKey uitype = ScrollDown		}$				:i %GLOBAL%$current_rating$ = (%GLOBAL%$current_rating$ - %i(1))		:i $jam_ratesong_dialog$.$se_setprops$${			StructFloat down_arrow_scale = 1.2999999523162842			StructQBKey relative_scale		}$				:i $jam_ratesong_dialog$.$se_setprops$${			StructFloat down_arrow_scale = 1.00			StructQBKey relative_scale			StructFloat time = 0.10000000149011612		}$				:i if (%GLOBAL%$current_rating$ < %i(1))			:i %GLOBAL%$current_rating$ = %i(1)		:i endif	:i endif	:i $lit_color$ = :a{%i(255)%i(255)%i(255)%i(255):a}	:i $base_rating$ = (%GLOBAL%$current_rating$ / %i(2))	:i $CastToInteger$${StructQBKey base_rating}$	:i $mod$$a$ = %GLOBAL%$current_rating$$b$ = %i(2)	:i $fraction$ = %GLOBAL%$mod$	:i %GLOBAL%$i$ = %i(1)	:i while 	:i $FormatText$$checksumname$ = $star_id$%s("alias_star_on%a")$a$ = %GLOBAL%$i$	:i if $jam_ratesong_dialog$.$desc_resolvealias$$name$ = %GLOBAL%$star_id$		:i if (%GLOBAL%$base_rating$ >= %GLOBAL%$i$)			:i %GLOBAL%$resolved_id$.$setprops$$texture$ = $one_star_lrg_full$$rgba$ = %GLOBAL%$lit_color$		:i elseif ((%GLOBAL%$base_rating$ + %i(1)) = %GLOBAL%$i$)			:i if (%GLOBAL%$fraction$ = %i(0))				:i %GLOBAL%$resolved_id$.$setprops$$texture$ = $one_star_lrg_off$$rgba$ = :a{%i(255)%i(255)%i(255)%i(0):a}			:i else 				:i %GLOBAL%$resolved_id$.$setprops$$texture$ = $one_star_lrg_half$$rgba$ = %GLOBAL%$lit_color$			:i endif		:i elseif ((%GLOBAL%$base_rating$ + %i(1)) < %GLOBAL%$i$)			:i %GLOBAL%$resolved_id$.$setprops$$texture$ = $one_star_lrg_off$$rgba$ = :a{%i(255)%i(255)%i(255)%i(0):a}		:i endif	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %i(5)	:i if $jam_ratesong_dialog$.$desc_resolvealias$${StructQBKey name = alias_rating_words}$		:i switch (%GLOBAL%$current_rating$)			:i case %i(1)				:i %GLOBAL%$new_text$ = ^[2f1a8159]^				:i endcase			case %i(2)				:i %GLOBAL%$new_text$ = ^[c341ca3a]^				:i endcase			case %i(3)				:i %GLOBAL%$new_text$ = ^[e31d1f5e]^				:i endcase			case %i(4)				:i %GLOBAL%$new_text$ = ^[b810c386]^				:i endcase			case %i(5)				:i %GLOBAL%$new_text$ = ^[e30f2bec]^				:i endcase			case %i(6)				:i %GLOBAL%$new_text$ = ^[2538c776]^				:i endcase			case %i(7)				:i %GLOBAL%$new_text$ = ^[2d61429d]^				:i endcase			case %i(8)				:i %GLOBAL%$new_text$ = ^[71b8c195]^				:i endcase			case %i(9)				:i %GLOBAL%$new_text$ = ^[84476889]^				:i endcase			case %i(10)				:i %GLOBAL%$new_text$ = ^[cee92ae3]^		:i end_switch		:i %GLOBAL%$resolved_id$.$setprops$$text$ = %GLOBAL%$new_text$	:i endif	:i $jam_ratesong_dialog$.$settags$:s{$current_rating$ = %GLOBAL%$current_rating$:s}	:i endfunction]Script jam_ratesong 0x162731c1 [	:i $NetSessionFunc$${StructQBKey func = stats_init}$	:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs a2096430	}$		:i if NOT $NetSessionFunc$${StructQBKey func = is_ghtunes_lobby_available}$		:i $printf$${			StructQBKey channel = musicstudio			StructQBStringQs 0x892437f3		}$				:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i $show_ghtunes_connecting_popup$		:i %GLOBAL%$timeout$ = %f(20.0)		:i $ResetTimer$		:i while 		:i if $NetSessionFunc$${StructQBKey func = is_ghtunes_lobby_available}$			:i $printf$${				StructQBKey channel = musicstudio				StructQBStringQs 0x903f06b2			}$						:i $destroy_dialog_box$			:i continue		:i else 			:i if (%GLOBAL%$is_connecting$ = %i(0))				:i $printf$${					StructQBKey channel = musicstudio					StructQBStringQs df7e9075				}$								:i $destroy_dialog_box$				:i $jam_ratesong_continue$				:i return 			:i endif		:i endif		:i if $TimeGreaterThan$%GLOBAL%$timeout$			:i $printf$${				StructQBKey channel = musicstudio				StructQBStringQs c665a134			}$						:i $destroy_dialog_box$			:i $jam_ratesong_continue$			:i return 		:i endif		:i $printf$${			StructQBKey channel = musicstudio			StructQBStringQs ed48f2f7		}$				:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i loop_to 	:i endif	:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs f453c3b6	}$		:i $UI_SFX$${		StructQBKey menustate = jammode		StructQBKey uitype = select	}$		:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs 0x73cbdf79	}$		:i $LaunchEvent$${		StructQBKey type = unfocus		StructQBKey target = vmenu_ratesong	}$		:i $jam_upload_song_dialog$${		StructInt dialog = 5		StructInt ghtunes = 1	}$		:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs 0x6ad0ee38	}$		:i $jam_ratesong_dialog$.$gettags$	:i $RateUserContent$$rating$ = (%GLOBAL%$current_rating$%i(4294967295))	:i endfunction]Script jam_ratesong_completed cef703e5 [	:i $getsonginfo$	:i %GLOBAL%$new_array$ = ((~$jam_songs_rated_this_session$) + (%GLOBAL%$file_id$->$file_id$))	:i $change$$jam_songs_rated_this_session$ = %GLOBAL%$new_array$	:i $jam_upload_song_dialog_destroy$	:i $jam_ratesong_continue$	:i endfunction]Script jam_ratesong_failed f3c8a310 [	:i $jam_upload_song_dialog_destroy$	:i if $GotParam$${StructQBKey fail_type}$		:i if (%GLOBAL%$fail_type$ = %i(1))			:i $msg_txt$ = (~$rating_failed_nonexistant_song_txt$)		:i endif	:i else 		:i if $IsPS3$			:i $msg_txt$ = ^[b9836f21]^		:i else 			:i $msg_txt$ = ^[dc6bc164]^		:i endif	:i endif	:i $create_dialog_box$:s{		:i $body_text$ = %GLOBAL%$msg_txt$		:i $options$ = :a{			:i :s{				:i $func$ = $jam_ratesong_continue$				:i $text$ = ^[182f0173]^			:i :s}		:i :a}	:i :s}	:i endfunction]Script jam_ratesong_continue b65fe001 [	:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs b37c9bb8	}$		:i $destroy_dialog_box$	:i if $GotParam$${StructQBKey skip}$		:i %GLOBAL%$skip$ = %i(1)	:i else 		:i %GLOBAL%$skip$ = %i(0)	:i endif	:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs 0x9851c87b	}$		:i if $ui_event_exists_in_stack$${StructString name = "songlist"}$		:i $printf$${			StructQBKey channel = musicstudio			StructQBStringQs 0x814af93a		}$				:i $change$${StructInt songtime_paused = 0}$		:i $clean_up_user_control_helpers$	:i endif	:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs ce0b6ffd	}$		:i $jam_ratesong_check_continue$$skip$ = %GLOBAL%$skip$	:i endfunction]Script jam_ratesong_check_continue bdb8190e [	${StructInt skip = 0}$	:i $change$${StructInt songtime_paused = 0}$	:i $printf$${		StructQBKey channel = musicstudio		StructQBStringQs 0x2f4477d9	}$		:i if $ui_event_exists_in_stack$${StructString name = "jam"}$		:i $printf$${			StructQBKey channel = musicstudio			StructQBStringQs 0x0469241a		}$				:i $ui_memcard_autosave$${StructQBKey state = UIstate_jam}$		:i if (%GLOBAL%$skip$ = %i(1))			:i $UI_SFX$${				StructQBKey menustate = jammode				StructQBKey uitype = select			}$					:i endif	:i elseif $ui_event_exists_in_stack$${StructString name = "songlist"}$		:i $printf$${			StructQBKey channel = musicstudio			StructQBStringQs 0x1d72155b		}$				:i $jam_quickplay_do_next_song$$is_definitely_last_song$ = (~$jam_ratesong_is_definitely_last_song$)	:i endif	:i endfunction]Script jam_ratesong_check_for_rating fbe5e452 [	${StructInt is_definitely_last_song = 1}$	:i $change$$jam_ratesong_is_definitely_last_song$ = %GLOBAL%$is_definitely_last_song$	:i $getsonginfo$	:i if NOT $GotParam$${StructQBKey downloaded}$		:i %GLOBAL%$downloaded$ = %i(0)	:i endif	:i if (~$g_songlist_beginning_playlist_size$ > %i(1))		:i $jam_ratesong_check_continue$		:i return 	:i endif	:i if $GotParam$${StructQBKey from_setlist}$		:i if (~$last_track_song$ !== $jamsession$)			:i %GLOBAL%$downloaded$ = %i(0)		:i endif	:i endif	:i if (%GLOBAL%$downloaded$ = %i(1))		:i %GLOBAL%$song_is_rated$ = %i(0)		:i %GLOBAL%$rated_ids$ = ~$jam_songs_rated_this_session$		:i $GetArraySize$%GLOBAL%$rated_ids$		:i %GLOBAL%$i$ = %i(0)		:i while 		:i if (%GLOBAL%$array_size$ = %i(0))			:i continue		:i endif		:i if (((%GLOBAL%$rated_ids$:a{%GLOBAL%$i$:a}) = ((%GLOBAL%$file_id$->$file_id$):a{%i(0):a})) AND ((%GLOBAL%$rated_ids$:a{%GLOBAL%$i$ + %i(1):a}) = ((%GLOBAL%$file_id$->$file_id$):a{%i(1):a})))			:i %GLOBAL%$song_is_rated$ = %i(1)			:i continue		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(2))		:i loop_to (%GLOBAL%$array_size$ / %i(2))		:i %GLOBAL%$singed_in$ = %i(0)		:i if $CheckForSignin$$controller_index$ = (~$primary_controller$)$network_platform_only$			:i %GLOBAL%$singed_in$ = %i(1)		:i endif		:i if ((%GLOBAL%$song_is_rated$ = %i(0)) AND (%GLOBAL%$singed_in$ = %i(1)))			:i $UI_SFX$${				StructQBKey menustate = generic				StructQBKey uitype = select			}$						:i $ui_event_wait$${				StructQBKey event = menu_replace				StructStruct Data				{					StructHeader					{						StructQBKey state = uistate_jam_ratesong					}				}			}$					:i else 			:i $jam_ratesong_check_continue$		:i endif	:i else 		:i $jam_ratesong_check_continue$	:i endif	:i endfunction]