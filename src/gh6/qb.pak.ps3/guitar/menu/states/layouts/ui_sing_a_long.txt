Unknown [1c00000000000000000010340000000000000000]SectionQBKey in_sing_a_long falseScript ui_init_sing_a_long 0x9883653c [	:i $change$${StructInt respond_to_signin_changed = 0}$	:i $change$${StructQBKey respond_to_signin_changed_func = ui_signin_changed_func}$	:i $change$${StructQBKey in_sing_a_long = true}$	:i if NOT $GotParam$${StructQBKey venue}$		:i $venue$ = ~$current_level$	:i endif	:i $CreateScreenElement$:s{		:i $type$ = $ContainerElement$		:i $id$ = $sing_a_long_container$		:i $parent$ = $root_window$		:i $pos_anchor$ = :a{$left$$top$:a}		:i $just$ = :a{$left$$top$:a}		:i $dims$ = %vec2(1280.0,720.0)		:i $tags$ = :s{			:i $back_state$ = %GLOBAL%$back_state$			:i $song$ = %GLOBAL%$song$			:i $venue$ = %GLOBAL%$venue$			:i $game_mode$ = (~$game_mode$)			:i $cheat_invincible$ = (~$cheat_invincible$)			:i $disable_all_starpower$ = (~$disable_all_starpower$)			:i $num_mics_plugged_in$ = %i(0)		:i :s}		:i $event_handlers$ = :a{			:i :s{$pad_circle$$ui_sing_a_long_back$:s}		:i :a}	:i :s}	:i $add_user_control_helper$:s{		:i $override_parent$ = $sing_a_long_container$		:i $button$ = $red$$text$ = ^[67d9c56d]^		:i $Pos$ = %vec2(0.0,-72.0)		:i $just$ = :a{$center$$top$:a}		:i $pos_anchor$ = :a{$center$$bottom$:a}		:i $controller$ = (~$primary_controller$)		:i $all_buttons$	:i :s}	:i $i$ = %i(1)	:i while 	:i $PlayerInfoStore$%GLOBAL%$i$	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %i(4)	:i $i$ = %i(1)	:i while 	:i $SetPlayerInfo$%GLOBAL%$i$$part$ = $Vocals$	:i $SetPlayerInfo$%GLOBAL%$i$$scoring$ = %i(0)	:i $SetPlayerInfo$%GLOBAL%$i$$vocals_highway_view$ = $karaoke$	:i $SetPlayerInfo$%GLOBAL%$i$$in_game$ = %i(1)	:i $SetPlayerInfo$%GLOBAL%$i$$difficulty$ = $beginner$	:i $SetPlayerInfo$%GLOBAL%$i$$controller$ = (%GLOBAL%$i$ - %i(1))	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %i(4)	:i $change$${StructQBKey game_mode = quickplay}$	:i $change$${StructInt cheat_invincible = 1}$	:i $change$${StructInt disable_all_starpower = 1}$	:i $Playlist_Clear$	:i $Playlist_AddSong$$song$ = %GLOBAL%$song$	:i $change$$g_band_lobby_current_level$ = %GLOBAL%$venue$	:i $kill_all_achievement_scripts$	:i $sing_a_long_container$.$obj_spawnscript$${StructQBKey ui_sing_a_long_spawned}$	:i endfunction]Script ui_create_sing_a_long ffffffff [	:i endfunction]Script ui_destroy_sing_a_long ffffffff [	:i endfunction]Script ui_deinit_sing_a_long ee8b2204 [	:i $sing_a_long_container$.$gettags$	:i $i$ = %i(1)	:i while 	:i $PlayerInfoReStore$%GLOBAL%$i$	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %i(4)	:i if (~$invite_controller$ = %i(4294967295))		:i $ui_sing_a_long_remove_controllers_in_game$	:i endif	:i $sanity_check_fix_deleted_characters$	:i $change$$game_mode$ = %GLOBAL%$game_mode$	:i $change$$cheat_invincible$ = %GLOBAL%$cheat_invincible$	:i $change$$disable_all_starpower$ = %GLOBAL%$disable_all_starpower$	:i $DestroyScreenElement$${StructQBKey id = sing_a_long_container}$	:i $destroy_dialog_box$	:i $change$${StructQBKey in_sing_a_long = false}$	:i endfunction]Script ui_sing_a_long_spawned aab2a10e [	:i $setscriptcannotpause$	:i $gettags$	:i $printstruct$ isNull $channel$ = $Lars$	:i $ui_event_wait_for_safe$	:i while 	:i if $persistent_band_finished_building$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i $ui_event_block$${		StructQBKey event = menu_change		StructStruct Data		{			StructHeader			{				StructQBKey state = uistate_play_song			}		}	}$		:i while 	:i if $ui_event_exists_in_stack$${StructString name = "gameplay"}$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i $ui_event_wait_for_safe$	:i $startrendering$	:i $LaunchEvent$${		StructQBKey type = focus		StructQBKey target = sing_a_long_container	}$		:i $wait$${		StructInt 1		StructQBKey second	}$		:i while 	:i if $ScreenElementExists$${StructQBKey id = Vignette_of_failure}$		:i $Vignette_of_failure$.$se_setprops$${StructQBKey hide}$	:i endif	:i if $ScreenElementExists$${StructQBKey id = hud_root}$		:i $hud_root$.$se_setprops$${StructQBKey hide}$	:i endif	:i %GLOBAL%$player$ = %i(1)	:i while 	:i $VocalsHighway_GetId$$player$ = %GLOBAL%$player$	:i if $ScreenElementExists$$id$ = %GLOBAL%$vocals_highway_id$		:i %GLOBAL%$vocals_highway_id$.$se_setprops$$hide$	:i endif	:i %GLOBAL%$player$ = (%GLOBAL%$player$ + %i(1))	:i loop_to %i(4)	:i $change$${StructInt cheat_invincible = 1}$	:i $ResumeControllerChecking$	:i $ui_sing_a_long_reinit_mics$	:i $ui_sing_a_long_add_controllers_in_game$	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i endfunction]Script ui_sing_a_long_check_disconnect 0x4c632ac3 [	:i $get_num_mics_plugged_in$	:i $controllers$ = %i(0)	:i $i$ = %i(0)	:i while 	:i if $IsControllerPluggedIn$$controller$ = %GLOBAL%$i$		:i $controllers$ = (%GLOBAL%$controllers$ + %i(1))	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %i(4)	:i if (%GLOBAL%$num_mics_plugged_in$ = %i(0) OR %GLOBAL%$controllers$ = %i(0))		:i if NOT $ScreenElementExists$${StructQBKey id = dialog_box_desc_id}$			:i $sing_a_long_container$.$se_setprops$${StructQBKey block_events}$			:i $gh_pause_game$			:i $options$ = :a{				:i :s{					:i $func$ = $ui_sing_a_long_popup_back$					:i $text$ = ^[67d9c56d]^					:i $sound_func$ = $NullScript$				:i :s}				:i :s{					:i $func$ = $ui_sing_a_long_resume$					:i $text$ = ^[0e41fe46]^					:i $sound_func$ = $NullScript$				:i :s}			:i :a}			:i $create_dialog_box$:s{				:i $heading_text$ = ^[aa163738]^				:i $body_text$ = ^[00000000]^				:i $options$ = %GLOBAL%$options$				:i $dlg_z_priority$ = %i(1000)				:i $use_all_controllers$ = %i(1)			:i :s}			:i $clean_up_user_control_helpers$			:i $add_user_control_helper$${				StructQBStringQs text = c18d5e76				StructQBKey button = green				StructInt z = 1000000				StructQBKey all_buttons			}$						:i $dialog_box_desc_id$.$obj_spawnscript$${StructQBKey ui_sing_a_long_check_disconnect_update}$		:i endif	:i endif	:i endfunction]Script ui_sing_a_long_check_disconnect_update ab110eaf [	:i $old_text$ = ^[00000000]^	:i while 	:i $get_num_mics_plugged_in$	:i $controllers$ = %i(0)	:i $i$ = %i(0)	:i while 	:i if $IsControllerPluggedIn$$controller$ = %GLOBAL%$i$		:i $controllers$ = (%GLOBAL%$controllers$ + %i(1))	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %i(4)	:i if (%GLOBAL%$num_mics_plugged_in$ = %i(0))		:i if $IsXenon$			:i if (%GLOBAL%$controllers$ > %i(0))				:i $text$ = ^[462b4cd5]^			:i else 				:i $text$ = ^[97b603ee]^			:i endif		:i else 			:i if (%GLOBAL%$controllers$ > %i(0))				:i $text$ = ^[c5324d0f]^			:i else 				:i $text$ = ^[5474f973]^			:i endif		:i endif	:i elseif (%GLOBAL%$controllers$ = %i(0))		:i if $IsXenon$			:i $text$ = ^[cd6424e0]^		:i else 			:i $text$ = ^[66e1f5cd]^		:i endif	:i else 		:i if $IsXenon$			:i $text$ = ^[cfd0f5ac]^		:i else 			:i $text$ = ^[559caf37]^		:i endif	:i endif	:i if NOT (%GLOBAL%$old_text$ = %GLOBAL%$text$)		:i $se_setprops$:s{$dlog_body_text$ = %GLOBAL%$text$:s}		:i $old_text$ = %GLOBAL%$text$	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i endfunction]Script ui_sing_a_long_popup_back 0x85f094ac [	:i $sing_a_long_container$.$obj_spawnscript$${StructQBKey ui_sing_a_long_back}$	:i endfunction]Script ui_sing_a_long_resume 0x15189f44 [	:i $get_num_mics_plugged_in$	:i if (%GLOBAL%$num_mics_plugged_in$ = %i(0))		:i $menu_scroll_end_sound$		:i return 	:i endif	:i $UI_SFX$${		StructQBKey menustate = generic		StructQBKey uitype = back	}$		:i $gh_unpause_game$	:i $sing_a_long_container$.$se_setprops$${StructQBKey unblock_events}$	:i $destroy_dialog_box$	:i endfunction]Script ui_sing_a_long_back e813fae8 [	:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $UI_SFX$${		StructQBKey menustate = generic		StructQBKey uitype = back	}$		:i $se_setprops$${StructQBKey block_events}$	:i $songlist_clear_playlist$	:i $getsingletag$${StructQBKey back_state}$	:i if NOT $GotParam$${StructQBKey back_state}$		:i $back_state$ = $uistate_mainmenu$	:i endif	:i $ui_event_wait_for_safe$	:i $StopSound$${		StructQBString g_Current_Crowd_Anticipation		StructInt fade_time = 3		StructQBKey fade_type = log_slow	}$		:i $generic_event_back$$state$ = %GLOBAL%$back_state$	:i endfunction]Script ui_sing_a_long_start ddac5273 [	:i $SetSpawnInstanceLimits$${		StructInt max = 1		StructQBKey management = ignore_spawn_request	}$		:i $UI_SFX$${		StructQBKey menustate = generic		StructQBKey uitype = select	}$		:i if NOT $GotParam$${StructQBKey venue}$		:i $venue$ = ~$current_level$	:i endif	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				song			]		}		StructQBKey all	}$		:i $ui_event_get_top$	:i $FormatText$$checksumname$ = $back_state$%s("uistate_%b")$b$ = %GLOBAL%$base_name$	:i $generic_event_choose$$state$ = $uistate_sing_a_long$$Data$ = :s{$song$ = %GLOBAL%$song$$venue$ = %GLOBAL%$venue$$back_state$ = %GLOBAL%$back_state$:s}	:i endfunction]Script ui_sing_a_long_songlist 0x5ea4cd53 [	:i $UI_SFX$${		StructQBKey menustate = generic		StructQBKey uitype = select	}$		:i $se_setprops$${StructQBKey block_events}$	:i $change$${StructString current_leaderboard_instrument = "mic"}$	:i $songlist_clear_playlist$	:i $change$${StructQBKey game_mode = career}$	:i $set_primary_controller$:s{		:i $device_num$ = %GLOBAL%$device_num$		:i $require_signin$ = %i(0)		:i $state$ = $UIState_songlist$		:i $Data$ = :s{			:i $mode$ = $sing_a_long$			:i $device_num$ = %GLOBAL%$device_num$			:i $exclusive_device$ = %GLOBAL%$device_num$		:i :s}	:i :s}	:i endfunction]Script ui_sing_a_long_reinit_mics ed87f3b9 [	:i $getsingletag$${StructQBKey num_mics_plugged_in}$	:i $previous_num_mics_plugged_in$ = %GLOBAL%$num_mics_plugged_in$	:i $get_num_mics_plugged_in$	:i if NOT (%GLOBAL%$num_mics_plugged_in$ = %GLOBAL%$previous_num_mics_plugged_in$)		:i $vocals_reset_mics$		:i if $IsPS3$			:i $i$ = %i(1)			:i while 			:i $ui_sing_a_long_assign_mic$$player$ = %GLOBAL%$i$$mic_type$ = $any_mic$			:i $i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %i(4)		:i else 			:i $ui_sing_a_long_get_controllers_with_headsets$			:i $ui_sing_a_long_get_num_mics$			:i $total_mics$ = %GLOBAL%$num_mics$			:i $count$ = %i(0)			:i if (%GLOBAL%$total_mics$ > %i(0))				:i $i$ = %i(0)				:i while 				:i if (%GLOBAL%$count$ >= %GLOBAL%$total_mics$)					:i continue				:i endif				:i if NOT $ArrayContains$$array$ = %GLOBAL%$controllers_with_headsets$$contains$ = %GLOBAL%$i$					:i $ui_sing_a_long_assign_mic$$player$ = (%GLOBAL%$i$ + %i(1))$mic_type$ = $any_mic$					:i $num_mics$ = (%GLOBAL%$num_mics$ - %i(1))					:i $count$ = (%GLOBAL%$count$ + %i(1))				:i endif				:i $i$ = (%GLOBAL%$i$ + %i(1))				:i loop_to %i(4)			:i endif			:i $GetArraySize$%GLOBAL%$controllers_with_headsets$			:i if (%GLOBAL%$array_size$ > %i(0))				:i %GLOBAL%$index$ = (%GLOBAL%$array_size$ - %i(1))				:i while 				:i if (%GLOBAL%$num_mics$ = %i(0) OR %GLOBAL%$count$ >= %i(4))					:i continue				:i endif				:i $i$ = (%GLOBAL%$controllers_with_headsets$:a{%GLOBAL%$index$:a})				:i $RemoveArrayElement$$array$ = %GLOBAL%$controllers_with_headsets$$index$ = %GLOBAL%$index$				:i %GLOBAL%$controllers_with_headsets$ = %GLOBAL%$array$				:i $ui_sing_a_long_assign_mic$$player$ = (%GLOBAL%$i$ + %i(1))$mic_type$ = $any_mic$				:i $num_mics$ = (%GLOBAL%$num_mics$ - %i(1))				:i $count$ = (%GLOBAL%$count$ + %i(1))				:i $index$ = (%GLOBAL%$index$ - %i(1))				:i loop_to %GLOBAL%$array_size$				:i $GetArraySize$%GLOBAL%$controllers_with_headsets$				:i if (%GLOBAL%$array_size$ > %i(0))					:i %GLOBAL%$index$ = %i(0)					:i while 					:i if (%GLOBAL%$count$ >= %i(4))						:i continue					:i endif					:i $i$ = (%GLOBAL%$controllers_with_headsets$:a{%GLOBAL%$index$:a})					:i %GLOBAL%$controllers_with_headsets$ = %GLOBAL%$array$					:i $ui_sing_a_long_assign_mic$$player$ = (%GLOBAL%$i$ + %i(1))$mic_type$ = $headset$					:i $count$ = (%GLOBAL%$count$ + %i(1))					:i $index$ = (%GLOBAL%$index$ + %i(1))					:i loop_to %GLOBAL%$array_size$				:i endif			:i endif		:i endif		:i $settags$$num_mics_plugged_in$ = %GLOBAL%$num_mics_plugged_in$	:i endif	:i endfunction]Script ui_sing_a_long_assign_mic e542f066 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player				mic_type			]		}		StructQBKey all	}$		:i $vocals_safely_assign_mic$$player$ = %GLOBAL%$player$$mic_type$ = %GLOBAL%$mic_type$	:i $VocalsInput_ReinitMic$$player$ = %GLOBAL%$player$	:i $mic_set_device_volume$$player$ = %GLOBAL%$player$$micvolume$ = %i(7)	:i endfunction]Script ui_sing_a_long_get_num_mics 0x679720d5 [	:i $mic$ = %i(0)	:i $num_mics$ = %i(0)	:i while 	:i if $IsMicrophonePluggedIn$$number$ = %GLOBAL%$mic$		:i %GLOBAL%$num_mics$ = (%GLOBAL%$num_mics$ + %i(1))	:i endif	:i %GLOBAL%$mic$ = (%GLOBAL%$mic$ + %i(1))	:i loop_to %i(4)	:i return $num_mics$ = %GLOBAL%$num_mics$	:i endfunction]Script ui_sing_a_long_get_controllers_with_headsets f37836a3 [	:i if $IsPS3$		:i return ${			StructArray controllers_with_headsets			{				Floats [0.00000, 0.00000]			}		}$			:i endif	:i $array$ = :a{:a}	:i $controller$ = %i(0)	:i while 	:i if $controller_has_headset$$controller$ = %GLOBAL%$controller$		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$controller$	:i endif	:i $controller$ = (%GLOBAL%$controller$ + %i(1))	:i loop_to %i(4)	:i return $controllers_with_headsets$ = %GLOBAL%$array$	:i endfunction]Script ui_sing_a_long_add_controllers_in_game 0x915eb913 [	:i $ui_sing_a_long_remove_controllers_in_game$	:i $add_active_controllers_local$	:i endfunction]Script ui_sing_a_long_remove_controllers_in_game bb042068 [	:i $NetSessionFunc$${StructQBKey func = removeallcontrollers}$	:i endfunction]