Unknown [1c00000000000000000023980000000000000000]SectionInteger DEBUG_FORCE_VOTE 0SectionInteger NUM_LIST_ENTRIES 7SectionInteger g_received_final_vote_counts 0Script ui_create_voting 0x73c54210 [	:i $destroy_friend_feed$	:i if $InNetGame$		:i $spawn_player_drop_listeners$${			StructQBKey drop_player_script = voting_drop_player			StructQBKey end_game_script = voting_end_game		}$			:i endif	:i $spawnscriptnow$${StructQBKey audio_ui_menu_music_on}$	:i $spawnscriptnow$${		StructQBKey SFX_Backgrounds_New_Area		StructStruct params		{			StructHeader			{				StructQBKey BG_SFX_Area = FrontEnd_Menu_Music				StructInt fadeouttime = 5				StructQBKey fadeouttype = linear			}		}	}$		:i $spawnscriptnow$${StructQBKey audio_crowd_neutral_crowd_wait_to_lower_stats}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				voting_items_array			]		}		StructQBKey all	}$		:i $CreateScreenElement$${		StructQBKey id = VotingInterface		StructQBKey parent = root_window		StructQBKey type = descinterface		StructString desc = "generic_voting"		StructFloat z_priority = 20.00		StructFloat alpha = 0.00		StructArray just		{			ArrayQBKey			[				left				top			]		}		StructFloatX2 Pos		{			Floats [0.00000, 0.00000]		}		StructQBKey autosizedims = false		StructFloatX2 dims		{			Floats [1280.00, 720.000]		}		StructStruct tags		{			StructHeader			{				StructInt left_vote_count = 0				StructInt right_vote_count = 0			}		}	}$		:i if $VotingInterface$.$desc_resolvealias$${			StructQBKey name = alias_vote_badge_1			StructQBKey param = rot_badges		}$				:i %GLOBAL%$rot_badges$.$obj_spawnscript$$ui_badge_rotator$	:i endif	:i if $VotingInterface$.$desc_resolvealias$${			StructQBKey name = alias_vote_badge_2			StructQBKey param = rot_badges		}$				:i %GLOBAL%$rot_badges$.$obj_spawnscript$$ui_badge_rotator$	:i endif	:i $change$${		StructArray g_vote_counts		{			ArrayInteger			[				0				0			]		}	}$		:i $change$${StructInt g_received_final_vote_counts = 0}$	:i $change$${		StructArray g_controllers_that_voted		{			Floats [0.00000, 0.00000]		}	}$		:i $user_control_helper_get_buttonchar$$button$ = $orange$$controller$ = (~$primary_controller$)	:i $orange_button$ = %GLOBAL%$buttonchar$	:i $user_control_helper_get_buttonchar$$button$ = $blue$$controller$ = (~$primary_controller$)	:i $blue_button$ = %GLOBAL%$buttonchar$	:i $VotingInterface$.$se_setprops$:s{		:i $voting_title_text$ = %GLOBAL%$voting_title$		:i $voting_subtitle_text$ = %GLOBAL%$voting_subtitle$		:i $left_button_text$ = %GLOBAL%$blue_button$		:i $right_button_text$ = %GLOBAL%$orange_button$	:i :s}	:i $GetArraySize$%GLOBAL%$info_list$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $printstruct$ isNull 		:i if $GotParam$${StructQBKey info_list_title}$			:i $printf$${StructQBStringQs b56a311e}$			:i $VotingInterface$.$se_setprops$:s{$optional_info_title_text$ = %GLOBAL%$info_list_title$:s}		:i endif		:i if $VotingInterface$.$desc_resolvealias$${				StructQBKey name = alias_optional_info_list				StructQBKey param = menu_id			}$						:i %GLOBAL%$index$ = %i(0)			:i while 			:i if ((%GLOBAL%$index$ + %i(1)) = ~$NUM_LIST_ENTRIES$)				:i %GLOBAL%$text$ = ^[3871eb3b]^			:i else 				:i %GLOBAL%$text$ = (%GLOBAL%$info_list$:a{%GLOBAL%$index$:a})			:i endif			:i $FormatText$$textname$ = $pos_text$^[c31d83ea]^$i$ = (%GLOBAL%$index$ + %i(1))			:i $CreateScreenElement$:s{				:i $type$ = $TextBlockElement$				:i $parent$ = %GLOBAL%$menu_id$				:i $fit_width$ = $truncate$				:i $fit_height$ = $scale down if larger$				:i $scale_mode$ = $proportional$				:i $text$ = %GLOBAL%$text$				:i $font$ = $fontgrid_title_a1$				:i $autosizedims$ = $false$				:i $just$ = :a{$left$$center$:a}				:i $pos_anchor$ = :a{$left$$top$:a}				:i $internal_just$ = :a{$left$$bottom$:a}				:i $z_priority$ = %i(25)				:i $rgba$ = $GH6_gold$				:i $alpha$ = %f(0.5)				:i $dims$ = %vec2(300.0,30.0)			:i :s}			:i if ((%GLOBAL%$index$ + %i(1)) = ~$NUM_LIST_ENTRIES$)				:i continue			:i endif			:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))			:i loop_to %GLOBAL%$array_size$		:i endif	:i endif	:i if NOT $GotParam$${StructQBKey menu_id}$		:i $scriptassert$${StructString 0x00000000 = "Could not resolve menu for event handlers"}$	:i endif	:i $menu_id$ = %GLOBAL%$resolved_id$	:i $array$ = :a{:a}	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$controller$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to %GLOBAL%$num_players$		:i $controllers_allowed_to_vote$ = %GLOBAL%$array$	:i endif	:i $GetArraySize$%GLOBAL%$voting_items_array$	:i if (%GLOBAL%$array_size$ = %i(3))		:i $VotingInterface$.$settags$:s{$voting_items_array$ = %GLOBAL%$voting_items_array$:s}		:i $left_text$ = (%GLOBAL%$voting_items_array$:a{%i(0):a})		:i $right_text$ = (%GLOBAL%$voting_items_array$:a{%i(1):a})		:i $VotingInterface$.$se_setprops$:s{			:i $left_choice_text$ = (~%GLOBAL%$left_text$->$text$)			:i $right_choice_text$ = (~%GLOBAL%$right_text$->$text$)		:i :s}		:i if (((~$is_network_game$ = %i(0)) OR ($ishost$)) AND ((~$GLOBAL_SHOULD_USE_NET_DEBUGGING$) = %i(1)))			:i $event_handlers$ = :a{				:i :s{$pad_option$$generic_cast_vote$$params$ = :s{$option$ = %i(0):s}:s}				:i :s{$pad_l1$$generic_cast_vote$$params$ = :s{$option$ = %i(1):s}:s}				:i :s{$pad_choose$$debug_choose_mode$:s}			:i :a}		:i else 			:i $event_handlers$ = :a{				:i :s{$pad_option$$generic_cast_vote$$params$ = :s{$option$ = %i(0):s}:s}				:i :s{$pad_l1$$generic_cast_vote$$params$ = :s{$option$ = %i(1):s}:s}			:i :a}		:i endif		:i $clean_up_user_control_helpers$		:i if NOT $InNetGame$			:i $add_user_control_helper$${				StructQBStringQs text = af4d5dd2				StructQBKey button = red				StructInt z = 100000			}$					:i endif		:i $FormatText$$textname$ = $button_helper_string$^[3f014b7b]^$d$ = (~%GLOBAL%$left_text$->$upper_text$)		:i $add_user_control_helper$$text$ = %GLOBAL%$button_helper_string$$button$ = $blue$$z$ = %i(100000)		:i $FormatText$$textname$ = $button_helper_string$^[3f014b7b]^$d$ = (~%GLOBAL%$right_text$->$upper_text$)		:i $add_user_control_helper$$text$ = %GLOBAL%$button_helper_string$$button$ = $orange$$z$ = %i(100000)	:i else 		:i $scriptassert$${StructString 0x00000000 = "Generic voting needs voting_items_array of size 3"}$	:i endif	:i $VotingInterface$.$obj_spawnscriptnow$${StructQBKey update_voting_timer}$	:i %GLOBAL%$menu_id$.$obj_spawnscriptnow$$ui_voting_update$$params$ = :s{$voting_items_array$ = %GLOBAL%$voting_items_array$:s}	:i %GLOBAL%$menu_id$.$se_setprops$$event_handlers$ = %GLOBAL%$event_handlers$$exclusive_device$ = %GLOBAL%$controllers_allowed_to_vote$	:i if $GotParam$${StructQBKey voting_callback}$		:i $VotingInterface$.$settags$$voting_complete_callback$ = %GLOBAL%$voting_callback$	:i endif	:i if $GotParam$${StructQBKey next_state}$		:i $VotingInterface$.$settags$$next_state$ = %GLOBAL%$next_state$	:i endif	:i if $ScreenElementExists$$id$ = %GLOBAL%$menu_id$		:i if $GotParam$${StructQBKey back_script}$			:i if NOT $GotParam$${StructQBKey back_params}$				:i $back_params$ = :s{:s}			:i endif			:i %GLOBAL%$menu_id$.$se_setprops$:s{				:i $event_handlers$ = :a{					:i :s{$pad_back$$UI_SFX$$params$ = :s{$menustate$ = $setlist$$uitype$ = $back$:s}:s}					:i :s{$pad_back$%GLOBAL%$back_script$$params$ = %GLOBAL%$back_params$:s}				:i :a}				:i $exclusive_device$ = %GLOBAL%$controllers_allowed_to_vote$			:i :s}		:i endif	:i endif	:i $AssignAlias$$id$ = %GLOBAL%$menu_id$$alias$ = $current_menu$	:i $enable_ui_visualizer$	:i endfunction]Script ui_destroy_voting f34fb63b [	:i $clean_up_user_control_helpers$	:i $DestroyScreenElement$${StructQBKey id = VotingInterface}$	:i $KillSpawnedScript$${StructQBKey name = audio_gameplay_counter_play_beep_spawn}$	:i $disable_ui_visualizer$	:i endfunction]Script ui_anim_in_voting e16075b6 [	:i $printf$${StructQBStringQs 0x8b7d23e4}$	:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$		:i $VotingInterface$.$se_setprops$${			StructFloat alpha = 1.00			StructFloat time = 0.4000000059604645			StructQBKey motion = ease_out		}$				:i $VotingInterface$.$se_waitprops$		:i $LaunchEvent$${			StructQBKey type = focus			StructQBKey target = current_menu		}$			:i endif	:i endfunction]Script update_voting_timer 0x015ab491 [	:i $obj_getid$	:i if NOT $InInternetMode$		:i %GLOBAL%$ObjID$.$se_setprops$$vote_timer_hand_rgba$ = :a{%i(255)%i(255)%i(255)%i(0):a}		:i return 	:i endif	:i $OnExitRun$$reset_voting_timer$$params$ = :s{$ObjID$ = %GLOBAL%$ObjID$:s}	:i %GLOBAL%$ObjID$.$se_setprops$$timer_rotation$ = %i(360)$time$ = %f(10.0)	:i $wait$${		StructFloat 7.5		StructQBKey seconds	}$		:i %GLOBAL%$ObjID$.$se_setprops$$vote_timer_hand_rgba$ = :a{%i(130)%i(40)%i(40)%i(255):a}	:i $audio_ui_voting_screen_timer$	:i $wait$${		StructFloat 2.5		StructQBKey seconds	}$		:i endfunction]Script reset_voting_timer 0x41a62376 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				ObjID			]		}		StructQBKey all	}$		:i if $ScreenElementExists$$id$ = %GLOBAL%$ObjID$		:i %GLOBAL%$ObjID$.$se_setprops$$vote_timer_hand_rgba$ = :a{%i(255)%i(255)%i(255)%i(0):a}	:i endif	:i endfunction]Script start_bat_animations ffffffff [	:i endfunction]Script bat_animation_loop 0x07db64ea [	:i $obj_getid$	:i $randomwait$ = select(2f,4,01 00 01 00 01 00 01 00) :OFFSET(0):OFFSET(1):OFFSET(2):OFFSET(3)	:POS(0) %i(0)	:BREAKTO(4) 	:POS(1) %f(0.2000000)	:BREAKTO(4) 	:POS(2) %f(0.3000000)	:BREAKTO(4) 	:POS(3) %f(0.4000000)	:POS(4) 	:i $wait$%GLOBAL%$randomwait$$seconds$	:i $randomtime$ =  thaw_4f %vec2(0.5,1.0)	:i $randomoffset$ =  thaw_50 %vec2(10.0,20.0)	:i $offsetup$ = (%GLOBAL%$randomoffset$ * %vec2(0.0,2.0))	:i $offsetdn$ = (%GLOBAL%$randomoffset$ * %vec2(0.0,-2.0))	:i %GLOBAL%$ObjID$.$se_setprops$$Pos$ = :s{(%GLOBAL%$offsetup$ * (%f(0.5)))$relative$:s}$rot_angle$ = %i(0)$time$ = %GLOBAL%$randomtime$$motion$ = $ease_in$	:i while 	:i $randomrot$ = select(2f,5,01 00 01 00 01 00 01 00 01 00) :OFFSET(5):OFFSET(6):OFFSET(7):OFFSET(8):OFFSET(9)	:POS(5) %i(4294967293)	:BREAKTO(10) 	:POS(6) %i(3)	:BREAKTO(10) 	:POS(7) %i(2)	:BREAKTO(10) 	:POS(8) %i(4294967294)	:BREAKTO(10) 	:POS(9) %i(0)	:POS(10) 	:i %GLOBAL%$ObjID$.$se_setprops$$Pos$ = :s{%GLOBAL%$offsetdn$$relative$:s}$rot_angle$ = %GLOBAL%$randomrot$$time$ = %GLOBAL%$randomtime$$motion$ = $ease_out$	:i %GLOBAL%$ObjID$.$se_waitprops$	:i %GLOBAL%$ObjID$.$se_setprops$$Pos$ = :s{%GLOBAL%$offsetup$$relative$:s}$rot_angle$ = %i(0)$time$ = %GLOBAL%$randomtime$$motion$ = $ease_in$	:i %GLOBAL%$ObjID$.$se_waitprops$	:i loop_to 	:i endfunction]Script generic_cast_vote f7fa2600 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				option			]		}		StructQBKey all	}$		:i $printf$${StructQBStringQs 0x20f736cb}$	:i $allowed$ = %i(1)	:i $GetArraySize$(~$g_controllers_that_voted$)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i if (%GLOBAL%$device_num$ = ((~$g_controllers_that_voted$):a{%GLOBAL%$i$:a}))			:i $allowed$ = %i(0)		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i if (%GLOBAL%$allowed$ = %i(1))		:i $array$ = (~$g_controllers_that_voted$)		:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$device_num$		:i $change$$g_controllers_that_voted$ = %GLOBAL%$array$		:i if $InInternetMode$			:i $SendStructure$$callback$ = $cast_vote_callback$$data_to_send$ = :s{$option$ = %GLOBAL%$option$:s}			:i if $ishost$				:i $audio_ui_play_cast_vote_sfx$$option$ = %GLOBAL%$option$				:i $SetArrayElement$$globalarray$$arrayName$ = $g_vote_counts$$index$ = %GLOBAL%$option$$newValue$ = ((~$g_vote_counts$:a{%GLOBAL%$option$:a}) + %i(1))			:i endif		:i else 			:i $audio_ui_play_cast_vote_sfx$$option$ = %GLOBAL%$option$			:i $SetArrayElement$$globalarray$$arrayName$ = $g_vote_counts$$index$ = %GLOBAL%$option$$newValue$ = ((~$g_vote_counts$:a{%GLOBAL%$option$:a}) + %i(1))		:i endif	:i else 		:i $printf$${StructQBStringQs 0x4395d3e0}$	:i endif	:i endfunction]Script ui_voting_update b7af050f [	:i $printf$${StructQBStringQs 0x1f01040c}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				voting_items_array			]		}		StructQBKey all	}$		:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i %GLOBAL%$count$ = %i(0)		:i while 		:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$			:i $VotingInterface$.$getsingletag$${StructQBKey left_vote_count}$			:i $VotingInterface$.$getsingletag$${StructQBKey right_vote_count}$			:i if (%GLOBAL%$left_vote_count$ !== (~$g_vote_counts$:a{%i(0):a}))				:i $VotingInterface$.$se_setprops$${StructFloat vote_display_1_scale = 1.5}$				:i $VotingInterface$.$se_setprops$${					StructFloat vote_display_1_scale = 1.00					StructFloat time = 0.20000000298023224					StructQBKey motion = ease_out				}$							:i endif			:i if (%GLOBAL%$right_vote_count$ !== (~$g_vote_counts$:a{%i(1):a}))				:i $VotingInterface$.$se_setprops$${StructFloat vote_display_2_scale = 1.5}$				:i $VotingInterface$.$se_setprops$${					StructFloat vote_display_2_scale = 1.00					StructFloat time = 0.20000000298023224					StructQBKey motion = ease_out				}$							:i endif			:i $FormatText$$textname$ = $vote0_count$^[48c6d14c]^$d$ = (~$g_vote_counts$:a{%i(0):a})			:i $FormatText$$textname$ = $vote1_count$^[48c6d14c]^$d$ = (~$g_vote_counts$:a{%i(1):a})			:i $VotingInterface$.$se_setprops$:s{				:i $left_count_text$ = %GLOBAL%$vote0_count$				:i $right_count_text$ = %GLOBAL%$vote1_count$			:i :s}			:i $VotingInterface$.$settags$:s{				:i $left_vote_count$ = (~$g_vote_counts$:a{%i(0):a})				:i $right_vote_count$ = (~$g_vote_counts$:a{%i(1):a})			:i :s}		:i endif		:i if (%GLOBAL%$num_players$ = ((~$g_vote_counts$:a{%i(0):a}) + (~$g_vote_counts$:a{%i(1):a})))			:i continue		:i endif		:i if (			:i ((~$g_vote_counts$:a{%i(0):a}) > (%GLOBAL%$num_players$ / %f(2.0))) OR 			:i ((~$g_vote_counts$:a{%i(1):a}) > (%GLOBAL%$num_players$ / %f(2.0)))			:i )			:i continue		:i endif		:i $wait$${			StructFloat 0.25			StructQBKey seconds		}$				:i if $InInternetMode$			:i %GLOBAL%$count$ = (%GLOBAL%$count$ + %i(1))			:i if (%GLOBAL%$count$ > %i(40) OR ~$DEBUG_FORCE_VOTE$ = %i(1))				:i continue			:i endif		:i elseif (~$DEBUG_FORCE_VOTE$ = %i(1))			:i continue		:i endif		:i loop_to 		:i $KillSpawnedScript$${StructQBKey name = audio_ui_voting_screen_timer}$		:i $KillSpawnedScript$${StructQBKey name = audio_gameplay_counter_play_beep_spawn}$		:i $KillSpawnedScript$${StructQBKey name = update_voting_timer}$		:i $voting_update_complete$	:i endif	:i endfunction]Script voting_update_complete 0x332483c3 [	:i $printf$${StructQBStringQs 0x4217906e}$	:i $resolve_voting_outcome$	:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$		:i $VotingInterface$.$getsingletag$${StructQBKey voting_items_array}$		:i if (~$DEBUG_FORCE_VOTE$ = %i(1))			:i $change$${StructInt DEBUG_FORCE_VOTE = 0}$			:i $result$ = (~$g_force_vote$)		:i else 			:i $result$ = (%GLOBAL%$voting_items_array$:a{%GLOBAL%$winner_index$:a})		:i endif		:i %GLOBAL%$vote_tie$ = %i(0)		:i if $GotParam$${StructQBKey winner_index}$			:i if (%GLOBAL%$winner_index$ = %i(2))				:i %GLOBAL%$vote_tie$ = %i(1)			:i endif		:i endif		:i $printstruct$ isNull 		:i if $InInternetMode$			:i if $ishost$				:i $SendStructure$:s{					:i $callback$ = $client_voting_result$					:i $data_to_send$ = :s{						:i $result$ = %GLOBAL%$result$						:i $tie$ = %GLOBAL%$vote_tie$						:i $left_vote_count$ = (~$g_vote_counts$:a{%i(0):a})						:i $right_vote_count$ = (~$g_vote_counts$:a{%i(1):a})					:i :s}				:i :s}				:i $current_menu$.$obj_spawnscriptnow$$display_voting_result_and_exit$$params$ = :s{$result$ = %GLOBAL%$result$$tie$ = %GLOBAL%$vote_tie$:s}			:i endif		:i else 			:i $current_menu$.$obj_spawnscriptnow$$display_voting_result_and_exit$$params$ = :s{$result$ = %GLOBAL%$result$$tie$ = %GLOBAL%$vote_tie$:s}		:i endif	:i endif	:i endfunction]Script client_voting_result 0x37706e6a [	:i $change$${StructInt g_received_final_vote_counts = 1}$	:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$		:i if (%GLOBAL%$left_vote_count$ !== (~$g_vote_counts$:a{%i(0):a}))			:i $SetArrayElement$$globalarray$$arrayName$ = $g_vote_counts$$index$ = %i(0)$newValue$ = %GLOBAL%$left_vote_count$			:i $VotingInterface$.$se_setprops$${StructFloat vote_display_1_scale = 1.5}$			:i $VotingInterface$.$se_setprops$${				StructFloat vote_display_1_scale = 1.00				StructFloat time = 0.20000000298023224				StructQBKey motion = ease_out			}$					:i endif		:i if (%GLOBAL%$right_vote_count$ !== (~$g_vote_counts$:a{%i(1):a}))			:i $SetArrayElement$$globalarray$$arrayName$ = $g_vote_counts$$index$ = %i(1)$newValue$ = %GLOBAL%$right_vote_count$			:i $VotingInterface$.$se_setprops$${StructFloat vote_display_2_scale = 1.5}$			:i $VotingInterface$.$se_setprops$${				StructFloat vote_display_2_scale = 1.00				StructFloat time = 0.20000000298023224				StructQBKey motion = ease_out			}$					:i endif		:i $FormatText$$textname$ = $vote0_count$^[48c6d14c]^$d$ = (~$g_vote_counts$:a{%i(0):a})		:i $FormatText$$textname$ = $vote1_count$^[48c6d14c]^$d$ = (~$g_vote_counts$:a{%i(1):a})		:i $VotingInterface$.$se_setprops$:s{			:i $left_count_text$ = %GLOBAL%$vote0_count$			:i $right_count_text$ = %GLOBAL%$vote1_count$		:i :s}		:i $VotingInterface$.$settags$:s{			:i $left_vote_count$ = (~$g_vote_counts$:a{%i(0):a})			:i $right_vote_count$ = (~$g_vote_counts$:a{%i(1):a})		:i :s}		:i $VotingInterface$.$obj_spawnscriptnow$$display_voting_result_and_exit$$params$ = isNull 	:i endif	:i endfunction]Script resolve_voting_outcome 0x653c34bd [	:i $printf$${StructQBStringQs 0x482c0c6d}$	:i if ((~$g_vote_counts$:a{%i(0):a}) > (~$g_vote_counts$:a{%i(1):a}))		:i return ${StructInt winner_index = 0}$	:i elseif ((~$g_vote_counts$:a{%i(0):a}) < (~$g_vote_counts$:a{%i(1):a}))		:i return ${StructInt winner_index = 1}$	:i else 		:i return ${StructInt winner_index = 2}$	:i endif	:i endfunction]Script display_voting_result_and_exit 0x143c5013 [	:i $printf$${StructQBStringQs 0x242fc4bf}$	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				result				tie			]		}		StructQBKey all	}$		:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$		:i $voting_display_winner$$result$ = %GLOBAL%$result$$tie$ = %GLOBAL%$tie$		:i $wait$${			StructInt 3			StructQBKey seconds		}$				:i $audio_ui_menu_music_off$		:i if (~$current_transition$ = $None$)			:i if NOT $InNetGame$				:i $change$$current_level$ = (~$g_band_lobby_current_level$)				:i $venue$ = (~$g_band_lobby_current_level$)				:i if $StructureContains$$structure$ = (~$LevelZones$->%GLOBAL%$venue$)$name$ = $loading_movie$					:i $create_venue_loading_screen$$movie_params$ = (~$LevelZones$->%GLOBAL%$venue$)				:i else 					:i $create_loading_screen$				:i endif			:i endif		:i else 			:i $stoprendering$		:i endif		:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$			:i if $VotingInterface$.$getsingletag$${StructQBKey voting_complete_callback}$				:i $printf$${StructQBStringQs af67751d}$				:i if NOT $ChecksumEquals$$a$ = %GLOBAL%$voting_complete_callback$$b$ = $null$					:i $printf$${StructQBStringQs 0x8d22404a}$					:i %GLOBAL%$voting_complete_callback$ isNull 				:i endif			:i endif		:i endif		:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$			:i if $VotingInterface$.$getsingletag$${StructQBKey next_state}$				:i $generic_event_replace$$no_sound$$state$ = %GLOBAL%$next_state$			:i endif		:i endif	:i endif	:i endfunction]Script voting_display_winner 0x2290cb10 [	:i $printf$${StructQBStringQs 0x32f3ab6a}$	:i $printstruct$ isNull 	:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$		:i $VotingInterface$.$getsingletag$${StructQBKey voting_items_array}$		:i $GetArraySize$%GLOBAL%$voting_items_array$		:i %GLOBAL%$index$ = %i(0)		:i while 		:i if $ChecksumEquals$$a$ = (%GLOBAL%$voting_items_array$:a{%GLOBAL%$index$:a})$b$ = %GLOBAL%$result$			:i continue		:i endif		:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))		:i loop_to %GLOBAL%$array_size$		:i if (%GLOBAL%$index$ > %i(1))			:i %GLOBAL%$index$ = %i(1)		:i endif		:i if $GotParam$${StructQBKey tie}$			:i if (%GLOBAL%$tie$ = %i(1))				:i $audio_ui_play_voting_outcome_result_sfx$${StructInt winner = 2}$				:i $wait$${					StructFloat 1.5					StructQBKey seconds				}$								:i %GLOBAL%$count$ = %i(0)				:i $wait_time$ = %f(0.0250000)				:i while 				:i $mod$$a$ = %GLOBAL%$count$$b$ = %i(2)				:i if (%GLOBAL%$mod$ = %i(0))					:i $VotingInterface$.$se_setprops$$tie_breaker_flipper_2_alpha$ = %f(0.0)$time$ = (%GLOBAL%$wait_time$ / %i(2))$motion$ = $ease_in$					:i $VotingInterface$.$se_waitprops$				:i else 					:i $VotingInterface$.$se_setprops$$tie_breaker_flipper_1_alpha$ = %f(0.0)$time$ = (%GLOBAL%$wait_time$ / %i(2))$motion$ = $ease_in$					:i $VotingInterface$.$se_waitprops$				:i endif				:i if (%GLOBAL%$mod$ = %i(0))					:i $VotingInterface$.$se_setprops$$tie_breaker_flipper_1_alpha$ = %f(1.0)$time$ = (%GLOBAL%$wait_time$ / %i(2))$motion$ = $ease_out$					:i $VotingInterface$.$se_waitprops$				:i else 					:i $VotingInterface$.$se_setprops$$tie_breaker_flipper_2_alpha$ = %f(1.0)$time$ = (%GLOBAL%$wait_time$ / %i(2))$motion$ = $ease_out$					:i $VotingInterface$.$se_waitprops$				:i endif				:i %GLOBAL%$wait_time$ = (%GLOBAL%$wait_time$ * %f(1.2000000))				:i if ((%GLOBAL%$wait_time$ > %f(0.6000000)) AND (%GLOBAL%$index$ = %GLOBAL%$mod$))					:i continue				:i endif				:i $audio_ui_play_tie_breaker_sfx$$count$ = %GLOBAL%$count$				:i %GLOBAL%$count$ = (%GLOBAL%$count$ + %i(1))				:i loop_to 			:i endif		:i endif		:i if (%GLOBAL%$index$ = %i(0))			:i $audio_ui_play_voting_outcome_result_sfx$${StructInt winner = 0}$			:i $create_ui_star_particles_vote$${				StructFloatX2 Pos				{					Floats [-530.000, 170.000]				}				StructInt z = 30			}$						:i $VotingInterface$.$se_setprops$${				StructStruct vote_display_2_pos				{					StructHeader					{						StructFloatX2 0x00000000						{							Floats [0.00000, 500.000]						}						StructQBKey relative					}				}				StructFloat time = 2.00				StructQBKey motion = ease_in			}$						:i $VotingInterface$.$se_setprops$${				StructInt vote_display_2_rot_angle = 265				StructFloat time = 2.00			}$					:i else 			:i $audio_ui_play_voting_outcome_result_sfx$${StructInt winner = 1}$			:i $create_ui_star_particles_vote$${				StructFloatX2 Pos				{					Floats [-250.000, 50.0000]				}				StructInt z = 30			}$						:i $VotingInterface$.$se_setprops$${				StructStruct vote_display_1_pos				{					StructHeader					{						StructFloatX2 0x00000000						{							Floats [0.00000, 500.000]						}						StructQBKey relative					}				}				StructFloat time = 2.00				StructQBKey motion = ease_in			}$						:i $VotingInterface$.$se_setprops$${				StructInt vote_display_1_rot_angle = -265				StructFloat time = 2.00			}$					:i endif	:i endif	:i endfunction]Script display_competitive_rules_voting 0x3c7664be [	:i $prepare_game_rules_voting$	:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i $Playlist_GetSize$	:i if (%GLOBAL%$playlist_size$ > %i(0))		:i %GLOBAL%$array$ = :a{:a}		:i %GLOBAL%$index$ = %i(0)		:i $Playlist_GetPlaylist$		:i $Playlist_GetCurrentSong$		:i %GLOBAL%$found_current$ = %i(0)		:i while 		:i if (%GLOBAL%$found_current$ = %i(0))			:i if (%GLOBAL%$current_song$ = %GLOBAL%$playlist$:a{%GLOBAL%$index$:a})				:i %GLOBAL%$found_current$ = %i(1)			:i endif		:i endif		:i if (%GLOBAL%$found_current$ = %i(1))			:i $get_ui_song_struct_items$$song$ = (%GLOBAL%$playlist$:a{%GLOBAL%$index$:a})$savegame$ = %GLOBAL%$savegame$			:i if (%GLOBAL%$index$ = %i(0))				:i %GLOBAL%$voting_subtitle$ = (%GLOBAL%$ui_struct$->$song_title$)			:i endif			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = (%GLOBAL%$ui_struct$->$song_title$)		:i endif		:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))		:i loop_to %GLOBAL%$playlist_size$		:i %GLOBAL%$info_list$ = %GLOBAL%$array$	:i endif	:i if $InInternetMode$		:i if $ishost$			:i $SendStructure$:s{				:i $callback$ = $net_display_competitive_rules_voting$				:i $data_to_send$ = :s{					:i $voting_callback$ = %GLOBAL%$voting_callback$					:i $voting_items_array$ = %GLOBAL%$game_rules_voting_array$				:i :s}			:i :s}			:i $choose_script$ = $generic_event_choose$			:i if $ui_event_is_top_popup$				:i %GLOBAL%$choose_script$ = $generic_event_replace$			:i endif			:i %GLOBAL%$choose_script$:s{				:i $state$ = $uistate_voting$				:i $Data$ = :s{					:i $voting_items_array$ = %GLOBAL%$game_rules_voting_array$					:i $voting_callback$ = %GLOBAL%$voting_callback$					:i $voting_title$ = ^[452393b2]^					:i $voting_subtitle$ = %GLOBAL%$voting_subtitle$					:i $info_list$ = %GLOBAL%$info_list$					:i $info_list_title$ = ^[c70894d4]^				:i :s}			:i :s}		:i endif	:i else 		:i $generic_event_choose$:s{			:i $state$ = $uistate_voting$			:i $Data$ = :s{				:i $back_script$ = $generic_event_back$				:i $back_params$ = :s{$voting_screen$%GLOBAL%$back_params$:s}				:i $voting_items_array$ = %GLOBAL%$game_rules_voting_array$				:i $voting_callback$ = %GLOBAL%$voting_callback$				:i $next_state$ = %GLOBAL%$next_state$				:i $voting_title$ = ^[452393b2]^				:i $voting_subtitle$ = %GLOBAL%$voting_subtitle$				:i $info_list$ = %GLOBAL%$info_list$				:i $info_list_title$ = ^[c70894d4]^			:i :s}		:i :s}	:i endif	:i endfunction]Script net_display_competitive_rules_voting 0x1f79ebde [	:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i $Playlist_GetSize$	:i if (%GLOBAL%$playlist_size$ > %i(0))		:i %GLOBAL%$array$ = :a{:a}		:i %GLOBAL%$index$ = %i(0)		:i $Playlist_GetPlaylist$		:i $Playlist_GetCurrentSong$		:i %GLOBAL%$found_current$ = %i(0)		:i while 		:i if (%GLOBAL%$found_current$ = %i(0))			:i if (%GLOBAL%$current_song$ = %GLOBAL%$playlist$:a{%GLOBAL%$index$:a})				:i %GLOBAL%$found_current$ = %i(1)			:i endif		:i endif		:i if (%GLOBAL%$found_current$ = %i(1))			:i $get_ui_song_struct_items$$song$ = (%GLOBAL%$playlist$:a{%GLOBAL%$index$:a})$savegame$ = %GLOBAL%$savegame$			:i if (%GLOBAL%$index$ = %i(0))				:i %GLOBAL%$voting_subtitle$ = (%GLOBAL%$ui_struct$->$song_title$)			:i endif			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = (%GLOBAL%$ui_struct$->$song_title$)		:i endif		:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))		:i loop_to %GLOBAL%$playlist_size$		:i %GLOBAL%$info_list$ = %GLOBAL%$array$	:i endif	:i $ui_event_get_top$	:i if (%GLOBAL%$base_name$ = %s("online_quit_warning"))		:i $ui_event$${StructQBKey event = menu_back}$		:i $ui_event_wait_for_safe$	:i endif	:i $KillSpawnedScript$${StructQBKey name = net_ui_song_breakdown_start_timer_spawned}$	:i $KillSpawnedScript$${StructQBKey name = net_ui_song_breakdown_competitive_start_timer_spawned}$	:i $choose_script$ = $generic_event_choose$	:i if $GotParam$${StructQBKey is_popup}$		:i %GLOBAL%$choose_script$ = $generic_event_replace$	:i endif	:i %GLOBAL%$choose_script$:s{		:i $state$ = $uistate_voting$		:i $Data$ = :s{			:i $voting_items_array$ = %GLOBAL%$voting_items_array$			:i $voting_title$ = ^[452393b2]^			:i $voting_callback$ = %GLOBAL%$voting_callback$			:i $voting_subtitle$ = %GLOBAL%$voting_subtitle$			:i $info_list$ = %GLOBAL%$info_list$			:i $info_list_title$ = ^[c70894d4]^		:i :s}	:i :s}	:i endfunction]Script debug_choose_mode f9d232f2 [	:i $LaunchEvent$${		StructQBKey type = unfocus		StructQBKey target = current_menu	}$		:i $CreateScreenElement$${		StructQBKey parent = VotingInterface		StructFloatX2 Pos		{			Floats [0.00000, 0.00000]		}		StructQBKey type = menuelement		StructArray pos_anchor		{			ArrayQBKey			[				center				center			]		}		StructArray just		{			ArrayQBKey			[				center				center			]		}		StructInt z_priority = 200		StructFloatX2 dims		{			Floats [150.000, 40.0000]		}		StructInt alpha = 1		StructQBKey isvertical = true		StructArray internal_just		{			ArrayQBKey			[				center				center			]		}		StructQBKey fit_major = expand if content larger		StructQBKey fit_minor = keep dims	}$		:i %GLOBAL%$menu_id$ = %GLOBAL%$id$	:i $GetArraySize$(~$competitive_rules_array$)	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $add_element$ = %i(1)		:i %GLOBAL%$competitive_rules$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})		:i if NOT $TeamModeEquals$${StructQBKey team_mode = two_teams}$			:i if ((~%GLOBAL%$competitive_rules$->$team$) = %i(1))				:i $add_element$ = %i(0)			:i endif		:i else 			:i if ((~%GLOBAL%$competitive_rules$->$team$) = %i(0))				:i $add_element$ = %i(0)			:i endif		:i endif		:i if $ChecksumEquals$$a$ = %GLOBAL%$competitive_rules$$b$ = $elimination$			:i $GetNumPlayersInGame$			:i if (%GLOBAL%$num_players$ > (~%GLOBAL%$competitive_rules$->$min_players$))				:i $add_element$ = %i(1)			:i else 				:i $add_element$ = %i(0)			:i endif		:i elseif $ChecksumEquals$$a$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})$b$ = $solo_fest_mode$			:i $add_element$ = %i(0)		:i elseif $ChecksumEquals$$a$ = ((~$competitive_rules_array$):a{%GLOBAL%$i$:a})$b$ = $team_fest_mode$			:i $add_element$ = %i(0)		:i endif		:i if (%GLOBAL%$add_element$ = %i(1))			:i $CreateScreenElement$:s{				:i $type$ = $TextBlockElement$				:i $parent$ = %GLOBAL%$menu_id$				:i $text$ = (~%GLOBAL%$competitive_rules$->$text$)				:i $font$ = $fontgrid_text_a1$				:i $dims$ = %vec2(150.0,40.0)				:i $alpha$ = %f(0.5)				:i $just$ = :a{$left$,$top$:a}				:i $rgba$ = :a{%i(240)%i(240)%i(240)%i(255):a}				:i $fit_height$ = $scale down if larger$				:i $fit_width$ = $scale each line if larger$				:i $event_handlers$ = :a{					:i :s{$pad_choose$$set_force_vote$$params$ = :s{$rules$ = %GLOBAL%$competitive_rules$:s}:s}					:i :s{$focus$$voting_item_change_focus$$params$ = :s{$focus$:s}:s}					:i :s{$unfocus$$voting_item_change_focus$$params$ = :s{$unfocus$:s}:s}				:i :a}			:i :s}		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i $AssignAlias$$id$ = %GLOBAL%$menu_id$$alias$ = $current_menu$	:i $LaunchEvent$${		StructQBKey type = focus		StructQBKey target = current_menu	}$		:i endfunction]Script set_force_vote 0x3e423e9e [	:i $change$${StructInt DEBUG_FORCE_VOTE = 1}$	:i $change$$g_force_vote$ = %GLOBAL%$rules$	:i endfunction]Script voting_item_change_focus d450e901 [	:i $obj_getid$	:i if $GotParam$${StructQBKey focus}$		:i %GLOBAL%$ObjID$.$se_setprops$$alpha$ = %f(1.0)	:i elseif $GotParam$${StructQBKey unfocus}$		:i %GLOBAL%$ObjID$.$se_setprops$$alpha$ = %f(0.5)	:i endif	:i endfunction]Script voting_drop_player 0x52ebb89e [	:i if $ScreenElementExists$${StructQBKey id = VotingInterface}$		:i %GLOBAL%$parent$ = $VotingInterface$	:i endif	:i $songlist_drop_player$ isNull 	:i endfunction]Script voting_end_game 0x82954858 [	:i $KillSpawnedScript$${StructQBKey name = ui_voting_update}$	:i $KillSpawnedScript$${StructQBKey name = display_voting_result_and_exit}$	:i if $ui_event_exists_in_stack$${StructString name = "gameplay"}$		:i $KillSpawnedScript$${StructQBKey name = update_voting_timer}$		:i $song_breakdown_end_game$ isNull 	:i else 		:i $songlist_end_game$ isNull 	:i endif	:i endfunction]Script ui_badge_rotator 0x903b2673 [	:i while 	:i $se_setprops$${StructInt rot_angle = 0}$	:i $se_waitprops$	:i $time$ =  thaw_4f %vec2(3.0,7.0)	:i $rot$ = select(2f,3,01 00 01 00 01 00) :OFFSET(0):OFFSET(1):OFFSET(2)	:POS(0) %i(360)	:BREAKTO(3) 	:POS(1) %i(720)	:BREAKTO(3) 	:POS(2) %i(1080)	:POS(3) 	:i $se_setprops$$rot_angle$ = %GLOBAL%$rot$$time$ = %GLOBAL%$time$$motion$ = $smooth$	:i $se_waitprops$	:i loop_to 	:i endfunction]Script create_ui_star_particles_vote 0x77b2dd57 [	${		StructQBKey parent = root_window		StructFloatX2 Pos		{			Floats [0.00000, 0.00000]		}		StructFloat z = 15.5	}$		:i $obj_getid$	:i %GLOBAL%$parent$ = %GLOBAL%$ObjID$	:i $destroy2dparticlesystem$${StructQBKey id = ui_star_particles}$	:i $create2dparticlesystem$:s{		:i $id$ = $ui_star_particles$		:i $Pos$ = %GLOBAL%$Pos$		:i $parent$ = %GLOBAL%$parent$		:i $z_priority$ = %GLOBAL%$z$		:i $texture$ = $song_summary_score_star_glow$		:i $Blend$ = $Add$		:i $start_color$ = :a{%i(255)%i(255)%i(255)%i(255):a}		:i $end_color$ = :a{%i(100)%i(25)%i(0)%i(50):a}		:i $start_scale$ = %vec2(1.5,1.5)		:i $end_scale$ = %vec2(0.07999999821186066,0.07999999821186066)		:i $start_angle_spread$ = %f(360.0)		:i $min_rotation$ = %i(4294966796)		:i $max_rotation$ = %i(500)		:i $emit_start_radius$ = %f(25.0)		:i $emit_radius$ = %f(55.0)		:i $emit_rate$ = %f(0.0003200)		:i $emit_dir$ = %i(0)		:i $emit_spread$ = %f(360.0)		:i $velocity$ = %f(15.0)		:i $friction$ = %vec2(0.10000000149011612,0.009999999776482582)		:i $time$ = %f(0.5)	:i :s}	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i $destroy2dparticlesystem$${		StructQBKey id = ui_star_particles		StructQBKey kill_when_empty	}$		:i return 	:i endfunction]