Unknown [1c0000000000000000000bc80000000000000000]Script music_store_recommendations_process 0x7e072643 [	${StructQBKey song_checksum = null}$	:i $change$${		StructArray g_music_store_recommendations		{			Floats [0.00000, 0.00000]		}	}$		:i $change$${StructInt g_music_store_recommendations_complete = 0}$	:i $change$${StructInt g_music_store_recommendations_artist_complete = 0}$	:i $change$${StructInt g_music_store_recommendations_genre_complete = 0}$	:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i if NOT (%GLOBAL%$song_checksum$ = $null$)		:i $get_ui_song_struct_items$$song$ = %GLOBAL%$song_checksum$$savegame$ = %GLOBAL%$savegame$		:i $ms_rec_find_similar_songs_by_artist$$song_struct$ = %GLOBAL%$ui_struct$		:i while 		:i if (~$g_music_store_recommendations_artist_complete$ = %i(1))			:i continue		:i endif		:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i loop_to 		:i $ms_rec_find_similar_songs_by_genre$$song_struct$ = %GLOBAL%$ui_struct$		:i while 		:i if (~$g_music_store_recommendations_genre_complete$ = %i(1))			:i continue		:i endif		:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i loop_to 		:i $change$${StructInt g_music_store_recommendations_complete = 1}$	:i else 		:i $songlist_component$.$MembFunc_Songlist_UIStack_SetMode$${StructQBKey mode = play_song}$		:i $songlist_component$.$MembFunc_Songlist_UIStack_SetListName$${StructQBKey list_name = gh_songlist}$		:i $songlist_component$.$settags$${StructQBKey content_source = local_song_list}$		:i $songlist_content_source_init$		:i $songlist_component$.$MembFunc_Songlist_UIStack_SetMode$${StructQBKey mode = music_store}$		:i $songlist_component$.$MembFunc_Songlist_UIStack_SetListName$${StructQBKey list_name = marketplace}$		:i $songlist_component$.$settags$${StructQBKey content_source = marketplace}$		:i while 		:i if $ContentManFunc$${				StructQBKey func = is_ready				StructQBKey name = gh_songlist			}$						:i $ContentManFunc$${				StructQBKey func = request_page				StructQBKey name = gh_songlist				StructQBKey current_page				StructQBKey callback = ms_rec_CALLBACK_have_most_played_page				StructStruct sortspec				{					StructHeader					{						StructQBKey key = song_num_times_played						StructQBKey alt_key = song_title						StructQBKey ascending					}				}			}$						:i return 		:i endif		:i $wait$${			StructFloat 0.10000000149011612			StructQBKey seconds		}$				:i loop_to %i(150)		:i $callback_marketplace_content_general_timedout$	:i endif	:i endfunction]Script ms_rec_CALLBACK_have_most_played_page c5230875 [	:i %GLOBAL%$end_index$ = %i(2)	:i if (%GLOBAL%$page_size$ < %i(3))		:i %GLOBAL%$end_index$ = (%GLOBAL%$page_size$ - %i(1))	:i endif	:i $ContentManFunc$:s{		:i $func$ = $request_data$		:i $name$ = $gh_songlist$		:i $start_index$ = %i(0)		:i $end_index$ = %GLOBAL%$end_index$		:i $callback$ = $ms_rec_CALLBACK_have_most_played_range$	:i :s}	:i endfunction]Script ms_rec_CALLBACK_have_most_played_range bac693fb [	:i %GLOBAL%$num_songs_to_use$ = %i(3)	:i $GetArraySize$%GLOBAL%$range$	:i if (%GLOBAL%$array_size$ < %i(3))		:i %GLOBAL%$num_songs_to_use$ = %GLOBAL%$array_size$	:i endif	:i %GLOBAL%$i$ = %i(0)	:i while 	:i $change$${StructInt g_music_store_recommendations_artist_complete = 0}$	:i $change$${StructInt g_music_store_recommendations_genre_complete = 0}$	:i $ms_rec_find_similar_songs_by_artist$$song_struct$ = (%GLOBAL%$range$:a{%GLOBAL%$i$:a})	:i while 	:i if (~$g_music_store_recommendations_artist_complete$ = %i(1))		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i $ms_rec_find_similar_songs_by_genre$$song_struct$ = (%GLOBAL%$range$:a{%GLOBAL%$i$:a})	:i while 	:i if (~$g_music_store_recommendations_genre_complete$ = %i(1))		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$num_songs_to_use$	:i $ms_rec_fabricate_random_list$	:i $change$${StructInt g_music_store_recommendations_complete = 1}$	:i endfunction]Script ms_rec_find_similar_songs_by_artist f443e21d [	${Unknown [00012b004316395b6969696900000000]}$	:i $songlist_component$.$MembFunc_Songlist_UIStack_GetListName$	:i while 	:i if NOT $ContentManFunc$$func$ = $content_source_registered$$name$ = %GLOBAL%$list_name$		:i continue	:i endif	:i if $ContentManFunc$$func$ = $is_ready$$name$ = %GLOBAL%$list_name$		:i $filterspec$ = :a{			:i :s{				:i $key$ = $song_artist$				:i $value$ = (%GLOBAL%$song_struct$->$song_artist$)				:i $comparator$ = $equal$			:i :s}			:i :s{				:i $key$ = $purchased$				:i $value$ = %i(0)				:i $comparator$ = $equal$			:i :s}			:i :s{				:i $key$ = $type$				:i $union_list$ = :a{$pack$$album$$song$:a}				:i $comparator$ = $equal$			:i :s}		:i :a}		:i $GetArraySize$${StructQBString g_music_store_recommendations}$		:i if (%GLOBAL%$array_size$ > %i(0))			:i %GLOBAL%$i$ = %i(0)			:i while 			:i %GLOBAL%$extra_filter$ = :s{				:i $key$ = $song_checksum$				:i $value$ = ((~$g_music_store_recommendations$):a{%GLOBAL%$i$:a})				:i $comparator$ = $not_equal$			:i :s}			:i $AddArrayElement$$array$ = %GLOBAL%$filterspec$$element$ = %GLOBAL%$extra_filter$			:i %GLOBAL%$filterspec$ = %GLOBAL%$array$			:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$array_size$		:i endif		:i $ContentManFunc$:s{			:i $func$ = $request_page$			:i $name$ = %GLOBAL%$list_name$			:i $current_page$			:i $callback$ = $ms_rec_CALLBACK_artist_page$			:i $filterspec$ = %GLOBAL%$filterspec$			:i $sortspec$ = :s{$key$ = $song_artist$$alt_key$ = $song_genre$$ascending$:s}		:i :s}		:i return 	:i endif	:i $wait$${		StructFloat 0.10000000149011612		StructQBKey seconds	}$		:i loop_to %i(150)	:i $callback_marketplace_content_general_timedout$	:i endfunction]Script ms_rec_find_similar_songs_by_genre 0x103690b1 [	${Unknown [00012b004316395b6969696900000000]}$	:i $songlist_component$.$MembFunc_Songlist_UIStack_GetListName$	:i while 	:i if $ContentManFunc$$func$ = $is_ready$$name$ = %GLOBAL%$list_name$		:i %GLOBAL%$filterspec$ = :a{			:i :s{				:i $key$ = $song_genre$				:i $value$ = (%GLOBAL%$song_struct$->$song_genre$)				:i $comparator$ = $equal$			:i :s}			:i :s{				:i $key$ = $purchased$				:i $value$ = %i(0)				:i $comparator$ = $equal$			:i :s}			:i :s{				:i $key$ = $type$				:i $union_list$ = :a{$pack$$album$$song$:a}				:i $comparator$ = $equal$			:i :s}		:i :a}		:i $GetArraySize$${StructQBString g_music_store_recommendations}$		:i if (%GLOBAL%$array_size$ > %i(0))			:i %GLOBAL%$i$ = %i(0)			:i while 			:i %GLOBAL%$extra_filter$ = :s{				:i $key$ = $song_checksum$				:i $value$ = ((~$g_music_store_recommendations$):a{%GLOBAL%$i$:a})				:i $comparator$ = $not_equal$			:i :s}			:i $AddArrayElement$$array$ = %GLOBAL%$filterspec$$element$ = %GLOBAL%$extra_filter$			:i %GLOBAL%$filterspec$ = %GLOBAL%$array$			:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$array_size$		:i endif		:i $ContentManFunc$:s{			:i $func$ = $request_page$			:i $name$ = %GLOBAL%$list_name$			:i $current_page$			:i $callback$ = $ms_rec_CALLBACK_genre_page$			:i $filterspec$ = %GLOBAL%$filterspec$			:i $sortspec$ = :s{$key$ = $song_genre$$alt_key$ = $song_year$:s}		:i :s}		:i return 	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to %i(1000)	:i endfunction]Script ms_rec_CALLBACK_artist_page 0x7db0f41b [	:i $songlist_component$.$MembFunc_Songlist_UIStack_GetListName$	:i %GLOBAL%$num_artist_songs$ = %i(5)	:i if (%GLOBAL%$page_size$ = %i(0))		:i $change$${StructInt g_music_store_recommendations_artist_complete = 1}$		:i return 	:i elseif (%GLOBAL%$page_size$ > %GLOBAL%$num_artist_songs$)		:i %GLOBAL%$start_index$ = %i(0)		:i %GLOBAL%$end_index$ = (%GLOBAL%$num_artist_songs$ - %i(1))	:i else 		:i %GLOBAL%$start_index$ = %i(0)		:i %GLOBAL%$end_index$ = (%GLOBAL%$page_size$ - %i(1))	:i endif	:i $ContentManFunc$:s{		:i $func$ = $request_data$		:i $name$ = %GLOBAL%$list_name$		:i $start_index$ = %GLOBAL%$start_index$		:i $end_index$ = %GLOBAL%$end_index$		:i $callback$ = $ms_rec_CALLBACK_artist_range$	:i :s}	:i endfunction]Script ms_rec_CALLBACK_artist_range 0x6233bc16 [	:i $GetArraySize$%GLOBAL%$range$	:i %GLOBAL%$i$ = %i(0)	:i while 	:i $AddArrayElement$$array$ = ~$g_music_store_recommendations$$element$ = ((%GLOBAL%$range$:a{%GLOBAL%$i$:a})->$song_checksum$)	:i $change$$g_music_store_recommendations$ = %GLOBAL%$array$	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $change$${StructInt g_music_store_recommendations_artist_complete = 1}$	:i endfunction]Script ms_rec_CALLBACK_genre_page 0x89a70ca4 [	:i $songlist_component$.$MembFunc_Songlist_UIStack_GetListName$	:i if (%GLOBAL%$page_size$ = %i(0))		:i $change$${StructInt g_music_store_recommendations_genre_complete = 1}$		:i return 	:i else 		:i %GLOBAL%$start_index$ = %i(0)		:i %GLOBAL%$end_index$ = (%GLOBAL%$page_size$ - %i(1))	:i endif	:i $ContentManFunc$:s{		:i $func$ = $request_data$		:i $name$ = %GLOBAL%$list_name$		:i $start_index$ = %GLOBAL%$start_index$		:i $end_index$ = %GLOBAL%$end_index$		:i $callback$ = $ms_rec_CALLBACK_genre_range$	:i :s}	:i endfunction]Script ms_rec_CALLBACK_genre_range d13bc1fd [	:i $GetArraySize$${StructQBString g_music_store_recommendations}$	:i %GLOBAL%$total_size$ = %GLOBAL%$array_size$	:i $GetArraySize$%GLOBAL%$range$	:i %GLOBAL%$genre_size$ = %GLOBAL%$array_size$	:i $mod$$a$ = %GLOBAL%$total_size$$b$ = (~$g_music_store_num_recommendations$)	:i if (%GLOBAL%$genre_size$ <= ((~$g_music_store_num_recommendations$) - %GLOBAL%$mod$))		:i %GLOBAL%$i$ = %i(0)		:i while 		:i $AddArrayElement$$array$ = ~$g_music_store_recommendations$$element$ = ((%GLOBAL%$range$:a{%GLOBAL%$i$:a})->$song_checksum$)		:i $change$$g_music_store_recommendations$ = %GLOBAL%$array$		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$genre_size$	:i else 		:i %GLOBAL%$i$ = %i(0)		:i while 		:i $GetRandomInteger$$a$ = %i(0)$b$ = (%GLOBAL%$genre_size$ - %i(1))		:i %GLOBAL%$index$ = %GLOBAL%$random_integer$		:i $AddArrayElement$$array$ = ~$g_music_store_recommendations$$element$ = ((%GLOBAL%$range$:a{%GLOBAL%$index$:a})->$song_checksum$)		:i $change$$g_music_store_recommendations$ = %GLOBAL%$array$		:i $RemoveArrayElement$$array$ = %GLOBAL%$range$$index$ = %GLOBAL%$index$		:i %GLOBAL%$range$ = %GLOBAL%$array$		:i %GLOBAL%$genre_size$ = (%GLOBAL%$genre_size$ - %i(1))		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to ((~$g_music_store_num_recommendations$) - %GLOBAL%$mod$)	:i endif	:i $change$${StructInt g_music_store_recommendations_genre_complete = 1}$	:i endfunction]Script ms_rec_fabricate_random_list ed57912f [	:i $GetArraySize$${StructQBString g_music_store_recommendations}$	:i if (%GLOBAL%$array_size$ > (~$g_music_store_num_recommendations$))		:i %GLOBAL%$num_to_remove$ = (%GLOBAL%$array_size$ - (~$g_music_store_num_recommendations$))		:i %GLOBAL%$i$ = %i(0)		:i while 		:i $GetRandomInteger$$a$ = %i(0)$b$ = (%GLOBAL%$array_size$ - %i(1))		:i %GLOBAL%$index$ = %GLOBAL%$random_integer$		:i $RemoveArrayElement$$array$ = (~$g_music_store_recommendations$)$index$ = %GLOBAL%$index$		:i $change$$g_music_store_recommendations$ = %GLOBAL%$array$		:i %GLOBAL%$array_size$ = (%GLOBAL%$array_size$ - %i(1))		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$num_to_remove$	:i endif	:i endfunction]