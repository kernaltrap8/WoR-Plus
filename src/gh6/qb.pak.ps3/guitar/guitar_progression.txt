Unknown [1c0000000000000000002a6c0000000000000000]Script reset_progression_atoms 0x157c5295 [	${		Unknown [000124001b0509c56969696900000018]		StructInt force_update = 1		StructInt async = 0	}$		:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[8a973a5a]^	:i $LockGlobalTags$${StructQBKey push_progression_writes_only}$	:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[a1ba6999]^	:i $completed_atoms_array$ = :a{:a}	:i $create_player_progression_atoms$:s{$savegame$ = %GLOBAL%$savegame$$completed_atoms_array$ = %GLOBAL%$completed_atoms_array$$async$ = %GLOBAL%$async$:s}	:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[b8a158d8]^	:i if NOT $GotParam$${StructQBKey completed_atoms_array}$		:i $printf$${StructString 0x00000000 = "setup_progression_atoms Error: No atoms were loaded or created"}$		:i return 	:i endif	:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[f7e0ce1f]^	:i $RegisterAtoms$$savegame$ = %GLOBAL%$savegame$$atoms$ = %GLOBAL%$completed_atoms_array$	:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[eefbff5e]^	:i $LockGlobalTags$${StructQBKey pop_progression_writes_only}$	:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[c5d6ac9d]^	:i if (%GLOBAL%$force_update$ = %i(1))		:i $UpdateAtoms$$savegame$ = %GLOBAL%$savegame$	:i endif	:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[dccd9ddc]^	:i endfunction]Script update_active_players_atoms 0x0893f8a0 [	${StructInt async = 0}$	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $get_savegame_from_player$$player$ = %GLOBAL%$player$		:i $UpdateAtoms$$savegame$ = %GLOBAL%$savegame$		:i if (%GLOBAL%$async$ = %i(1))			:i $wait$${				StructInt 1				StructQBKey gameframe			}$					:i endif		:i $UpdateAtoms$$savegame$ = %GLOBAL%$savegame$$global_atoms$ = %i(1)		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script create_player_progression_atoms cf267cd5 [	${		Unknown [000124001b0509c5696969690000001800012c00203c74026969696900000028]		StructInt async = 0	}$		:i $conditional_async_wait$$async$ = %GLOBAL%$async$$text$ = ^[1780bad2]^	:i $quest_progression_create_chapter_atoms_array$$savegame$ = %GLOBAL%$savegame$$async$ = %GLOBAL%$async$	:i $quest_progression_create_reward_atoms_array$$savegame$ = %GLOBAL%$savegame$	:i return $completed_atoms_array$ = (%GLOBAL%$completed_atoms_array$ + %GLOBAL%$chapter_atoms$ + %GLOBAL%$chapter_reward_atoms$)	:i endfunction]SectionArray career_rewards_just_unlocked{	Floats [0.00000, 0.00000]}Script do_atomic_reward_unlock 0x9eed3ac2 [	${Unknown [00012b009662ab7d696969690000001800012400a84524b7696969690000002800012600a4b9117b6969696900000038000124001b0509c56969696900000000]}$	:i $rewards_array$ = (%GLOBAL%$atomic_reward_data$->$rewards$)	:i if NOT $GotParam$${StructQBKey rewards_array}$		:i return 	:i endif	:i if $console_is_net_career_client$		:i if (~$g_net_career_ignore_unlock_atoms$ = %i(1))			:i return 		:i endif	:i endif	:i $atom_savegame$ = %GLOBAL%$savegame$	:i $GetNumPlayersInGame$${StructQBKey local}$	:i $new_unlock$ = %i(0)	:i $GetArraySize$%GLOBAL%$rewards_array$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $index$ = %i(0)		:i while 		:i $do_single_reward_unlock$:s{$reward_atom$ = %GLOBAL%$atomic_reward_data$$current_reward$ = (%GLOBAL%$rewards_array$:a{%GLOBAL%$index$:a})$reward_index$ = %GLOBAL%$atomic_reward_index$$savegame$ = %GLOBAL%$savegame$:s}		:i if (%GLOBAL%$num_players$ > %i(1) AND %GLOBAL%$atom_type$ = $career$ AND ~$g_net_career_ignore_unlock_atoms$ = %i(0))			:i $GetFirstPlayer$${StructQBKey local}$			:i while 			:i $getplayerinfo$%GLOBAL%$player$$controller$			:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$			:i if (%GLOBAL%$savegame$ !== %GLOBAL%$atom_savegame$)				:i $do_single_reward_unlock$:s{$reward_atom$ = %GLOBAL%$atomic_reward_data$$current_reward$ = (%GLOBAL%$rewards_array$:a{%GLOBAL%$index$:a})$reward_index$ = %GLOBAL%$atomic_reward_index$$savegame$ = %GLOBAL%$savegame$:s}			:i endif			:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$			:i loop_to %GLOBAL%$num_players$			:i $savegame$ = %GLOBAL%$atom_savegame$		:i endif		:i if (%GLOBAL%$new_item_unlocked$ = %i(1))			:i $new_unlock$ = %i(1)		:i endif		:i %GLOBAL%$index$ = (%GLOBAL%$index$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i $reward_data$ = (%GLOBAL%$atomic_reward_data$ + :s{$reward_index$ = %GLOBAL%$atomic_reward_index$:s})	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $quickplay$ AND %GLOBAL%$atom_type$ = $quickplay$)		:i $progression_award_points_add_just_unlocked_item$$reward_struct$ = %GLOBAL%$reward_data$$player_savegame$ = %GLOBAL%$savegame$	:i elseif (%GLOBAL%$type$ = $career$ AND %GLOBAL%$atom_type$ = $career$)		:i if $StructureContains$${				StructQBKey structure = atomic_reward_data				StructQBKey unlock_text			}$						:i $recent_career_unlocks$ = :a{:a}			:i $AddArrayElement$:s{				:i $array$ = %GLOBAL%$recent_career_unlocks$				:i $element$ = %GLOBAL%$atomic_reward_data$			:i :s}			:i $change$$g_quest_recent_unlocked_awards$ = %GLOBAL%$array$		:i endif	:i endif	:i endfunction]Script do_single_reward_unlock c7bfd247 [	${Unknown [00012b00deae8a1f696969690000001800012b00b6e757c26969696900000028000124001850c3a26969696900000038000124001b0509c56969696900000000]}$	:i if NOT $StructureContains$${			StructQBKey structure = current_reward			StructQBKey reward_type		}$				:i return ${StructInt new_item_unlocked = 0}$	:i endif	:i $GetArraySize$(~$g_autotest_career_powers$)$param$ = $career_powers_size$	:i if (~$autotest_on$ = %i(1) OR ~$g_autotest_quickplay_challenges$ = %i(1) OR %GLOBAL%$career_powers_size$ > %i(0))		:i return ${StructInt new_item_unlocked = 0}$	:i endif	:i $reward_type$ = (%GLOBAL%$current_reward$->$reward_type$)	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $quickplay$)		:i if $get_progression_player_and_controller$$savegame$ = %GLOBAL%$savegame$			:i if ($cas$ = %GLOBAL%$reward_type$)				:i if $unlock_tracker_sort_CAS$$reward_struct$ = %GLOBAL%$current_reward$$check_array$ = $cas$					:i %GLOBAL%$reward_type$ = $cas$				:i elseif $unlock_tracker_sort_CAS$$reward_struct$ = %GLOBAL%$current_reward$$check_array$ = $CAI$					:i %GLOBAL%$reward_type$ = $CAI$				:i endif			:i endif			:i $broadcastevent$$type$ = $unlock_item_type$$Data$ = :s{$player$ = %GLOBAL%$player$$controller_index$ = %GLOBAL%$controller_index$$item_name$ = (%GLOBAL%$reward_atom$->$name$)$item_type$ = %GLOBAL%$reward_type$:s}		:i endif	:i endif	:i $new_item_unlocked$ = %i(0)	:i switch (%GLOBAL%$reward_type$)		:i case $cas$			:i endcase		case $CAI$			:i $car_pieces$ = (%GLOBAL%$current_reward$->$car_pieces$)			:i $GetArraySize$%GLOBAL%$car_pieces$			:i $i$ = %i(0)			:i while 			:i $part$ = ((%GLOBAL%$car_pieces$:a{%GLOBAL%$i$:a})->$part$)			:i $desc_id$ = ((%GLOBAL%$car_pieces$:a{%GLOBAL%$i$:a})->$desc_id$)			:i $printf$%s("Unlocking CAS %a in %b through rewards system")$a$ = %GLOBAL%$desc_id$$b$ = %GLOBAL%$part$$channel$ = $progression_unlocks$			:i if $set_cas_item_unlocked_flag$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$$savegame$ = %GLOBAL%$savegame$				:i $new_item_unlocked$ = %i(1)			:i endif			:i $i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$array_size$			:i endcase		case $venue$			:i endcase		case $venue_reward$			:i $venue_checksum$ = (%GLOBAL%$current_reward$->$venue_checksum$)			:i if $globaltag_unlock_venue$$venue$ = %GLOBAL%$venue_checksum$$savegame$ = %GLOBAL%$savegame$				:i $new_item_unlocked$ = %i(1)			:i endif			:i endcase		case $Character$			:i if $StructureContains$${					StructQBKey structure = current_reward					StructQBKey profile_idx				}$								:i $profile_idx$ = (%GLOBAL%$current_reward$->$profile_idx$)				:i if $unlock_profile$$id$ = (~$Preset_Musician_Profiles_Locked$:a{%GLOBAL%$profile_idx$:a}->$name$)$savegame$ = %GLOBAL%$savegame$					:i $new_item_unlocked$ = %i(1)				:i endif			:i elseif $StructureContains$${					StructQBKey structure = current_reward					StructQBKey profile_name				}$								:i $profile_name$ = (%GLOBAL%$current_reward$->$profile_name$)				:i if $unlock_profile$$id$ = (%GLOBAL%$profile_name$)$savegame$ = %GLOBAL%$savegame$					:i $new_item_unlocked$ = %i(1)				:i endif			:i endif			:i endcase		case $cheat$			:i $cheat_name$ = (%GLOBAL%$current_reward$->$cheat_name$)			:i $original_savegame$ = %GLOBAL%$savegame$			:i $GetFirstPlayer$${				StructQBKey local				StructQBKey out = search_player			}$						:i $GetNumPlayersInGame$${StructQBKey local}$			:i while 			:i $get_savegame_from_player$$player$ = %GLOBAL%$search_player$			:i if (%GLOBAL%$original_savegame$ = %GLOBAL%$savegame$)				:i $player$ = %GLOBAL%$search_player$				:i continue			:i endif			:i $GetNextPlayer$$player$ = %GLOBAL%$search_player$$local$$out$ = $search_player$			:i loop_to %GLOBAL%$num_players$			:i if $set_progression_cheat_unlocked$$cheat_name$ = %GLOBAL%$cheat_name$$savegame$ = %GLOBAL%$savegame$				:i $new_item_unlocked$ = %i(1)			:i endif			:i $savegame$ = %GLOBAL%$original_savegame$			:i endcase		case $CAS_texture$			:i $texture$ = (%GLOBAL%$current_reward$->$texture$)			:i if $set_cas_texture_unlocked_flag$$savegame$ = %GLOBAL%$savegame$$texture$ = %GLOBAL%$texture$				:i $new_item_unlocked$ = %i(1)			:i endif			:i endcase		case $outfit_preset$			:i $outfit_preset$ = (%GLOBAL%$current_reward$->$outfit_preset$)			:i $printf$%s("Unlocking Outfit_preset %a through rewards system")$a$ = %GLOBAL%$outfit_preset$$channel$ = $progression_unlocks$			:i if $set_cas_outfit_preset_unlocked_flag$$savegame$ = %GLOBAL%$savegame$$outfit_preset$ = %GLOBAL%$outfit_preset$				:i $new_item_unlocked$ = %i(1)			:i endif			:i endcase		case $song$			:i $song$ = (%GLOBAL%$current_reward$->$song_checksum$)			:i $GetGlobalTags$%GLOBAL%$song$$savegame$ = %GLOBAL%$savegame$			:i if (%GLOBAL%$unlocked$ = %i(0))				:i $SetGlobalTags$%GLOBAL%$song$$params$ = :s{$unlocked$ = %i(1):s}$savegame$ = %GLOBAL%$savegame$				:i $new_item_unlocked$ = %i(1)			:i endif			:i endcase		case $art_gallery$			:i $gallery_name$ = (%GLOBAL%$current_reward$->$gallery_name$)			:i $GetGlobalTags$%GLOBAL%$gallery_name$$savegame$ = %GLOBAL%$savegame$			:i if (%GLOBAL%$unlocked$ = %i(0))				:i $SetGlobalTags$%GLOBAL%$gallery_name$$params$ = :s{$unlocked$ = %i(1):s}$savegame$ = %GLOBAL%$savegame$				:i $new_item_unlocked$ = %i(1)			:i endif			:i endcase		case $rocker_power$			:i $power_tag$ = (%GLOBAL%$current_reward$->$power_name$)			:i $new_power_level$ = (%GLOBAL%$current_reward$->$power_level$)			:i $GetGlobalTags$%GLOBAL%$power_tag$$savegame$ = %GLOBAL%$savegame$			:i if (%GLOBAL%$new_power_level$ > %GLOBAL%$power_level$)				:i $SetGlobalTags$%GLOBAL%$power_tag$$params$ = :s{$power_level$ = %GLOBAL%$new_power_level$:s}$savegame$ = %GLOBAL%$savegame$				:i $new_item_unlocked$ = %i(1)			:i endif	:i end_switch	:i if $StructureContains$$structure$ = (%GLOBAL%$current_reward$)$run_career_outro_and_credits$		:i if NOT $InNetGame$			:i $change$${StructInt end_credits = 1}$		:i else 			:i $unlock_career_finale_video_and_achievement$		:i endif	:i endif	:i return $new_item_unlocked$ = %GLOBAL%$new_item_unlocked$	:i endfunction]Script is_reward_unlocked 0x0bc3fd71 [	${Unknown [00012b00dab37ca16969696900000018000124001b0509c56969696900000000]}$	:i $unlocked$ = %i(0)	:i $reward_type$ = (%GLOBAL%$unlock_struct$->$reward_type$)	:i switch (%GLOBAL%$reward_type$)		:i case $car$			:i endcase		case $cas$			:i endcase		case $CAI$			:i $car_pieces$ = (%GLOBAL%$unlock_struct$->$car_pieces$)			:i $GetArraySize$%GLOBAL%$car_pieces$			:i if (%GLOBAL%$array_size$ > %i(0))				:i $first_car_piece$ = (%GLOBAL%$car_pieces$:a{%i(0):a})				:i $MangleChecksums$$a$ = (%GLOBAL%$first_car_piece$->$desc_id$)$b$ = (%GLOBAL%$first_car_piece$->$part$)				:i $GetGlobalTags$$unlocked_cas_items$$savegame$ = %GLOBAL%$savegame$				:i if $ArrayContains$$array$ = %GLOBAL%$unlocked_cas_items$$contains$ = %GLOBAL%$mangled_id$					:i $unlocked$ = %i(1)				:i endif			:i endif			:i endcase		case $venue$			:i endcase		case $venue_reward$			:i $venue_checksum$ = (%GLOBAL%$unlock_struct$->$venue_checksum$)			:i $FormatText$$checksumname$ = $venue_tag$%s("venue_%s")$s$ = (~$LevelZones$->%GLOBAL%$venue_checksum$->$name$)			:i $GetGlobalTags$%GLOBAL%$venue_tag$$savegame$ = %GLOBAL%$savegame$			:i endcase		case $Character$			:i $character_id$ = (%GLOBAL%$unlock_struct$->$profile_name$)			:i $GetGlobalTags$$unlocked_profiles$$savegame$ = %GLOBAL%$savegame$			:i if $GotParam$${StructQBKey unlocked_profiles}$				:i if $ArrayContains$$array$ = %GLOBAL%$unlocked_profiles$$contains$ = %GLOBAL%$character_id$					:i $unlocked$ = %i(1)				:i endif			:i endif			:i endcase		case $cheat$			:i $cheat_name$ = (%GLOBAL%$unlock_struct$->$cheat_name$)			:i if $is_cheat_unlocked$:s{$cheat_name$ = %GLOBAL%$cheat_name$$savegame$ = %GLOBAL%$savegame$:s}				:i $unlocked$ = %i(1)			:i endif			:i endcase		case $CAS_texture$			:i $texture$ = (%GLOBAL%$unlock_struct$->$texture$)			:i $GetGlobalTags$$unlocked_cas_textures$$savegame$ = %GLOBAL%$savegame$			:i if $ArrayContains$$array$ = %GLOBAL%$unlocked_cas_textures$$contains$ = %GLOBAL%$texture$				:i $unlocked$ = %i(1)			:i endif			:i endcase		case $outfit_preset$			:i $outfit_preset$ = (%GLOBAL%$unlock_struct$->$outfit_preset$)			:i $GetGlobalTags$$unlocked_cas_outfit_presets$$savegame$ = %GLOBAL%$savegame$			:i if $ArrayContains$$array$ = %GLOBAL%$unlocked_cas_outfit_presets$$contains$ = %GLOBAL%$outfit_preset$				:i $unlocked$ = %i(1)			:i endif			:i endcase		case $song$			:i $song$ = (%GLOBAL%$unlock_struct$->$song_checksum$)			:i $GetGlobalTags$%GLOBAL%$song$$savegame$ = %GLOBAL%$savegame$			:i endcase		case $art_gallery$			:i $gallery_name$ = (%GLOBAL%$unlock_struct$->$gallery_name$)			:i $GetGlobalTags$%GLOBAL%$gallery_name$$savegame$ = %GLOBAL%$savegame$	:i end_switch	:i if (%GLOBAL%$unlocked$ = %i(1))		:i return ${StructQBKey true}$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script progression_get_rewards_just_unlocked 0x54bdc16e [	:i return $rewards_just_unlocked$ = (~$career_rewards_just_unlocked$)	:i endfunction]Script progression_reward_stars 0x21ff83a3 [	:i if (~$end_credits$ > %i(0))		:i return 	:i endif	:i $quickplay_get_grade$$goal_id$ = %GLOBAL%$current_challenge$	:i $GMan_VenueFunc$${		StructQBKey goal = career		StructQBKey tool = venue_handler		StructQBKey func = get_current_venue	}$		:i $FormatText$$checksumname$ = $venue_checksum$%s("venue_%s")$s$ = (~$LevelZones$->%GLOBAL%$current_venue$->$name$)	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $get_savegame_from_controller$$controller$ = %GLOBAL%$controller$		:i $GetGlobalTags$%GLOBAL%$current_challenge$$savegame$ = %GLOBAL%$savegame$		:i $star_reward$ = %i(0)		:i $GetSongStatsHistory$		:i $GetArraySize$%GLOBAL%$song_stats_history$		:i $GetFirstPlayer$${			StructQBKey local			StructQBKey out = first_player		}$				:i $getplayerinfo$%GLOBAL%$first_player$$band$		:i %GLOBAL%$star_penalty$ = %i(0)		:i $band$ = (%GLOBAL%$band$ - %i(1))		:i $all_gold$ = %i(1)		:i $new_stars$ = %i(0)		:i if (%GLOBAL%$array_size$ >= %i(1))			:i $song_index$ = %i(0)			:i $earned$ = ((%GLOBAL%$song_stats_history$:a{%GLOBAL%$song_index$:a}:a{%GLOBAL%$band$:a}->$band_stars$) - %GLOBAL%$star_penalty$)			:i if (%GLOBAL%$earned$ < %i(0))				:i $earned$ = %i(0)			:i endif			:i if (%GLOBAL%$earned$ > %GLOBAL%$song1_stars_earned$)				:i $SetGlobalTags$%GLOBAL%$current_challenge$$params$ = :s{$song1_stars_earned$ = %GLOBAL%$earned$:s}$savegame$ = %GLOBAL%$savegame$$progression$ = $true$				:i $new_stars$ = (%GLOBAL%$new_stars$ + (%GLOBAL%$earned$ - %GLOBAL%$song1_stars_earned$))			:i endif			:i if ((%GLOBAL%$song_stats_history$:a{%GLOBAL%$song_index$:a}:a{%GLOBAL%$band$:a}->$is_gold_stars$) = %i(0))				:i $all_gold$ = %i(0)			:i endif		:i endif		:i if (%GLOBAL%$all_gold$ = %i(1))			:i $SetGlobalTags$%GLOBAL%$current_challenge$$params$ = :s{$earned_gold_stars$ = %i(1):s}$savegame$ = %GLOBAL%$savegame$$progression$ = $true$		:i endif		:i if ((%GLOBAL%$completed$ = %i(0)) AND (%GLOBAL%$pending_grade$ >= %i(1)))			:i $SetGlobalTags$%GLOBAL%$current_challenge$$params$ = :s{$completed$ = %i(1):s}$savegame$ = %GLOBAL%$savegame$$progression$ = $true$		:i endif		:i if ((%GLOBAL%$completed_gold$ = %i(0)) AND (%GLOBAL%$pending_grade$ >= %i(2)))			:i $SetGlobalTags$%GLOBAL%$current_challenge$$params$ = :s{$completed_gold$ = %i(1):s}$savegame$ = %GLOBAL%$savegame$$progression$ = $true$			:i $new_stars$ = (%GLOBAL%$new_stars$ + (~$star_reward_gold$))		:i endif		:i if ((%GLOBAL%$completed_platinum$ = %i(0)) AND (%GLOBAL%$pending_grade$ >= %i(3)))			:i $SetGlobalTags$%GLOBAL%$current_challenge$$params$ = :s{$completed_platinum$ = %i(1):s}$savegame$ = %GLOBAL%$savegame$$progression$ = $true$			:i $new_stars$ = (%GLOBAL%$new_stars$ + (~$star_reward_platinum$))		:i endif		:i if ((%GLOBAL%$completed_diamond$ = %i(0)) AND (%GLOBAL%$pending_grade$ >= %i(4)))			:i $SetGlobalTags$%GLOBAL%$current_challenge$$params$ = :s{$completed_diamond$ = %i(1):s}$savegame$ = %GLOBAL%$savegame$$progression$ = $true$			:i $new_stars$ = (%GLOBAL%$new_stars$ + (~$star_reward_diamond$))		:i endif		:i $get_current_progression_stars$$savegame$ = %GLOBAL%$savegame$		:i $total_stars$ = (%GLOBAL%$total_stars$ + %GLOBAL%$new_stars$)		:i $set_progression_stars$$new_total_stars$ = %GLOBAL%$total_stars$$savegame$ = %GLOBAL%$savegame$		:i $GetGlobalTags$%GLOBAL%$venue_checksum$$param$ = $venue_stars$$savegame$ = %GLOBAL%$savegame$		:i $SetGlobalTags$%GLOBAL%$venue_checksum$$params$ = :s{$venue_stars$ = (%GLOBAL%$venue_stars$ + %GLOBAL%$new_stars$):s}$savegame$ = %GLOBAL%$savegame$$progression$ = $true$		:i $GetNextPlayer$$local$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i $update_active_players_atoms$	:i $GMan_SetGrade$$goal$ = %GLOBAL%$current_challenge$	:i endfunction]Script get_current_progression_stars 0x2ac7e57f [	:i if NOT $GotParam$${StructQBKey savegame}$		:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i endif	:i if NOT $GetGlobalTags$$quickplay_progression_tags$$param$ = $total_stars$$savegame$ = %GLOBAL%$savegame$$noassert$ = %i(1)		:i return ${StructInt total_stars = 0}$	:i endif	:i return $total_stars$ = %GLOBAL%$total_stars$	:i endfunction]Script set_progression_stars 0x758a6dcd [	${Unknown [00012400af9f18996969696900000000]}$	:i if NOT $GotParam$${StructQBKey savegame}$		:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i endif	:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$$quickplay_progression_tags$$params$ = :s{$total_stars$ = %GLOBAL%$new_total_stars$:s}	:i endfunction]Script get_current_progression_award_points 0x6e7b6524 [	:i if NOT $GotParam$${StructQBKey savegame}$		:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i endif	:i if NOT $GetGlobalTags$$quickplay_progression_tags$$param$ = $total_award_points$$savegame$ = %GLOBAL%$savegame$$noassert$ = %i(1)		:i return ${StructInt total_award_points = 0}$	:i endif	:i return $total_award_points$ = %GLOBAL%$total_award_points$	:i endfunction]Script set_progression_award_points 0x42e25e6d [	${Unknown [000124009fd1910f6969696900000000]}$	:i if NOT $GotParam$${StructQBKey savegame}$		:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i endif	:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$$quickplay_progression_tags$$params$ = :s{$total_award_points$ = %GLOBAL%$new_total_award_points$:s}	:i endfunction]Script Progression_SongWon 0x4993ae69 [	${		StructInt async = 0		StructInt just_completed = 0	}$		:i $update_song_star_rating$	:i if $isSinglePlayerGame$		:i $GetFirstPlayer$${StructQBKey out = player_one}$		:i $getplayerinfo$%GLOBAL%$player_one$$part$	:i else 		:i $part$ = $band$	:i endif	:i $get_highest_difficulty$	:i $get_difficulty_text_nl$$difficulty$ = %GLOBAL%$highest_difficulty$	:i $Playlist_GetCurrentSong$	:i $progression_updatedetailedstatsforgig$	:i %GLOBAL%$song_event$ = $song_won$	:i if $InNetGame$		:i if $SessionIsOver$			:i %GLOBAL%$song_event$ = $song_quit$		:i endif	:i endif	:i $GMan_SendCallbackToAllGoals$$suffix$ = %s("song_complete")$callback_data$ = :s{$event$ = %GLOBAL%$song_event$:s}	:i if (~$autotest_on$ = %i(1))		:i if (~$g_autotest_quickplay_challenges$ = $true$)			:i $quickplay_autotest_write_log$$song_name$ = %GLOBAL%$current_song$		:i else 			:i $career_powers$ = (~$g_autotest_career_powers$)			:i $GetArraySize$%GLOBAL%$career_powers$			:i if (%GLOBAL%$array_size$ > %i(0))				:i $career_autotest_write_log$$song_name$ = %GLOBAL%$current_song$			:i endif		:i endif		:i return $just_completed$ = %GLOBAL%$just_completed$	:i endif	:i if NOT (~$is_in_debug$)		:i if (%GLOBAL%$current_song$ !== $jamsession$)			:i $gamemode_gettype$			:i %GLOBAL%$Score$ = %i(0)			:i %GLOBAL%$stars$ = %i(0)			:i $songlist_get_data_for_songlist_stats$			:i if (%GLOBAL%$async$ = %i(1))				:i $wait$${					StructInt 1					StructQBKey gameframe				}$							:i endif			:i if (%GLOBAL%$type$ = $career$)				:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)				:i %GLOBAL%$current_chapter$ = (~$current_chapter$)				:i %GLOBAL%$chapter_name$ = (~%GLOBAL%$current_chapter$->$name$)				:i $format_career_song_gigtag$$chapter_name$ = %GLOBAL%$chapter_name$$song$ = %GLOBAL%$current_song$				:i $songlist_get_data_for_songlist_stats$				:i %GLOBAL%$setup_encore$ = %i(0)				:i if (%GLOBAL%$stars$ > %i(0))					:i %GLOBAL%$new_stars$ = %GLOBAL%$stars$					:i if $console_is_net_career_client$						:i %GLOBAL%$stars$ = (~$g_net_career_progression$->%GLOBAL%$song_gigtag$->$stars$)					:i else 						:i $GetGlobalTags$$savegame$ = %GLOBAL%$savegame$%GLOBAL%$song_gigtag$$param$ = $stars$					:i endif					:i if (%GLOBAL%$new_stars$ > %GLOBAL%$stars$)						:i if $console_is_net_career_client$							:i $temp_struct$ = (~$g_net_career_progression$->%GLOBAL%$song_gigtag$ + :s{$stars$ = %GLOBAL%$new_stars$:s})							:i $AppendStruct$$struct$ = $g_net_career_progression$$field$ = %GLOBAL%$song_gigtag$$params$ = %GLOBAL%$temp_struct$$globalstruct$						:i else 							:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$%GLOBAL%$song_gigtag$$params$ = :s{$stars$ = %GLOBAL%$new_stars$:s}$progression$ = $true$						:i endif						:i if $quest_progression_check_for_chapter_complete$$savegame$ = %GLOBAL%$savegame$$chapter_global$ = %GLOBAL%$current_chapter$							:i $broadcastevent$$type$ = $encore_complete$$Data$ = :s{$player$ = (~$g_net_leader_player_num$)$controller_index$ = (~$primary_controller$):s}							:i %GLOBAL%$params$ = :s{$completed$ = %i(1):s}							:i if $console_is_net_career_client$								:i %GLOBAL%$params$ = (%GLOBAL%$params$ + :s{$encore_completed_this_session$ = %i(1):s})							:i endif							:i %GLOBAL%$just_completed$ = %i(1)							:i $quest_progression_set_chapter_tags$$savegame$ = %GLOBAL%$savegame$$chapter_global$ = %GLOBAL%$current_chapter$$params$ = %GLOBAL%$params$							:i if (~$g_e3_demo_flow$ = %i(1))								:i $first_tier$ = (~$quest_progression_unlocks$:a{%i(0):a})								:i $first_chapter$ = (%GLOBAL%$first_tier$:a{%i(0):a})								:i $second_chapter$ = (%GLOBAL%$first_tier$:a{%i(1):a})								:i $ui_quest_map_debug_beat$:s{									:i $dominate$ = %i(0)									:i $beat_encore$ = %i(1)									:i $debugging_from_map$ = %i(0)									:i $chapter_name$ = %GLOBAL%$first_chapter$								:i :s}								:i $ui_quest_map_debug_beat$:s{									:i $dominate$ = %i(0)									:i $beat_encore$ = %i(1)									:i $debugging_from_map$ = %i(0)									:i $chapter_name$ = %GLOBAL%$second_chapter$								:i :s}							:i endif						:i endif						:i %GLOBAL%$check_for_transform$ = %i(1)						:i if $quest_progression_is_chapter_finale$							:i %GLOBAL%$check_for_transform$ = %i(0)						:i endif						:i if $quest_progression_is_chapter_credits$							:i %GLOBAL%$check_for_transform$ = %i(0)						:i endif						:i if $quest_progression_is_chapter_rush$							:i %GLOBAL%$check_for_transform$ = %i(0)						:i endif						:i if (%GLOBAL%$check_for_transform$ = %i(1))							:i $quest_progression_get_chapter_tag$$savegame$ = %GLOBAL%$savegame$$chapter_global$ = %GLOBAL%$current_chapter$$param$ = $encore_unlocked$							:i if (%GLOBAL%$encore_unlocked$ = %i(0))								:i $quest_progression_get_encore_stars_required$$chapter_global$ = %GLOBAL%$current_chapter$								:i if (%GLOBAL%$total_stars$ >= %GLOBAL%$encore_stars_required$)									:i %GLOBAL%$params$ = :s{$encore_unlocked$ = %i(1):s}									:i if $console_is_net_career_client$										:i %GLOBAL%$params$ = (%GLOBAL%$params$ + :s{$encore_unlocked_this_session$ = %i(1):s})									:i endif									:i $quest_progression_set_chapter_tags$$savegame$ = %GLOBAL%$savegame$$chapter_global$ = %GLOBAL%$current_chapter$$params$ = %GLOBAL%$params$									:i if $console_is_net_career_client$										:i $temp_struct$ = (~$g_net_career_progression$->$career_progression_tags$ + :s{$encore_ready$ = %i(1):s})										:i $AppendStruct$$struct$ = $g_net_career_progression$$field$ = $career_progression_tags$$params$ = %GLOBAL%$temp_struct$$globalstruct$									:i else 										:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$$career_progression_tags$$params$ = :s{$encore_ready$ = %i(1):s}$progression$ = $true$									:i endif									:i $quest_progression_add_transformation_songs$$chapter_global$ = %GLOBAL%$current_chapter$									:i %GLOBAL%$setup_encore$ = %i(1)								:i endif							:i endif						:i endif					:i endif				:i endif				:i if (~$debug_career_transformations$ = %i(1))					:i $change$${StructInt debug_career_transformations = 0}$					:i if (%GLOBAL%$setup_encore$ = %i(0))						:i $quest_progression_set_chapter_tags$$savegame$ = %GLOBAL%$savegame$$chapter_global$ = %GLOBAL%$current_chapter$$params$ = :s{$encore_unlocked$ = %i(1):s}						:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$$career_progression_tags$$params$ = :s{$encore_ready$ = %i(1):s}$progression$ = $true$						:i $quest_progression_add_transformation_songs$$chapter_global$ = %GLOBAL%$current_chapter$					:i endif				:i endif				:i $change$${StructInt g_net_song_won_update = 1}$				:i if (%GLOBAL%$async$ = %i(1))					:i $wait$${						StructInt 1						StructQBKey gameframe					}$									:i endif				:i $update_active_players_atoms$$async$ = %GLOBAL%$async$				:i if (%GLOBAL%$async$ = %i(1))					:i $wait$${						StructInt 1						StructQBKey gameframe					}$									:i endif				:i $change$${StructInt g_net_song_won_update = 0}$			:i endif			:i if ((%GLOBAL%$type$ = $career$) OR (%GLOBAL%$type$ = $quickplay$) OR (%GLOBAL%$type$ = $competitive$))				:i $increment_num_times_played$:s{					:i $song_id$ = (~$last_song_played$)				:i :s}			:i endif		:i endif		:i if $IsXenonOrWinDX$			:i if NOT (%GLOBAL%$current_song$ = $jamsession$)				:i $WriteSongDataToFile$			:i endif		:i endif	:i endif	:i return $just_completed$ = %GLOBAL%$just_completed$	:i endfunction]Script Progression_SongFailed f2702158 [	:i $printf$${StructQBStringQs b3ef858d}$	:i if (~$game_mode$ = $career$)		:i $update_active_players_atoms$	:i endif	:i if (~$current_song$ !== ~$last_song_failed$)		:i $change$$last_song_failed$ = (~$current_song$)		:i $change$${StructInt current_song_failed_num = 1}$	:i else 		:i $change$$current_song_failed_num$ = (~$current_song_failed_num$ + %i(1))	:i endif	:i if (~$current_song_failed_num$ < %i(3))		:i if $IsXenonOrWinDX$			:i if NOT $is_current_song_a_jam_session$				:i $WriteSongDataToFile$${StructInt failed = 1}$			:i endif		:i endif	:i endif	:i endfunction]Script update_song_star_rating 0x2878b2f5 [	:i $GetNumPlayersInGame$${StructQBKey local}$	:i $GetFirstPlayer$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ > %i(0))		:i while 		:i $getplayerinfo$%GLOBAL%$player$$projected_song_stars$		:i $getplayerinfo$%GLOBAL%$player$$band$		:i %GLOBAL%$stars$ = %GLOBAL%$projected_song_stars$		:i $CastToInteger$${StructQBKey stars}$		:i $SetPlayerInfo$%GLOBAL%$player$$stars$ = %GLOBAL%$stars$		:i $GetBandInfo$%GLOBAL%$band$$projected_song_stars$$out$ = $band_projected_song_stars$		:i $band_stars$ = %GLOBAL%$band_projected_song_stars$		:i $CastToInteger$${StructQBKey band_stars}$		:i $SetBandInfo$%GLOBAL%$band$$stars$ = %GLOBAL%$band_stars$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to %GLOBAL%$num_players$	:i endif	:i endfunction]Script get_player_percent_accuracy 0x8f8c165c [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player_index			]		}		StructQBKey all	}$		:i if NOT $playerinfoequals$%GLOBAL%$player_index$$part$ = $Vocals$		:i $getplayerinfo$%GLOBAL%$player_index$$notes_hit$		:i $getplayerinfo$%GLOBAL%$player_index$$max_notes$		:i if (%GLOBAL%$max_notes$ > %i(0))			:i %GLOBAL%$percent_notes_hit$ = (((%GLOBAL%$notes_hit$ * %f(1.0)) / %GLOBAL%$max_notes$) * %f(100.0))		:i else 			:i %GLOBAL%$percent_notes_hit$ = %i(0)		:i endif	:i else 		:i $getplayerinfo$%GLOBAL%$player_index$$vocal_phrase_quality$		:i $getplayerinfo$%GLOBAL%$player_index$$vocal_phrase_max_qual$		:i if (%GLOBAL%$vocal_phrase_max_qual$ > %i(0))			:i %GLOBAL%$percent_notes_hit$ = (((%GLOBAL%$vocal_phrase_quality$ * %f(1.0)) / %GLOBAL%$vocal_phrase_max_qual$) * %f(100.0))		:i else 			:i %GLOBAL%$percent_notes_hit$ = %i(0)		:i endif	:i endif	:i $MathFloor$%GLOBAL%$percent_notes_hit$	:i %GLOBAL%$percent_notes_hit$ = %GLOBAL%$floor$	:i return $percent_notes_hit$ = %GLOBAL%$percent_notes_hit$	:i endfunction]SectionInteger end_credits 0Script unlock_career_finale_video_and_achievement 0x0b37d1d9 [	:i $GetArraySize$${StructQBString Bonus_Videos}$	:i $i$ = %i(0)	:i while 	:i $video_id$ = (((~$Bonus_Videos$):a{%GLOBAL%$i$:a})->$id$)	:i if (%GLOBAL%$video_id$ = $career_ending$)		:i $GetNumPlayersInGame$${StructQBKey local}$		:i $GetFirstPlayer$${StructQBKey local}$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$controller$		:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$		:i $SetGlobalTags$$savegame$ = %GLOBAL%$savegame$%GLOBAL%$video_id$$params$ = :s{$unlocked$ = %i(1):s}$packtype$ = $unlockedtags$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$		:i loop_to %GLOBAL%$num_players$	:i endif	:i $i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i endfunction]Script unlock_and_goto_credits 0x35d9aec5 [	:i $unlock_career_finale_video_and_achievement$	:i if $InInternetMode$		:i $band_lobby_career_mark_save_local_players$		:i $ui_event_wait$${			StructQBKey event = menu_change			StructQBKey state = uistate_end_credits		}$			:i else 		:i $ui_memcard_autosave_all_players$${			StructQBKey event = menu_change			StructQBKey state = uistate_end_credits		}$			:i endif	:i endfunction]Script Progression_EndCredits fd241958 [	:i $Playlist_Clear$	:i $Progression_GetCreditsSong$	:i $Playlist_SetCurrentSong$$song$ = %GLOBAL%$credits_song$	:i $SFX_Backgrounds_New_Area$${		StructQBKey BG_SFX_Area = frontend		StructInt fadeouttime = 2		StructQBKey fadeouttype = linear	}$		:i $audio_final_battle_outro_preload_stream$	:i if (~$g_career_movie_stream$ !== $None$)		:i $printf$${			StructQBStringQs b15638bb			StructQBString s = g_career_movie_stream		}$				:i $StartPreLoadedStream$${			StructQBString g_career_movie_stream			StructQBKey buss = Encore_Events			StructInt forcesafepreload = 1			StructFloat vol = 0.00		}$			:i endif	:i if $MemHeapExists$${StructQBKey name = heap_song}$		:i $destroy_song_and_musicstudio_heaps$${StructQBKey do_unloads}$	:i endif	:i $SetBinkHeap$${StructQBKey heap_cas_cache}$	:i $PlayMovieAndWait$${		StructQBKey noblack		StructString movie = "career_ending"		StructQBKey noskip	}$		:i $ui_quest_get_vo_array$${StructQBKey chapter_name = quest_chapter_finale}$	:i $recent_unlock_data$ = (~$g_quest_recent_unlocked_awards$)	:i $GetArraySize$%GLOBAL%$recent_unlock_data$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $PlayMovieAndWait$${			StructQBKey noblack			StructString movie = "credits_movie"		}$				:i $SetBinkHeap$${StructQBKey heap_bink}$		:i $create_song_and_musicstudio_heaps$		:i if $InInternetMode$			:i $band_lobby_career_mark_save_local_players$			:i $ui_event_wait$:s{				:i $event$ = $menu_change$				:i $state$ = $UIstate_quest_unlocks$				:i $Data$ = :s{					:i $next_state_name$ = $UIstate_quest_map$					:i $next_state_params$ = :s{						:i $play_outro_vo$ = %i(1)						:i $outro_vo_strings$ = %GLOBAL%$vo_array$					:i :s}				:i :s}			:i :s}		:i else 			:i $ui_memcard_autosave$:s{				:i $event$ = $menu_change$				:i $state$ = $UIstate_quest_unlocks$				:i $Data$ = :s{					:i $next_state_name$ = $UIstate_quest_map$					:i $next_state_params$ = :s{$play_outro_vo$ = %i(1)$outro_vo_strings$ = %GLOBAL%$vo_array$:s}				:i :s}			:i :s}		:i endif	:i else 		:i $SetBinkHeap$${StructQBKey heap_bink}$		:i $create_song_and_musicstudio_heaps$		:i $next_state_event$ = $menu_back$		:i $next_state_name$ = $UIstate_quest_map$		:i $next_state_params$ = :s{$play_outro_vo$ = %i(0)$outro_vo_strings$ = %GLOBAL%$vo_array$:s}		:i if $InInternetMode$			:i $band_lobby_career_mark_save_local_players$			:i $ui_event_wait$:s{				:i $event$ = %GLOBAL%$next_state_event$				:i $state$ = %GLOBAL%$next_state_name$				:i $Data$ = :s{					:i $next_state_name$ = $UIstate_quest_map$					:i $next_state_params$ = %GLOBAL%$next_state_params$				:i :s}			:i :s}		:i else 			:i $ui_memcard_autosave$:s{				:i $event$ = %GLOBAL%$next_state_event$				:i $state$ = %GLOBAL%$next_state_name$				:i $Data$ = :s{					:i $next_state_name$ = $UIstate_quest_map$					:i $next_state_params$ = %GLOBAL%$next_state_params$				:i :s}			:i :s}		:i endif	:i endif	:i $change$${StructInt end_credits = 0}$	:i endfunction]Script Progression_EndCredits_Song 0x1920aa4e [	${StructQBKey state_event = menu_replace}$	:i $Progression_GetCreditsVenue$	:i $change$$current_level$ = %GLOBAL%$credits_venue$	:i $create_loading_screen$	:i $ui_memcard_autosave_all_players$:s{		:i $event$ = %GLOBAL%$state_event$		:i $state$ = $UIState_Gameplay$	:i :s}	:i $Load_Venue$	:i while 	:i if NOT $ui_event_exists_in_stack$${StructString name = "memcard"}$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i $printf$${StructString 0x00000000 = "waiting for autosave to finish"}$	:i loop_to 	:i $audio_crowd_setup_based_on_zone$	:i $create_song_and_musicstudio_heaps$	:i if NOT $ui_event_exists_in_stack$${StructString name = "gameplay"}$		:i if (~$is_in_debug$ = %i(0))			:i return 		:i else 			:i $Playlist_SetCurrentSong$$song$ = %GLOBAL%$credits_song$			:i $generic_event_choose$${StructQBKey state = uistate_play_song}$		:i endif	:i else 		:i $change$${StructInt gameplay_restart_song = 1}$		:i $generic_event_back$${			StructQBKey nosound			StructQBKey state = UIState_Gameplay		}$			:i endif	:i $spawnscriptnow$${StructQBKey scrolling_list_begin_credits}$	:i endfunction]Script Progression_EndCredits_Done 0x7d9ac209 [	:i $destroy_credits_menu$	:i endfunction]Script Progression_GetCreditsSong e0e936cd [	:i %GLOBAL%$song$ = (~$quest_chapter_demigod$->$songs$:a{%i(0):a})	:i return $credits_song$ = %GLOBAL%$song$	:i endfunction]Script Progression_GetCreditsVenue 0x3f5054fd [	:i return ${StructQBKey credits_venue = load_z_credits}$	:i endfunction]Script Progression_SetProgressionNodeFlags 0x70d8546a [	:i $ChangeNodeFlag$${		StructQBKey LS_ALWAYS		StructInt 1	}$		:i $ls_encore$ = %i(0)	:i $ls_3_5$ = %i(0)	:i if (~$debug_encore$)		:i %GLOBAL%$ls_encore$ = %i(1)	:i endif	:i if (~$encore_transitioned_played$ = $true$)		:i $ls_encore$ = %i(1)	:i else 		:i $gamemode_gettype$		:i if (%GLOBAL%$type$ = $career$)			:i $GetPakManCurrent$${StructQBKey map = zones}$			:i if $is_encore_song$				:i $ls_encore$ = %i(1)			:i endif		:i endif	:i endif	:i if (%GLOBAL%$ls_encore$ = %i(1))		:i $ChangeNodeFlag$${			StructQBKey LS_3_5_PRE			StructInt 0		}$				:i $ChangeNodeFlag$${			StructQBKey LS_3_5_POST			StructInt 1		}$				:i $ChangeNodeFlag$${			StructQBKey LS_ENCORE_PRE			StructInt 0		}$				:i $ChangeNodeFlag$${			StructQBKey ls_encore_post			StructInt 1		}$			:i elseif (%GLOBAL%$ls_3_5$ = %i(1))		:i $ChangeNodeFlag$${			StructQBKey LS_3_5_PRE			StructInt 0		}$				:i $ChangeNodeFlag$${			StructQBKey LS_3_5_POST			StructInt 1		}$				:i $ChangeNodeFlag$${			StructQBKey LS_ENCORE_PRE			StructInt 1		}$				:i $ChangeNodeFlag$${			StructQBKey ls_encore_post			StructInt 0		}$			:i else 		:i $ChangeNodeFlag$${			StructQBKey LS_3_5_PRE			StructInt 1		}$				:i $ChangeNodeFlag$${			StructQBKey LS_3_5_POST			StructInt 0		}$				:i $ChangeNodeFlag$${			StructQBKey LS_ENCORE_PRE			StructInt 1		}$				:i $ChangeNodeFlag$${			StructQBKey ls_encore_post			StructInt 0		}$			:i endif	:i $GetPakManCurrentName$${StructQBKey map = zones}$	:i if $GotParam$${StructQBKey pakname}$		:i $FormatText$$checksumname$ = $zone_setup$%s("%s_SetupNodeflags")$s$ = %GLOBAL%$pakname$		:i if $ScriptExists$%GLOBAL%$zone_setup$			:i $spawnscriptnow$%GLOBAL%$zone_setup$		:i endif	:i endif	:i endfunction]Script Progression_ClearDetailedStatsForGig 0x5085a947 [	:i $change$${		StructArray song_stats_backup		{			ArrayStruct			[				StructHeader {}			]		}	}$		:i $change$${		StructArray song_stats_backup_band		{			ArrayStruct			[				StructHeader {}			]		}	}$		:i endfunction]Script progression_updatedetailedstatsforgig 0x225af00d [	:i $Playlist_GetCurrentSong$	:i $Progression_ClearDetailedStatsForGig$	:i %GLOBAL%$default_song_stats$ = :s{		:i $song$ = %GLOBAL%$current_song$	:i :s}	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $career$)		:i $current_chapter$ = (~$current_chapter$)		:i $format_career_song_gigtag$$chapter_name$ = (~%GLOBAL%$current_chapter$->$name$)$song$ = %GLOBAL%$current_song$	:i endif	:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ > %i(0))		:i $GetFirstPlayer$		:i while 		:i $getplayerinfo$%GLOBAL%$player$$Score$		:i $CastToInteger$${StructQBKey Score}$		:i $getplayerinfo$%GLOBAL%$player$$is_local_client$		:i $previous_stars$ = %i(0)		:i if ((%GLOBAL%$type$ = $career$) AND (%GLOBAL%$is_local_client$ = %i(1)))			:i if $console_is_net_career_client$				:i $stars$ = (~$g_net_career_progression$->%GLOBAL%$song_gigtag$->$stars$)			:i else 				:i $getplayerinfo$%GLOBAL%$player$$controller$				:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$				:i $GetGlobalTags$$savegame$ = %GLOBAL%$savegame$%GLOBAL%$song_gigtag$			:i endif			:i $previous_stars$ = %GLOBAL%$stars$		:i endif		:i $getplayerinfo$%GLOBAL%$player$$stars$		:i $getplayerinfo$%GLOBAL%$player$$notes_hit$		:i $getplayerinfo$%GLOBAL%$player$$total_notes$		:i $getplayerinfo$%GLOBAL%$player$$notes_created$		:i $getplayerinfo$%GLOBAL%$player$$sp_phrases_hit$		:i $getplayerinfo$%GLOBAL%$player$$sp_phrases_total$		:i $getplayerinfo$%GLOBAL%$player$$best_run$		:i $getplayerinfo$%GLOBAL%$player$$max_notes$		:i $getplayerinfo$%GLOBAL%$player$$vocal_streak_phrases$		:i $getplayerinfo$%GLOBAL%$player$$vocal_phrase_quality$		:i $getplayerinfo$%GLOBAL%$player$$vocal_phrase_max_qual$		:i $get_average_multiplier$$player$ = %GLOBAL%$player$		:i %GLOBAL%$avg_multiplier$ = %GLOBAL%$average_multiplier$		:i $get_song_section_arrays_for_player$$player$ = %GLOBAL%$player$		:i %GLOBAL%$curr_song_stats$ = :s{			:i %GLOBAL%$default_song_stats$			:i $Score$ = %GLOBAL%$Score$			:i $stars$ = %GLOBAL%$stars$			:i $previous_stars$ = %GLOBAL%$previous_stars$			:i $notes_hit$ = %GLOBAL%$notes_hit$			:i $best_run$ = %GLOBAL%$best_run$			:i $max_notes$ = %GLOBAL%$max_notes$			:i $total_notes$ = %GLOBAL%$total_notes$			:i $notes_created$ = %GLOBAL%$notes_created$			:i $sp_phrases_hit$ = %GLOBAL%$sp_phrases_hit$			:i $sp_phrases_total$ = %GLOBAL%$sp_phrases_total$			:i $avg_multiplier$ = %GLOBAL%$avg_multiplier$			:i $vocal_streak_phrases$ = %GLOBAL%$vocal_streak_phrases$			:i $vocal_phrase_quality$ = %GLOBAL%$vocal_phrase_quality$			:i $vocal_phrase_max_qual$ = %GLOBAL%$vocal_phrase_max_qual$			:i $detailed_stats$ = %GLOBAL%$detailed_stats$			:i $detailed_stats_max$ = %GLOBAL%$detailed_stats_max$			:i $section_names$ = %GLOBAL%$section_names$		:i :s}		:i %GLOBAL%$stats_all$ = (~$song_stats_backup$)		:i $SetArrayElement$$arrayName$ = $stats_all$$index$ = (%GLOBAL%$player$ - %i(1))$newValue$ = %GLOBAL%$curr_song_stats$		:i $change$$globalname$ = $song_stats_backup$$newValue$ = %GLOBAL%$stats_all$		:i $GetNextPlayer$$player$ = %GLOBAL%$player$		:i loop_to %GLOBAL%$num_players$	:i endif	:i $GetBandsStatus$	:i if $GotParam$${StructQBKey bands}$		:i $GetArraySize$%GLOBAL%$bands$		:i $bands_size$ = %GLOBAL%$array_size$		:i if (%GLOBAL%$bands_size$ > %i(0))			:i $band_idx$ = %i(0)			:i while 			:i $band$ = (%GLOBAL%$band_idx$ + %i(1))			:i $GetBandInfo$%GLOBAL%$band$$stars$			:i $GetBandInfo$%GLOBAL%$band$$Score$			:i $GetBandInfo$%GLOBAL%$band$$high_mult$			:i $GetBandInfo$%GLOBAL%$band$$high_1p_streak$			:i $GetBandInfo$%GLOBAL%$band$$high_2p_streak$			:i $GetBandInfo$%GLOBAL%$band$$high_3p_streak$			:i $GetBandInfo$%GLOBAL%$band$$high_4p_streak$			:i $GetBandInfo$%GLOBAL%$band$$band_moments_hit$			:i $GetBandInfo$%GLOBAL%$band$$band_moments_possible$			:i $current_band_stats$ = :s{				:i $stars$ = %GLOBAL%$stars$				:i $Score$ = %GLOBAL%$Score$				:i $high_mult$ = %GLOBAL%$high_mult$				:i $high_1p_streak$ = %GLOBAL%$high_1p_streak$				:i $high_2p_streak$ = %GLOBAL%$high_2p_streak$				:i $high_3p_streak$ = %GLOBAL%$high_3p_streak$				:i $high_4p_streak$ = %GLOBAL%$high_4p_streak$				:i $band_moments_hit$ = %GLOBAL%$band_moments_hit$				:i $band_moments_possible$ = %GLOBAL%$band_moments_possible$			:i :s}			:i %GLOBAL%$band_stats_all$ = (~$song_stats_backup_band$)			:i $SetArrayElement$$arrayName$ = $band_stats_all$$index$ = %GLOBAL%$band_idx$$newValue$ = %GLOBAL%$current_band_stats$			:i $change$$globalname$ = $song_stats_backup_band$$newValue$ = %GLOBAL%$band_stats_all$			:i $band_idx$ = (%GLOBAL%$band_idx$ + %i(1))			:i loop_to %GLOBAL%$bands_size$		:i endif	:i endif	:i if NOT $GotParam$${StructQBKey failed_or_practice}$		:i $AddHistoryForCurrentSong$	:i endif	:i endfunction]Script get_song_section_arrays_for_player 0x18cc4603 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				player			]		}		StructQBKey all	}$		:i %GLOBAL%$detailed_stats$ = :a{:a}	:i %GLOBAL%$detailed_stats_max$ = :a{:a}	:i %GLOBAL%$section_names$ = :a{:a}	:i $FormatText$$checksumname$ = $last_song_stats$%s("p%p_last_song_detailed_stats")$p$ = %GLOBAL%$player$$addtostringlookup$ = $true$	:i $FormatText$$checksumname$ = $last_song_stats_max$%s("p%p_last_song_detailed_stats_max")$p$ = %GLOBAL%$player$$addtostringlookup$ = $true$	:i $get_song_section_array$$player$ = %GLOBAL%$player$	:i $GetArraySize$%GLOBAL%$song_section_array$	:i if (%GLOBAL%$array_size$ > %i(0))		:i %GLOBAL%$detailed_stats$ = (~%GLOBAL%$last_song_stats$)		:i %GLOBAL%$detailed_stats_max$ = (~%GLOBAL%$last_song_stats_max$)		:i $i$ = %i(0)		:i while 		:i $FormatText$$textname$ = $marker_text$^[73307931]^$s$ = ((%GLOBAL%$song_section_array$:a{%GLOBAL%$i$:a})->$marker$)		:i $AddArrayElement$$array$ = %GLOBAL%$section_names$$element$ = %GLOBAL%$marker_text$		:i %GLOBAL%$section_names$ = %GLOBAL%$array$		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i return $detailed_stats$ = %GLOBAL%$detailed_stats$$detailed_stats_max$ = %GLOBAL%$detailed_stats_max$$section_names$ = %GLOBAL%$section_names$	:i endfunction]Script get_progression_player_and_controller 0x797fb8df [	${Unknown [000124001b0509c56969696900000000]}$	:i %GLOBAL%$target_savegame$ = %GLOBAL%$savegame$	:i %GLOBAL%$num_matches$ = %i(0)	:i %GLOBAL%$last_matching_player$ = %i(0)	:i %GLOBAL%$ret$ = $true$	:i $GetNumPlayersInGame$${StructQBKey local}$	:i if (%GLOBAL%$num_players$ < %i(1))		:i return ${StructQBKey ret = false}$	:i endif	:i $GetFirstPlayer$${StructQBKey local}$	:i while 	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i $GetSavegameFromController$$controller$ = %GLOBAL%$controller$	:i if (%GLOBAL%$target_savegame$ = %GLOBAL%$savegame$)		:i %GLOBAL%$num_matches$ = (%i(1) + %GLOBAL%$num_matches$)		:i %GLOBAL%$last_matching_player$ = %GLOBAL%$player$	:i endif	:i $GetNextPlayer$$player$ = %GLOBAL%$player$$local$	:i loop_to %GLOBAL%$num_players$	:i if (%i(1) = %GLOBAL%$num_matches$)		:i $getplayerinfo$%GLOBAL%$last_matching_player$$controller$		:i $AddParam$$structure_name$ = $return_struct$$name$ = $player$$value$ = %GLOBAL%$last_matching_player$		:i $AddParam$$structure_name$ = $return_struct$$name$ = $controller_index$$value$ = %GLOBAL%$controller$	:i else 		:i %GLOBAL%$ret$ = $false$	:i endif	:i return %GLOBAL%$ret$%GLOBAL%$return_struct$	:i endfunction]