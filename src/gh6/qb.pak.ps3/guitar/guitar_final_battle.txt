Unknown [1c00000000000000000007ac0000000000000000]SectionInteger is_ampzilla_battle 0Script final_battle_win_song_check 0x2ba58715 [	:i $getplayerinfo$(~$g_net_leader_player_num$)$band$	:i $GetBandInfo$%GLOBAL%$band$$projected_song_stars$	:i $quest_progression_get_current_song_num$	:i $FormatText$$checksumname$ = $stars_for_song$%s("stars_for_song%d")$d$ = %GLOBAL%$song_num$$addtostringlookup$ = $true$	:i if NOT $StructureContains$$structure$ = ~$quest_chapter_finale$$name$ = %GLOBAL%$stars_for_song$		:i $scriptassert$%s("Missing %a in structure %b!")$a$ = %GLOBAL%$stars_for_song$$b$ = (~$quest_chapter_finale$->$name$)	:i endif	:i %GLOBAL%$required_stars$ = (~$quest_chapter_finale$->%GLOBAL%$stars_for_song$)	:i if (%GLOBAL%$projected_song_stars$ < %GLOBAL%$required_stars$ AND (~$cheat_invincible$) = %i(0))		:i $hud_final_battle_diminish_power$		:i return ${StructQBKey false}$	:i endif	:i return ${StructQBKey true}$	:i endfunction]SectionInteger failed_song_at_end_of_finalbattle 0Script final_battle_win_song 0x5cde83f7 [	:i $change$${StructInt failed_song = 0}$	:i $change$${StructInt failed_song_at_end_of_finalbattle = 0}$	:i $GetFirstPlayer$${StructQBKey out = first_player}$	:i if (%GLOBAL%$player$ = %GLOBAL%$first_player$)		:i $change$${StructInt num_players_finished = 0}$	:i endif	:i $SongFileManager$$func$ = $get_song_end_time$$song_name$ = %GLOBAL%$song_name$$career$ = $true$	:i $total_end_time_career$ = %GLOBAL%$total_end_time$	:i $SongFileManager$$func$ = $get_song_end_time$$song_name$ = %GLOBAL%$song_name$$career$ = $false$	:i $printf$^[037498f0]^$s$ = %GLOBAL%$total_end_time$	:i $TimeMarkerReached_SetParams$$time_offset$ = %i(0)$time$ = %GLOBAL%$total_end_time$	:i while 	:i if $TimeMarkerReached$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i $TimeMarkerReached_ClearParams$	:i if NOT $final_battle_win_song_check$		:i %GLOBAL%$event$ = $song_failed$		:i $change$${StructInt failed_song_at_end_of_finalbattle = 1}$		:i $extendcrcplayer$%GLOBAL%$event$%GLOBAL%$player$$out$ = $type$		:i $broadcastevent$$type$ = %GLOBAL%$type$		:i return 	:i endif	:i $TimeMarkerReached_SetParams$$time_offset$ = %i(0)$time$ = %GLOBAL%$total_end_time_career$	:i while 	:i if $TimeMarkerReached$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i $GetNumPlayersInGame$	:i if (%GLOBAL%$num_players$ = %i(2))		:i $wait_on_player$ = %i(2)	:i else 		:i $wait_on_player$ = %i(1)	:i endif	:i if $quest_progression_is_chapter_rush$		:i $wait$${			StructQBString Rush_set_song_win_delay			StructQBKey seconds		}$			:i else 		:i $wait$${			StructQBString Song_Win_Delay			StructQBKey seconds		}$			:i endif	:i $change$$num_players_finished$ = (~$num_players_finished$ + %i(1))	:i $GetNumPlayersInGame$${StructQBKey on_screen}$	:i if (~$num_players_finished$ >= %GLOBAL%$num_players_shown$)		:i if (~$is_network_game$)			:i $spawnscriptnow$${StructQBKey online_end_song}$		:i else 			:i %GLOBAL%$event$ = $song_won$			:i $extendcrcplayer$%GLOBAL%$event$%GLOBAL%$player$$out$ = $type$			:i $broadcastevent$$type$ = %GLOBAL%$type$		:i endif	:i endif	:i endfunction]Script hud_final_battle_star_up a25ee033 [	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $career$)		:i if (~$current_chapter$ = $quest_chapter_finale$)			:i $quest_progression_get_current_song_num$			:i $FormatText$$checksumname$ = $stars_for_song$%s("stars_for_song%d")$d$ = %GLOBAL%$song_num$			:i if $StructureContains$$structure$ = ~$quest_chapter_finale$$name$ = %GLOBAL%$stars_for_song$				:i %GLOBAL%$max_zilla_stars$ = (~$quest_chapter_finale$->%GLOBAL%$stars_for_song$ * %f(1.0))				:i if (%GLOBAL%$stars$ >= %GLOBAL%$max_zilla_stars$)					:i %GLOBAL%$stars$ = %GLOBAL%$max_zilla_stars$					:i $hud_final_battle_full_stars$				:i endif				:i $zilla_meter_length$ = %f(205.0)				:i $zilla_meter_height$ = %f(137.0)				:i %GLOBAL%$zilla_percent$ = (%GLOBAL%$stars$ / %GLOBAL%$max_zilla_stars$)				:i %GLOBAL%$zilla_height$ = (%GLOBAL%$zilla_percent$ * %GLOBAL%$zilla_meter_height$)				:i %GLOBAL%$dims$ = ((%vec2(1.0,0.0) * %GLOBAL%$zilla_meter_length$) + (%GLOBAL%$zilla_height$ * %vec2(0.0,1.0)))				:i $DMG_start_pos$ = %vec2(36.0,205.0)				:i $DMG_Line_pos_range$ = %i(4294967156)				:i %GLOBAL%$DMG_delta$ = (%GLOBAL%$DMG_Line_pos_range$ / %GLOBAL%$max_zilla_stars$)				:i $new_pos$ = (%GLOBAL%$DMG_start_pos$ + (%vec2(0.0,1.0) * %GLOBAL%$stars$ * %GLOBAL%$DMG_delta$))				:i if $ScreenElementExists$${StructQBKey id = hud_star_meter_id}$					:i $hud_star_meter_id$.$se_setprops$$guitar_fill_mask_dims$ = %GLOBAL%$dims$$time$ = %f(0.2000000)					:i $hud_star_meter_id$.$se_setprops$$DMG_Line_pos$ = %GLOBAL%$new_pos$$time$ = %f(0.2000000)				:i endif			:i endif		:i endif	:i endif	:i endfunction]Script is_final_battle_star_songs 0x561d7b66 [	:i $gamemode_gettype$	:i if (%GLOBAL%$type$ = $career$)		:i if $quest_progression_is_chapter_finale$			:i %GLOBAL%$current_song$ = $None$			:i $Playlist_GetCurrentSong$			:i $get_finalbattle_song_number$$song$ = %GLOBAL%$current_song$			:i if (%GLOBAL%$song_number$ = %i(0) OR %GLOBAL%$song_number$ = %i(1) OR %GLOBAL%$song_number$ = %i(2))				:i return ${StructQBKey true}$			:i endif		:i endif	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script hud_final_battle_diminish_power 0x81d8c654 [	:i if ((~$is_ampzilla_battle$) !== %i(1))		:i return 	:i endif	:i if NOT $hud_root$.$desc_resolvealias$${			StructQBKey name = alias_hud_meter_star			StructQBKey param = star_meter		}$				:i $printf$${			StructQBKey channel = zdebug			StructQBStringQs ccccee13		}$				:i return 	:i endif	:i if NOT $hud_root$.$desc_resolvealias$${			StructQBKey name = alias_final_power_meter			StructQBKey param = zilla_meter		}$				:i $printf$${			StructQBKey channel = zdebug			StructQBStringQs 0x06e05b66		}$				:i return 	:i endif	:i %GLOBAL%$zilla_percent$ = %f(0.0)	:i $GetScreenElementDims$$id$ = %GLOBAL%$zilla_meter$	:i %GLOBAL%$dims$ = ((%vec2(1.0,0.0) * %GLOBAL%$zilla_percent$) + (%GLOBAL%$height$ * %vec2(0.0,1.0)))	:i %GLOBAL%$zilla_meter$.$se_setprops$$fill_dims$ = %GLOBAL%$dims$	:i $wait$${		StructInt 2		StructQBKey seconds	}$		:i endfunction]Script hud_final_battle_full_stars 0x1eef4ff4 [	:i if $ScreenElementExists$${StructQBKey id = hud_star_meter_id}$		:i $hud_star_meter_id$.$se_setprops$${StructInt HUD_demigod_guitar_full_glow_alpha = 1}$	:i endif	:i endfunction]