Unknown [1c00000000000000000007fc0000000000000000]Script savegame_scan_all_players_for_progress_save daeba085 [	:i $GetMaxControllerSignins$	:i $userid$ = %i(0)	:i while 	:i if $savegame_scan_for_progress_save$$userid$ = %GLOBAL%$userid$		:i $found_progress$ = %i(1)		:i continue	:i else 		:i if $GotParam$${StructQBKey errorcode}$			:i continue		:i endif	:i endif	:i $userid$ = (%GLOBAL%$userid$ + %i(1))	:i loop_to %GLOBAL%$max_signins$	:i if $GotParam$${StructQBKey found_progress}$		:i return $true$$userid$ = %GLOBAL%$userid$	:i endif	:i if $GotParam$${StructQBKey errorcode}$		:i return $false$$userid$ = %GLOBAL%$userid$$errorcode$ = %GLOBAL%$errorcode$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script savegame_scan_for_progress_save fbadec24 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				userid			]		}		StructQBKey all	}$		:i if $IsXenonOrWinDX$		:i if $NetSessionFunc$$func$ = $xenonisguest$$params$ = :s{$controller_index$ = %GLOBAL%$userid$:s}			:i return ${StructQBKey false}$		:i endif	:i endif	:i if NOT $CheckForSignin$$local$$controller_index$ = %GLOBAL%$userid$		:i return ${StructQBKey false}$	:i endif	:i if $IsXenon$		:i if NOT $is_controller_connected$$controller$ = %GLOBAL%$userid$			:i return ${StructQBKey false}$		:i endif	:i endif	:i $RemoveParameter$${StructQBKey folderlisting}$	:i $RemoveParameter$${StructQBKey result}$	:i $change$$MemcardController$ = %GLOBAL%$userid$	:i $MC_SetToUseAnyStorageDevice$$userid$ = %GLOBAL%$userid$	:i $printf$${StructString 0x00000000 = "MC_SetActivePlayer"}$	:i $MC_SetActivePlayer$$userid$ = %GLOBAL%$userid$	:i $printf$${StructString 0x00000000 = "MC_EnumerateFolders"}$	:i $MC_EnumerateFolders$${StructQBKey progress_only}$	:i $printstruct$ isNull 	:i if (%GLOBAL%$result$ = $true$)		:i if $GotParam$${StructQBKey folderlisting}$			:i if $savegame_find_most_recent_progress$$folderlisting$ = %GLOBAL%$folderlisting$$userid$ = %GLOBAL%$userid$				:i if $IsPS3$					:i $device$ = $hdd$				:i endif				:i $printf$%s("Success! UserID %p has a valid progress save. Device=%d")$p$ = %GLOBAL%$userid$$d$ = %GLOBAL%$device$				:i $found_progress_userid$ = %GLOBAL%$userid$				:i $printstruct$ isNull 			:i endif		:i endif	:i else 		:i $MC_InvalidateStorageDevice$$userid$ = %GLOBAL%$userid$	:i endif	:i if $GotParam$${StructQBKey errorcode}$		:i $RemoveParameter$${StructQBKey found_progress_userid}$	:i endif	:i if $GotParam$${StructQBKey found_progress_userid}$		:i if $IsXenonOrWinDX$			:i $MC_SetActiveStorageDevice$$userid$ = %GLOBAL%$userid$$device$ = (%GLOBAL%$progress_header$->$device$)		:i endif		:i $printf$${StructString 0x00000000 = "MC_EnumerateFolders"}$		:i $MC_EnumerateFolders$		:i if (%GLOBAL%$result$ = $true$)			:i $printf$${StructString 0x00000000 = "MC_SetActiveFolder"}$			:i $MC_SetActiveFolder$${StructQBString foldername = memcard_content_name}$			:i $printf$${StructString 0x00000000 = "MC_LoadTOCInActiveFolder"}$			:i $MC_LoadTOCInActiveFolder$			:i if (%GLOBAL%$result$ = $true$)				:i $enumeration_success$ = %i(1)			:i else 				:i $errorcode$ = $corrupt$			:i endif		:i endif		:i if NOT $GotParam$${StructQBKey enumeration_success}$			:i $RemoveParameter$${StructQBKey found_progress_userid}$		:i endif	:i else 		:i $MC_InvalidateStorageDevice$$userid$ = %GLOBAL%$userid$	:i endif	:i if $GotParam$${StructQBKey found_progress_userid}$		:i return ${StructQBKey true}$	:i endif	:i return $false$$errorcode$ = %GLOBAL%$errorcode$	:i endfunction]Script savegame_find_most_recent_progress e03e026f [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				folderlisting				userid			]		}		StructQBKey all	}$		:i $array$ = :a{:a}	:i $GetArraySize$${StructQBKey folderlisting}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i if ((%GLOBAL%$folderlisting$:a{%GLOBAL%$i$:a}->$foldername$) = (~$memcard_content_name$))			:i $printf$%s("Found %s in folderlisting")$s$ = (~$memcard_content_name$)			:i $folderindex$ = (%GLOBAL%$folderlisting$:a{%GLOBAL%$i$:a}->$folderindex$)			:i if $IsXenonOrWinDX$				:i $device$ = (%GLOBAL%$folderlisting$:a{%GLOBAL%$i$:a}->$device$)			:i endif			:i $printf$%s("MC_SetActiveFolder %i")$i$ = %GLOBAL%$folderindex$			:i $MC_SetActiveFolder$$folderindex$ = %GLOBAL%$folderindex$			:i $printf$${StructString 0x00000000 = "MC_LoadTOCInActiveFolder"}$			:i $MC_LoadTOCInActiveFolder$			:i if (%GLOBAL%$result$ = $false$)				:i if $IsXenonOrWinDX$					:i $MC_SetActiveStorageDevice$$userid$ = %GLOBAL%$userid$$device$ = %GLOBAL%$device$				:i endif				:i return ${					StructQBKey false					StructQBKey errorcode = corrupt				}$							:i endif			:i $printf$${StructString 0x00000000 = "GetMemCardDirectoryListing"}$			:i $GetMemCardDirectoryListing$			:i $savegame_add_progress_file_to_array$$array$ = %GLOBAL%$array$$directorylisting$ = %GLOBAL%$directorylisting$$device$ = %GLOBAL%$device$		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i if $savegame_get_most_recent_entry$$array$ = %GLOBAL%$array$		:i return $true$$progress_header$ = %GLOBAL%$most_recent$	:i endif	:i return ${StructQBKey false}$	:i endfunction]Script savegame_add_progress_file_to_array 0x60c92bc4 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				array				directorylisting			]		}		StructQBKey all	}$		:i $GetArraySize$${StructQBKey directorylisting}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $i$ = %i(0)		:i while 		:i $Data$ = (%GLOBAL%$directorylisting$:a{%GLOBAL%$i$:a})		:i if ((%GLOBAL%$Data$->$filename$) = (~$memcard_file_name$))			:i $printf$%s("Found %s in directorylisting")$s$ = (~$memcard_file_name$)			:i $Data$ = :s{%GLOBAL%$Data$$device$ = %GLOBAL%$device$:s}			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$Data$		:i endif		:i $i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i return $array$ = %GLOBAL%$array$	:i endfunction]Script savegame_get_most_recent_entry d696b12f [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				array			]		}		StructQBKey all	}$		:i $GetArraySize$%GLOBAL%$array$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $printf$${StructString 0x00000000 = "savegame_get_most_recent_entry"}$		:i $MC_SortTimestamps$$timestamps$ = %GLOBAL%$array$		:i $printstruct$ isNull 		:i return $true$$most_recent$ = (%GLOBAL%$sorted$:a{%i(0):a})	:i endif	:i return ${StructQBKey false}$	:i endfunction]