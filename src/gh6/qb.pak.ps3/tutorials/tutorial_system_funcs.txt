Unknown [1c00000000000000000032440000000000000000]SectionString current_tutorial_header "guitar"SectionString current_tutorial_id "guitar_basics"SectionString current_tutorial_lesson "lesson0"SectionString current_tutorial_page "page0"SectionInteger tutorial_paused 0SectionInteger practice_enabled 0SectionQBKey training_mode tutorialsSectionQBKey g_tutorial_part_entered_with guitarScript tutorial_system_get_tutorial 0x01c17c24 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs a511d13f	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				tutorial_header				tutorial_id			]		}		StructQBKey all	}$		:i $FormatText$$checksumname$ = $tutorial_array$%s("%s_tutorials")$s$ = %GLOBAL%$tutorial_header$	:i $GetArraySize$(~%GLOBAL%$tutorial_array$)	:i $i$ = %i(0)	:i while 	:i if $StructureContains$$structure$ = (~%GLOBAL%$tutorial_array$:a{%GLOBAL%$i$:a})$id$		:i if ((~%GLOBAL%$tutorial_array$:a{%GLOBAL%$i$:a}->$id$) = %GLOBAL%$tutorial_id$)			:i return $tutorial_struct$ = (~%GLOBAL%$tutorial_array$:a{%GLOBAL%$i$:a})		:i endif	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $scriptassert$%s("Tutorial %t not found in %s_tutorials")$t$ = %GLOBAL%$tutorial_id$$s$ = %GLOBAL%$tutorial_header$	:i endfunction]Script tutorial_system_get_lesson f0e89a2b [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x3fdcf05c	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				tutorial_header				tutorial_id				lesson_id			]		}		StructQBKey all	}$		:i $tutorial_system_get_tutorial$:s{		:i $tutorial_header$ = %GLOBAL%$tutorial_header$		:i $tutorial_id$ = %GLOBAL%$tutorial_id$	:i :s}	:i $GetArraySize$(%GLOBAL%$tutorial_struct$->$lessons$)	:i $i$ = %i(0)	:i while 	:i $lesson$ = (%GLOBAL%$tutorial_struct$->$lessons$:a{%GLOBAL%$i$:a})	:i if $StructureContains$$structure$ = %GLOBAL%$lesson$$id$		:i if ((%GLOBAL%$lesson$->$id$) = %GLOBAL%$lesson_id$)			:i return $lesson_struct$ = %GLOBAL%$lesson$		:i endif	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $scriptassert$%s("Lesson %l not found in tutorial %t!")$l$ = %GLOBAL%$lesson_id$$t$ = %GLOBAL%$tutorial_id$	:i endfunction]Script tutorial_system_get_page 0x373930b6 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs d1cfdd23	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				tutorial_header				tutorial_id				lesson_id				page_id			]		}		StructQBKey all	}$		:i $tutorial_system_get_lesson$:s{		:i $tutorial_header$ = %GLOBAL%$tutorial_header$		:i $tutorial_id$ = %GLOBAL%$tutorial_id$		:i $lesson_id$ = %GLOBAL%$lesson_id$	:i :s}	:i $array$ = :a{:a}	:i $GetArraySize$(%GLOBAL%$lesson_struct$->$pages$)	:i $i$ = %i(0)	:i while 	:i $page$ = (%GLOBAL%$lesson_struct$->$pages$:a{%GLOBAL%$i$:a})	:i if $StructureContains$$structure$ = %GLOBAL%$page$$id$		:i if ((%GLOBAL%$page$->$id$) = %GLOBAL%$page_id$)			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = %GLOBAL%$page$		:i endif	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $GetArraySize$%GLOBAL%$array$	:i if (%GLOBAL%$array_size$ = %i(0))		:i $scriptassert$%s("Page %p not found in lesson %l")$p$ = %GLOBAL%$page_id$$l$ = %GLOBAL%$lesson_id$	:i elseif (%GLOBAL%$array_size$ = %i(1))		:i return $page_struct$ = (%GLOBAL%$array$:a{%i(0):a})	:i else 		:i $i$ = %i(0)		:i while 		:i $page$ = (%GLOBAL%$array$:a{%GLOBAL%$i$:a})		:i $page_found$ = %i(1)		:i if $StructureContains$${				StructQBKey structure = page				StructQBKey hardware			}$						:i if NOT $tutorial_system_hardware_check$$hardware$ = (%GLOBAL%$page$->$hardware$)				:i %GLOBAL%$page_found$ = %i(0)			:i endif		:i endif		:i if $StructureContains$${				StructQBKey structure = page				StructQBKey lefty_flip			}$						:i if NOT $tutorial_system_lefty_flip_page_check$$page_struct$ = %GLOBAL%$page$				:i %GLOBAL%$page_found$ = %i(0)			:i endif		:i endif		:i if (%GLOBAL%$page_found$ = %i(1))			:i $found_page$ = %GLOBAL%$page$			:i continue		:i endif		:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))		:i loop_to %GLOBAL%$array_size$		:i if NOT $GotParam$${StructQBKey found_page}$			:i $scriptassert$%s("Page %p with correct settings not found in lesson %l")$p$ = %GLOBAL%$page_id$$l$ = %GLOBAL%$lesson_id$		:i endif		:i return $page_struct$ = %GLOBAL%$found_page$	:i endif	:i endfunction]Script tutorial_system_start 0x32eb285d [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs e6f2ee46	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				tutorial_header				tutorial_id				lesson_id			]		}		StructQBKey all	}$		:i $setscriptcannotpause$	:i $change$${StructQBKey current_level = load_z_visualizer}$	:i $crowd_system_deinit$	:i $wait_for_deferred_rendering$	:i $venue_system_init$${StructInt block_scripts = 0}$	:i $wait_for_deferred_rendering$	:i $crowd_system_init$	:i $wait_for_deferred_rendering$	:i $tutorial_system_start_lesson$:s{		:i $tutorial_header$ = %GLOBAL%$tutorial_header$		:i $tutorial_id$ = %GLOBAL%$tutorial_id$		:i $lesson_id$ = %GLOBAL%$lesson_id$	:i :s}	:i endfunction]Script tutorial_hide_venue 0x7a8b3f1d [	:i if $ScreenElementExists$${StructQBKey id = tutorial_misc_root}$		:i $DestroyScreenElement$${StructQBKey id = tutorial_misc_root}$	:i endif	:i $CreateScreenElement$${		StructQBKey parent = root_window		StructQBKey id = tutorial_misc_root		StructQBKey type = ContainerElement		StructFloatX2 Pos		{			Floats [0.00000, 0.00000]		}		StructInt z_priority = 0		StructInt alpha = 1	}$		:i $CreateScreenElement$${		StructQBKey type = SpriteElement		StructQBKey parent = tutorial_misc_root		StructQBKey texture = white		StructArray rgba		{			ArrayInteger			[				0				0				0				255			]		}		StructFloatX2 dims		{			Floats [1280.00, 720.000]		}		StructFloatX2 Pos		{			Floats [640.000, 360.000]		}		StructInt z_priority = -9999	}$		:i $KillCamAnim$${StructQBKey name = ch_view_cam}$	:i $PlayIGCCam$${		StructQBKey id = cs_view_cam_id		StructQBKey name = ch_view_cam		StructQBKey viewport = bg_viewport		StructQBKey LockTo = world		StructFloatX3 Pos		{			Floats [1.00000e+8, 1.00000e+8, 1.00000e+8]		}		StructFloatX3 Quat		{			Floats [0.00000, 0.00000, 0.00000]		}		StructFloat FOV = 72.00		StructInt Play_hold = 1		StructQBKey interrupt_current	}$		:i endfunction]Script tutorial_unhide_venue 0x86877e71 [	:i if $ScreenElementExists$${StructQBKey id = tutorial_misc_root}$		:i $DestroyScreenElement$${StructQBKey id = tutorial_misc_root}$	:i endif	:i endfunction]Script tutorial_system_start_lesson 0x07c92e3f [	${StructQBKey event = menu_replace}$	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs d6698f67	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				tutorial_header				tutorial_id				lesson_id			]		}		StructQBKey all	}$		:i $GetFirstPlayer$	:i $usefourlanehighway$$player$ = %GLOBAL%$player$$reset$	:i $UI_SFX$${		StructQBKey menustate = generic		StructQBKey uitype = select	}$		:i $change$${StructInt check_for_unplugged_controllers = 1}$	:i $audio_ui_menu_music_off$	:i $printf$${		StructQBKey channel = sfx		StructQBStringQs 0x0841284e	}$		:i $tutorial_system_start_page$:s{		:i $tutorial_header$ = %GLOBAL%$tutorial_header$		:i $tutorial_id$ = %GLOBAL%$tutorial_id$		:i $lesson_id$ = %GLOBAL%$lesson_id$		:i $page_id$ = %s("page0")		:i $event$ = %GLOBAL%$event$		:i $part$ = %GLOBAL%$part$		:i $autosave$ = %GLOBAL%$autosave$	:i :s}	:i endfunction]Script tutorial_system_start_page e087faa4 [	${StructQBKey event = menu_replace}$	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x25f26d76	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				tutorial_header				tutorial_id				lesson_id				page_id			]		}		StructQBKey all	}$		:i $tutorial_system_get_page$ isNull 	:i $change$$current_tutorial_header$ = %GLOBAL%$tutorial_header$	:i $change$$current_tutorial_id$ = %GLOBAL%$tutorial_id$	:i $change$$current_tutorial_lesson$ = %GLOBAL%$lesson_id$	:i $change$$current_tutorial_page$ = %GLOBAL%$page_id$	:i $FormatText$$checksumname$ = $state$%s("UIstate_tutorial_%s")$s$ = (%GLOBAL%$page_struct$->$type$)	:i if $GotParam$${StructQBKey autosave}$		:i $ui_memcard_autosave_replace$$event$ = %GLOBAL%$event$$state$ = %GLOBAL%$state$$Data$ = :s{$page_struct$ = %GLOBAL%$page_struct$$part$ = %GLOBAL%$part$:s}	:i else 		:i $ui_event_wait$$event$ = %GLOBAL%$event$$Data$ = :s{$state$ = %GLOBAL%$state$$page_struct$ = %GLOBAL%$page_struct$$part$ = %GLOBAL%$part$:s}	:i endif	:i endfunction]Script tutorial_system_page_complete f1702773 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x05081698	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				page_struct			]		}		StructQBKey all	}$		:i $tutorial_system_disable_pause$	:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$		:i $tutorial_main$.$obj_killspawnedscript$${StructQBKey name = tutorial_system_handle_completion}$	:i endif	:i if $StructureContains$$structure$ = %GLOBAL%$page_struct$$audio_stream$		:i if $tutorial_system_is_sound_playing$$sound$ = (%GLOBAL%$page_struct$->$audio_stream$)			:i $tutorial_system_stop_sound$$sound$ = (%GLOBAL%$page_struct$->$audio_stream$)		:i endif	:i endif	:i if $GotParam$${StructQBKey retry_page}$		:i $tutorial_system_start_page$:s{			:i $tutorial_header$ = (~$current_tutorial_header$)			:i $tutorial_id$ = (~$current_tutorial_id$)			:i $lesson_id$ = (~$current_tutorial_lesson$)			:i $page_id$ = (%GLOBAL%$page_struct$->$id$)		:i :s}	:i elseif $StructureContains$$structure$ = %GLOBAL%$page_struct$$next_page$		:i $tutorial_system_start_page$:s{			:i $tutorial_header$ = (~$current_tutorial_header$)			:i $tutorial_id$ = (~$current_tutorial_id$)			:i $lesson_id$ = (~$current_tutorial_lesson$)			:i $page_id$ = (%GLOBAL%$page_struct$->$next_page$)		:i :s}	:i else 		:i $tutorial_system_get_lesson$:s{			:i $tutorial_header$ = (~$current_tutorial_header$)			:i $tutorial_id$ = (~$current_tutorial_id$)			:i $lesson_id$ = (~$current_tutorial_lesson$)		:i :s}		:i $tutorial_system_lesson_complete$$lesson_struct$ = %GLOBAL%$lesson_struct$	:i endif	:i endfunction]Script tutorial_system_lesson_complete 0x1dc2a870 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs d56112d0	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				lesson_struct			]		}		StructQBKey all	}$		:i $tutorial_system_disable_pause$	:i $get_savegame_from_controller$$controller$ = (~$primary_controller$)	:i if NOT $tutorial_system_is_lesson_complete$:s{			:i $savegame$ = %GLOBAL%$savegame$			:i $tutorial_header$ = (~$current_tutorial_header$)			:i $tutorial_id$ = (~$current_tutorial_id$)			:i $lesson_id$ = (%GLOBAL%$lesson_struct$->$id$)		:i :s}		:i $save_tutorial_lesson_globaltag$:s{			:i $savegame$ = %GLOBAL%$savegame$			:i $tutorial_header$ = (~$current_tutorial_header$)			:i $tutorial_id$ = (~$current_tutorial_id$)			:i $lesson_id$ = (%GLOBAL%$lesson_struct$->$id$)			:i $value$ = $complete$		:i :s}		:i $autosave$ = %i(1)		:i $tutorial_system_check_tutorial_completion$$savegame$ = %GLOBAL%$savegame$		:i if $tutorial_system_is_tutorial_complete$$savegame$ = %GLOBAL%$savegame$$tutorial_header$ = (~$current_tutorial_header$)$tutorial_id$ = (~$current_tutorial_id$)			:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$				:i $LaunchEvent$${					StructQBKey type = unfocus					StructQBKey target = tutorial_main				}$								:i $tutorial_main$.$se_setprops$${StructFloat tutorial_instructions_alpha = 0.00}$			:i endif			:i $tutorial_system_lesson_complete_anim$			:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$				:i $tutorial_main$.$se_setprops$${StructFloat tutorial_instructions_alpha = 1.00}$				:i $LaunchEvent$${					StructQBKey type = focus					StructQBKey target = tutorial_main				}$							:i endif		:i endif	:i endif	:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$		:i $tutorial_main$.$se_setprops$${StructQBStringQs tutorial_instructions_text = 0x03ac90f0}$		:i $LaunchEvent$${			StructQBKey type = unfocus			StructQBKey target = tutorial_main		}$			:i else 		:i return 	:i endif	:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$		:i $DestroyScreenElement$${StructQBKey id = tutorial_main}$	:i endif	:i $make_generic_menu$${		StructQBKey vmenu_id = lesson_complete_vmenu		StructString desc = "generic_tutorial_popup"		StructQBKey pad_back_sound = NullScript		StructQBKey pad_back_script = NullScript		StructInt z_priority = 50	}$		:i $generic_menu$.$se_setprops$${StructFloat challenge_instrument_alpha = 0.00}$	:i $generic_menu$.$se_setprops$${StructQBStringQs title_text = d50843f0}$	:i $generic_menu$.$se_setprops$${StructQBStringQs description_text = 0x0b2e51f3}$	:i $add_generic_tutorial_menu_text_item$:s{		:i $text$ = ^[494b4d7f]^		:i $pad_choose_script$ = $tutorial_system_continue_next_lesson$		:i $pad_choose_params$ = :s{$lesson_struct$ = %GLOBAL%$lesson_struct$$autosave$ = %GLOBAL%$autosave$:s}	:i :s}	:i $add_generic_tutorial_menu_text_item$:s{		:i $text$ = ^[cda53e5f]^		:i $pad_choose_script$ = $tutorial_system_replay_lesson$		:i $pad_choose_params$ = :s{$autosave$ = %GLOBAL%$autosave$:s}	:i :s}	:i if $GotParam$${StructQBKey autosave}$		:i $pad_choose_script$ = $ui_memcard_autosave_replace$		:i $pad_choose_params$ = :s{$event$ = $menu_back$$state$ = $UIstate_tutorial_menu_lessons$$menu_music$ = $on$:s}	:i else 		:i $pad_choose_script$ = $generic_event_back$		:i $pad_choose_params$ = :s{$state$ = $UIstate_tutorial_menu_lessons$$menu_music$ = $on$:s}	:i endif	:i $add_generic_tutorial_menu_text_item$:s{		:i $text$ = ^[f95de497]^		:i $pad_choose_script$ = %GLOBAL%$pad_choose_script$		:i $pad_choose_params$ = %GLOBAL%$pad_choose_params$	:i :s}	:i $clean_up_user_control_helpers$	:i $add_user_control_helper$${		StructQBStringQs text = c18d5e76		StructQBKey button = green		StructQBKey all_buttons	}$		:i $change$${StructInt check_for_unplugged_controllers = 0}$	:i $LaunchEvent$${		StructQBKey type = focus		StructQBKey target = lesson_complete_vmenu	}$		:i endfunction]Script tutorial_system_continue_next_lesson b0ce310f [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x43d20210	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				lesson_struct			]		}		StructQBKey all	}$		:i if $StructureContains$$structure$ = %GLOBAL%$lesson_struct$$next_lesson$		:i if $GotParam$${StructQBKey autosave}$			:i $ui_memcard_autosave_replace$:s{				:i $event$ = $menu_back$				:i $state$ = $uistate_tutorial_setup$				:i $Data$ = :s{					:i $tutorial_header$ = (~$current_tutorial_header$)					:i $tutorial_id$ = (~$current_tutorial_id$)					:i $lesson_id$ = (%GLOBAL%$lesson_struct$->$next_lesson$)				:i :s}			:i :s}		:i else 			:i $ui_event$:s{				:i $event$ = $menu_back$				:i $state$ = $uistate_tutorial_setup$				:i $Data$ = :s{					:i $tutorial_header$ = (~$current_tutorial_header$)					:i $tutorial_id$ = (~$current_tutorial_id$)					:i $lesson_id$ = (%GLOBAL%$lesson_struct$->$next_lesson$)				:i :s}			:i :s}		:i endif	:i else 		:i $change$${StructInt check_for_unplugged_controllers = 0}$		:i if $GotParam$${StructQBKey autosave}$			:i $ui_memcard_autosave_replace$${				StructQBKey event = menu_back				StructQBKey state = UIstate_tutorial_menu_lessons				StructQBKey menu_music = on			}$					:i else 			:i $UI_SFX$${				StructQBKey menustate = generic				StructQBKey uitype = back			}$						:i $generic_event_back$${				StructQBKey state = UIstate_tutorial_menu_lessons				StructQBKey menu_music = on			}$					:i endif	:i endif	:i $destroy_generic_menu$	:i endfunction]Script tutorial_system_replay_lesson fbd880e5 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs d086a16d	}$		:i if $GotParam$${StructQBKey autosave}$		:i $ui_memcard_autosave_replace$:s{			:i $event$ = $menu_back$			:i $state$ = $uistate_tutorial_setup$			:i $Data$ = :s{				:i $tutorial_header$ = (~$current_tutorial_header$)				:i $tutorial_id$ = (~$current_tutorial_id$)				:i $lesson_id$ = (~$current_tutorial_lesson$)			:i :s}		:i :s}	:i else 		:i $ui_event$:s{			:i $event$ = $menu_back$			:i $state$ = $uistate_tutorial_setup$			:i $Data$ = :s{				:i $tutorial_header$ = (~$current_tutorial_header$)				:i $tutorial_id$ = (~$current_tutorial_id$)				:i $lesson_id$ = (~$current_tutorial_lesson$)			:i :s}		:i :s}	:i endif	:i $destroy_generic_menu$	:i endfunction]Script tutorial_system_check_tutorial_completion ace55b52 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x90b764d1	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				savegame			]		}		StructQBKey all	}$		:i $tutorial_system_get_tutorial$:s{		:i $tutorial_header$ = (~$current_tutorial_header$)		:i $tutorial_id$ = (~$current_tutorial_id$)	:i :s}	:i $tutorial_complete$ = %i(1)	:i $GetArraySize$(%GLOBAL%$tutorial_struct$->$lessons$)	:i $i$ = %i(0)	:i while 	:i $lesson_struct$ = (%GLOBAL%$tutorial_struct$->$lessons$:a{%GLOBAL%$i$:a})	:i if NOT $tutorial_system_is_lesson_complete$:s{			:i $savegame$ = %GLOBAL%$savegame$			:i $tutorial_header$ = (~$current_tutorial_header$)			:i $tutorial_id$ = (~$current_tutorial_id$)			:i $lesson_id$ = (%GLOBAL%$lesson_struct$->$id$)		:i :s}		:i %GLOBAL%$tutorial_complete$ = %i(0)	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i if (%GLOBAL%$tutorial_complete$ = %i(1))		:i $save_tutorial_globaltag$:s{			:i $savegame$ = %GLOBAL%$savegame$			:i $tutorial_header$ = (~$current_tutorial_header$)			:i $tutorial_id$ = (~$current_tutorial_id$)			:i $value$ = $complete$		:i :s}	:i endif	:i endfunction]Script tutorial_system_is_tutorial_complete 0x1fe85e88 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x0772bd47	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				savegame				tutorial_header				tutorial_id			]		}		StructQBKey all	}$		:i $get_tutorial_globaltag$ isNull 	:i if (%GLOBAL%$tutorial_tag$ = $not_complete$)		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script tutorial_system_is_lesson_complete 0x1bc4509f [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x8e5ee903	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				savegame				tutorial_header				tutorial_id				lesson_id			]		}		StructQBKey all	}$		:i $get_tutorial_lesson_globaltag$ isNull 	:i if (%GLOBAL%$tutorial_tag$ = $not_complete$)		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script tutorial_system_lesson_complete_anim f516b47c [	${StructQBStringQs anim_text = 0x8399081c}$	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs c840d7d0	}$		:i if $ScreenElementExists$${StructQBKey id = yourock_text}$		:i return 	:i endif	:i if $ScreenElementExists$${StructQBKey id = you_rock_physics}$		:i $DestroyScreenElement$${StructQBKey id = you_rock_physics}$	:i endif	:i if NOT $ScreenElementExists$${StructQBKey id = tutorial_main}$		:i return 	:i endif	:i $spawnscriptnow$$create_exploding_text$$id$ = $lesson_anim$$params$ = :s{$parent$ = %s("you_rock_physics")$text$ = %GLOBAL%$anim_text$$text_physics$ = %i(1)$placement$ = $top$:s}	:i $spawnscriptnow$${StructQBKey audio_ui_gameplay_play_you_rock_sfx}$	:i $wait$${		StructFloat 5.5		StructQBKey seconds	}$		:i $KillSpawnedScript$${StructQBKey name = create_exploding_text}$	:i $destroy_all_exploding_text$	:i endfunction]Script tutorial_system_create_description a7893b24 [	${StructInt from_gameplay = 0}$	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x7530ee46	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				page_struct			]		}		StructQBKey all	}$		:i if $StructureContains$$structure$ = %GLOBAL%$page_struct$$title_page$		:i $desc$ = %s("tutorial_title")	:i else 		:i $desc$ = %s("tutorial_main")	:i endif	:i $tutorial_system_destroy_description$	:i $CreateScreenElement$:s{		:i $parent$ = $root_window$		:i $type$ = $descinterface$		:i $id$ = $tutorial_main$		:i $desc$ = %GLOBAL%$desc$	:i :s}	:i %GLOBAL%$id$.$se_setprops$$tutorial_instructions_text$ = (%GLOBAL%$page_struct$->$text$)	:i $tutorial_hide_venue$	:i if (%GLOBAL%$from_gameplay$ = %i(1))		:i %GLOBAL%$id$.$se_setprops$$ui_visualizer_z_priority$ = %i(4294967295)	:i else 		:i %GLOBAL%$id$.$se_setprops$$ui_visualizer_z_priority$ = %i(1)	:i endif	:i $LaunchEvent$${		StructQBKey type = focus		StructQBKey target = tutorial_main	}$		:i return $desc_id$ = %GLOBAL%$id$	:i endfunction]Script tutorial_system_destroy_description d52224c9 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs c37d7682	}$		:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$		:i $LaunchEvent$${			StructQBKey type = unfocus			StructQBKey target = tutorial_main		}$				:i $DestroyScreenElement$${StructQBKey id = tutorial_main}$	:i endif	:i endfunction]Script tutorial_system_create_pausemenu_description 0x955c1b6e [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x4771c078	}$		:i $make_generic_menu$:s{		:i $vmenu_id$ = $tutorial_pause_vmenu$		:i $desc$ = %s("generic_tutorial_popup")		:i $pad_back_script$ = %GLOBAL%$pad_back_script$		:i $pad_back_params$ = %GLOBAL%$pad_back_params$		:i $z_priority$ = %i(600)	:i :s}	:i $generic_menu$.$se_setprops$${StructQBStringQs title_text = 0x662aaaf7}$	:i $generic_menu$.$se_setprops$${StructQBStringQs description_text = 0x03ac90f0}$	:i endfunction]Script tutorial_system_destroy_pausemenu_description 0x0500104b [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs ba0b5d28	}$		:i $destroy_generic_menu$	:i $change$${StructInt tutorial_paused = 0}$	:i endfunction]Script tutorial_system_create_image_flipbook f5bc3948 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x4843297d	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				desc_id			]		}		StructQBKey all	}$		:i if %GLOBAL%$desc_id$.$desc_resolvealias$$name$ = $alias_tutorial_flipbook_window$$param$ = $tutorial_flipbook_window$		:i $CreateScreenElement$:s{			:i $type$ = $SpriteElement$			:i $parent$ = %GLOBAL%$tutorial_flipbook_window$			:i $id$ = $tutorial_flipbook$			:i $Pos$ = %vec2(0.0,0.0)			:i $z_priority$ = %i(2)			:i $pos_anchor$ = :a{$center$,$top$:a}			:i $just$ = :a{$center$,$top$:a}		:i :s}	:i endif	:i endfunction]Script tutorial_system_destroy_image_flipbook 0x2b2c8420 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x8be11b4c	}$		:i if $ScreenElementExists$${StructQBKey id = tutorial_flipbook}$		:i $DestroyScreenElement$${StructQBKey id = tutorial_flipbook}$	:i endif	:i endfunction]Script tutorial_system_flip_images 0x6f700972 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs eafe5da2	}$		:i if $ScreenElementExists$${StructQBKey id = tutorial_flipbook}$		:i $GetArraySize$(%GLOBAL%$page_struct$->$images$)		:i $current_index$ = %i(0)		:i $time_shown$ = %i(0)		:i while 		:i if (~$tutorial_paused$ = %i(0))			:i if $StructureContains$$structure$ = (%GLOBAL%$page_struct$->$images$:a{%GLOBAL%$current_index$:a})$Scale$				:i $Scale$ = ((%GLOBAL%$page_struct$->$images$:a{%GLOBAL%$current_index$:a})->$Scale$)			:i else 				:i $Scale$ = %vec2(2.0,2.0)			:i endif			:i $SetScreenElementProps$$id$ = $tutorial_flipbook$$texture$ = ((%GLOBAL%$page_struct$->$images$:a{%GLOBAL%$current_index$:a})->$image$)$Scale$ = %GLOBAL%$Scale$			:i %GLOBAL%$time_shown$ = ((%GLOBAL%$page_struct$->$images$:a{%GLOBAL%$current_index$:a})->$time_shown$)			:i $wait$%GLOBAL%$time_shown$$seconds$			:i %GLOBAL%$current_index$ = (%GLOBAL%$current_index$ + %i(1))			:i if (%GLOBAL%$current_index$ = %GLOBAL%$array_size$)				:i %GLOBAL%$current_index$ = %i(0)			:i endif		:i endif		:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i loop_to 	:i endif	:i endfunction]Script tutorial_system_wait_for_complete 0x1bca94ec [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x788b5ba3	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				page_struct			]		}		StructQBKey all	}$		:i if $StructureContains$$structure$ = %GLOBAL%$page_struct$$time_shown$		:i $time_shown$ = (%GLOBAL%$page_struct$->$time_shown$)		:i $wait$%GLOBAL%$time_shown$$seconds$	:i else 		:i $wait$${			StructInt 1			StructQBKey seconds		}$			:i endif	:i endfunction]Script tutorial_system_setup_event_handlers ab8a971b [	:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$		:i $SetScreenElementProps$:s{			:i $id$ = $tutorial_main$			:i $exclusive_device$ = (~$primary_controller$)			:i $event_handlers$ = :a{				:i :s{$pad_choose$$tutorial_system_page_complete$$params$ = :s{$page_struct$ = %GLOBAL%$page_struct$:s}:s}			:i :a}			:i $replace_handlers$		:i :s}	:i endif	:i endfunction]Script tutorial_system_handle_completion 0x5aee44e4 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x5db89a09	}$		:i if $StructureContains$$structure$ = %GLOBAL%$page_struct$$wait_for_user_input$		:i if $StructureContains$$structure$ = %GLOBAL%$page_struct$$audio_stream$			:i $tutorial_system_play_sound$$sound$ = (%GLOBAL%$page_struct$->$audio_stream$)		:i endif	:i else 		:i if $StructureContains$$structure$ = %GLOBAL%$page_struct$$audio_stream$			:i %GLOBAL%$desc_id$.$obj_spawnscriptnow$$tutorial_system_play_audio_and_wait$$params$ = :s{$sound$ = (%GLOBAL%$page_struct$->$audio_stream$):s}		:i endif		:i $tutorial_system_wait_for_complete$ isNull 		:i while 		:i if NOT $ScriptIsRunning$${StructQBKey tutorial_system_play_audio_and_wait}$			:i continue		:i endif		:i $wait$${			StructInt 1			StructQBKey gameframe		}$				:i loop_to 		:i $tutorial_system_page_complete$$page_struct$ = %GLOBAL%$page_struct$	:i endif	:i endfunction]Script tutorial_system_play_audio_and_wait 0x398d475e [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x57f08ce0	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				sound			]		}		StructQBKey all	}$		:i $wait$(~$tutorial_system_pre_vo_wait_time$)$seconds$	:i $tutorial_system_play_sound$$sound$ = %GLOBAL%$sound$$wait$	:i $wait$(~$tutorial_system_post_vo_wait_time$)$seconds$	:i endfunction]Script tutorial_system_create_video 0x30034fea [	${StructString video = "career_intro"}$	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x02fa4e2c	}$		:i $destroy_bink_sub_heaps$	:i $CreateScreenElement$:s{		:i $type$ = $movieelement$		:i $parent$ = $tutorial_main$		:i $textureslot$ = %i(2)		:i $movie$ = %GLOBAL%$video$		:i $Pos$ = %vec2(0.0,87.0)		:i $dims$ = %vec2(1024.0,400.0)		:i $pos_anchor$ = :a{$center$$center$:a}		:i $just$ = :a{$center$$center$:a}		:i $z_priority$ = %i(2)		:i $alpha$ = %f(1.0)		:i $rgba$ = :a{%i(255)%i(255)%i(255)%i(255):a}	:i :s}	:i endfunction]Script tutorial_system_destroy_video f2295775 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x6f7a02e7	}$		:i $spawnscriptnow$${		StructQBKey EndMovie		StructStruct params		{			StructHeader			{				StructInt slot = 2			}		}	}$		:i endfunction]Script tutorial_system_menu_focus 0x4e395704 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x0584d47c	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				item_struct			]		}		StructQBKey all	}$		:i $helper_text$ = ^[03ac90f0]^	:i if $StructureContains$$structure$ = %GLOBAL%$item_struct$$helper_text$		:i $helper_text$ = (%GLOBAL%$item_struct$->$helper_text$)	:i endif	:i $generic_menu$.$se_setprops$$help_text_caption_text$ = %GLOBAL%$helper_text$	:i endfunction]Script tutorial_system_play_sound d3114d22 [	${StructInt volume = 0}$	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x999c682c	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				sound			]		}		StructQBKey all	}$		:i $tutorial_system_get_language_prefix$	:i $FormatText$$checksumname$ = $sound_id$%s("%a_%b")$a$ = %GLOBAL%$language_prefix$$b$ = %GLOBAL%$sound$	:i if $StreamExists$%GLOBAL%$sound_id$		:i $playsound$%GLOBAL%$sound_id$$vol$ = %GLOBAL%$volume$$buss$ = $Tutorial_VO$		:i if $GotParam$${StructQBKey wait}$			:i $tutorial_system_wait_for_sound$$sound$ = %GLOBAL%$sound$		:i endif	:i else 		:i $wait$${			StructInt 2			StructQBKey seconds		}$			:i endif	:i endfunction]Script tutorial_system_wait_for_sound d025f9f1 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x717a9229	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				sound			]		}		StructQBKey all	}$		:i while 	:i if NOT $tutorial_system_is_sound_playing$$sound$ = %GLOBAL%$sound$		:i continue	:i endif	:i $wait$${		StructInt 1		StructQBKey gameframe	}$		:i loop_to 	:i endfunction]Script tutorial_system_is_sound_playing 0x18745d88 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				sound			]		}		StructQBKey all	}$		:i $tutorial_system_get_language_prefix$	:i $FormatText$$checksumname$ = $sound_id$%s("%a_%b")$a$ = %GLOBAL%$language_prefix$$b$ = %GLOBAL%$sound$	:i if $StreamExists$%GLOBAL%$sound_id$		:i if $issoundplaying$%GLOBAL%$sound_id$			:i return ${StructQBKey true}$		:i else 			:i return ${StructQBKey false}$		:i endif	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script tutorial_system_get_language_prefix 0x29971c79 [	:i if $English$		:i return ${StructString language_prefix = "EN"}$	:i elseif $German$		:i return ${StructString language_prefix = "GR"}$	:i elseif $French$		:i return ${StructString language_prefix = "FR"}$	:i elseif $Italian$		:i return ${StructString language_prefix = "IT"}$	:i elseif $Spanish$		:i return ${StructString language_prefix = "SP"}$	:i endif	:i return ${StructString language_prefix = "EN"}$	:i endfunction]Script tutorial_system_stop_sound 0x74abf86e [	${StructInt volume = 0}$	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x8113de19	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				sound			]		}		StructQBKey all	}$		:i $tutorial_system_get_language_prefix$	:i $FormatText$$checksumname$ = $sound_id$%s("%a_%b")$a$ = %GLOBAL%$language_prefix$$b$ = %GLOBAL%$sound$	:i if $StreamExists$%GLOBAL%$sound_id$		:i $StopSound$%GLOBAL%$sound_id$$vol$ = %GLOBAL%$volume$$buss$ = $Tutorial_VO$	:i endif	:i endfunction]Script tutorial_system_start_gameplay 0x30d017c0 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x8ecd8fb6	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				song			]		}		StructQBKey all	}$		:i $GetFirstPlayer$	:i $getplayerinfo$%GLOBAL%$player$$part$	:i if (%GLOBAL%$part$ = $Vocals$)		:i $SetPlayerInfo$%GLOBAL%$player$$vocals_highway_view$ = $scrolling$	:i endif	:i if (%GLOBAL%$part$ = $drum$)		:i $SetPlayerInfo$%GLOBAL%$player$$difficulty$ = $expert$		:i $SetPlayerInfo$%GLOBAL%$player$$double_kick_drum$ = %i(1)	:i endif	:i $Playlist_SetCurrentSong$$song$ = %GLOBAL%$song$	:i $ui_event_wait$${		StructQBKey event = menu_change		StructQBKey state = uistate_play_song	}$		:i endfunction]Script tutorial_system_start_song 0x052f0da0 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs de4926ed	}$		:i $change$${StructQBKey current_transition = fastintrotutorial}$	:i $start_song$:s{		:i $starttime$ = %i(0)		:i $device_num$ = %GLOBAL%$device_num$		:i $uselaststarttime$ = %GLOBAL%$uselaststarttime$	:i :s}	:i endfunction]Script tutorial_system_set_part f0fdb986 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs d7c72b87	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				part			]		}		StructQBKey all	}$		:i $GetFirstPlayer$	:i $SetPlayerInfo$%GLOBAL%$player$$part$ = %GLOBAL%$part$	:i $SetPlayerInfo$%GLOBAL%$player$$stored_part$ = %GLOBAL%$part$	:i endfunction]Script tutorial_system_setup_players fccce985 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x7d54580f	}$		:i $reset_all_player_in_game_status$	:i $GetFirstPlayer$	:i $SetPlayerInfo$%GLOBAL%$player$$in_game$ = %i(1)	:i $SetPlayerInfo$%GLOBAL%$player$$difficulty$ = $medium$	:i $SetPlayerInfo$%GLOBAL%$player$$controller$ = (~$primary_controller$)	:i $usefourlanehighway$$player$ = %GLOBAL%$playerinfo$$reset$	:i endfunction]Script tutorial_system_exit_cleanup d8046145 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs c98e5753	}$		:i $reset_all_player_in_game_status$	:i endfunction]Script tutorial_system_hardware_check 0x33e70ce4 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x0cfeed8e	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				hardware			]		}		StructQBKey all	}$		:i $GetFirstPlayer$	:i $getplayerinfo$%GLOBAL%$player$$part$	:i $getplayerinfo$%GLOBAL%$player$$controller$	:i if (%GLOBAL%$part$ = $guitar$ OR %GLOBAL%$part$ = $Bass$)		:i switch (%GLOBAL%$hardware$)			:i case $TouchGuitar$				:i if $IsGuitarTouchController$$controller$ = %GLOBAL%$controller$					:i return ${StructQBKey true}$				:i endif				:i endcase			case $NoTouchGuitar$				:i if NOT $IsGuitarTouchController$$controller$ = %GLOBAL%$controller$					:i return ${StructQBKey true}$				:i endif				:i endcase			default 				:i return ${StructQBKey false}$		:i end_switch		:i return ${StructQBKey false}$	:i elseif (%GLOBAL%$part$ = $drum$)		:i switch (%GLOBAL%$hardware$)			:i case $RBDrum$				:i if $isRBDrum$$controller$ = %GLOBAL%$controller$					:i return ${StructQBKey true}$				:i endif				:i endcase			case $GHDrum$				:i if NOT $isRBDrum$$controller$ = %GLOBAL%$controller$					:i return ${StructQBKey true}$				:i endif				:i endcase			default 				:i return ${StructQBKey false}$		:i end_switch		:i return ${StructQBKey false}$	:i else 		:i return ${StructQBKey true}$	:i endif	:i endfunction]Script tutorial_system_lefty_flip_page_check c9f4d059 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x181c8944	}$		:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				page_struct			]		}		StructQBKey all	}$		:i $GetFirstPlayer$	:i $getplayerinfo$%GLOBAL%$player$$lefty_flip$	:i if (%GLOBAL%$page_struct$->$lefty_flip$ = %GLOBAL%$lefty_flip$)		:i return ${StructQBKey true}$	:i else 		:i return ${StructQBKey false}$	:i endif	:i endfunction]Script tutorial_system_enable_pause 0x5a2977db [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x56612ed2	}$		:i $enable_pause$	:i endfunction]Script tutorial_system_disable_pause f395431f [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs cdfdc492	}$		:i $disable_pause$	:i endfunction]Script tutorial_system_pausemenu_restart_lesson 0x6f7926de [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs eedaa255	}$		:i $Stopsoundsbybuss$${StructQBKey Tutorial_VO}$	:i $gh_unpause_ui$	:i $kill_pause_curtain$	:i $tutorial_system_replay_lesson$	:i endfunction]Script tutorial_system_pausemenu_skip_lesson dd266177 [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x204a0a96	}$		:i $Stopsoundsbybuss$${StructQBKey Tutorial_VO}$	:i $gh_unpause_ui$	:i $kill_pause_curtain$	:i $tutorial_system_get_lesson$:s{		:i $tutorial_header$ = (~$current_tutorial_header$)		:i $tutorial_id$ = (~$current_tutorial_id$)		:i $lesson_id$ = (~$current_tutorial_lesson$)	:i :s}	:i $tutorial_system_continue_next_lesson$$lesson_struct$ = %GLOBAL%$lesson_struct$	:i endfunction]Script tutorial_quit_from_pause_menu 0x174af6d9 [	:i $Stopsoundsbybuss$${StructQBKey Tutorial_VO}$	:i $hide_glitch$${StructInt num_frames = 12}$	:i $kill_gem_scroller$	:i $gh_unpause_ui$	:i $kill_pause_curtain$	:i $generic_event_back$${StructQBKey state = uistate_tutorial_menu}$	:i endfunction]Script tutorial_system_pausemenu_quit 0x44e090ed [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x258564c3	}$		:i $Stopsoundsbybuss$${StructQBKey Tutorial_VO}$	:i $hide_glitch$${StructInt num_frames = 12}$	:i $kill_gem_scroller$	:i $change$${StructInt check_for_unplugged_controllers = 0}$	:i $gh_unpause_ui$	:i $kill_pause_curtain$	:i $audio_ui_menu_music_on$	:i $ui_event$${		StructQBKey event = menu_back		StructStruct Data		{			StructHeader			{				StructQBKey state = uistate_mainmenu			}		}	}$		:i endfunction]Script tutorial_system_pausemenu_destroy 0x9e353b6c [	:i $printf$${		StructQBKey channel = tutorial		StructQBStringQs 0x1a185869	}$		:i if (~$tutorial_paused$ = %i(0))		:i return 	:i endif	:i $printscriptinfo$${StructString 0x00000000 = "tutorial_system_pausemenu_destroy"}$	:i $LaunchEvent$${		StructQBKey type = unfocus		StructQBKey target = current_menu	}$		:i if $ScreenElementExists$${StructQBKey id = tutorial_main}$		:i $LaunchEvent$${			StructQBKey type = focus			StructQBKey target = tutorial_main		}$			:i endif	:i $generic_event_back$	:i endfunction]Script check_tutorial_allowances f01e6dd6 [	${StructInt allow_RB_drums = 1}$	:i if (~$allow_controller_for_all_instruments$ = %i(1))		:i return ${StructQBKey allowances = all}$	:i endif	:i if $IsGuitarController$${StructQBString controller = primary_controller}$		:i %GLOBAL%$allowances$ = $guitar$	:i elseif $isRBDrum$${StructQBString controller = primary_controller}$		:i if (%GLOBAL%$allow_RB_drums$ = %i(1))			:i %GLOBAL%$allowances$ = $drum$		:i else 			:i %GLOBAL%$allowances$ = $not_specific$		:i endif	:i elseif $IsDrumController$${StructQBString controller = primary_controller}$		:i %GLOBAL%$allowances$ = $drum$	:i else 		:i $ui_get_controller_parts_allowed$${StructQBString controller = primary_controller}$		:i if $StructureContains$$structure$ = %GLOBAL%$allowed$$Vocals$			:i %GLOBAL%$allowances$ = $Vocals$		:i else 			:i %GLOBAL%$allowances$ = $not_specific$		:i endif	:i endif	:i return $allowances$ = %GLOBAL%$allowances$	:i endfunction]Script ui_get_controller_parts_allowed 0x127c45f2 [	:i $RequireParams$${		StructArray 0x00000000		{			ArrayQBKey			[				controller			]		}		StructQBKey all	}$		:i if ((~$allow_controller_for_all_instruments$) = %i(0))		:i $allowed$ = :s{:s}		:i if $IsGuitarController$$controller$ = %GLOBAL%$controller$			:i $allowed$ = :s{$guitar$$Bass$:s}		:i elseif $IsDrumController$$controller$ = %GLOBAL%$controller$			:i $allowed$ = :s{$drum$:s}		:i elseif $IsMicrophonePluggedIn$			:i $allowed$ = :s{$Vocals$:s}		:i endif	:i else 		:i $allowed$ = :s{$guitar$$Bass$$drum$$Vocals$:s}		:i if $IsGuitarController$$controller$ = %GLOBAL%$controller$			:i $allowed$ = :s{$guitar$$Bass$:s}		:i elseif $IsDrumController$$controller$ = %GLOBAL%$controller$			:i $allowed$ = :s{$drum$:s}		:i elseif $IsMicrophonePluggedIn$			:i $allowed$ = :s{$guitar$$Bass$$drum$$Vocals$:s}		:i endif	:i endif	:i if $is_regular_controller$$controller$ = %GLOBAL%$controller$		:i if $controller_has_headset$$controller$ = %GLOBAL%$controller$			:i $allowed$ = :s{%GLOBAL%$allowed$$Vocals$:s}		:i endif	:i endif	:i if $GotParam$${StructQBKey filter_by_character}$		:i $filter_allowed_parts_by_character_type$$allowed$ = %GLOBAL%$allowed$$controller$ = %GLOBAL%$controller$	:i endif	:i return $allowed$ = %GLOBAL%$allowed$	:i endfunction]