Unknown [1c00000000000000000012480000000000000000]SectionArray g_cas_locked_items{	Floats [0.00000, 0.00000]}SectionArray g_all_cas_locked_items{	Floats [0.00000, 0.00000]}SectionArray g_cas_texture_locked_items{	Floats [0.00000, 0.00000]}SectionArray g_all_cas_texture_locked_items{	Floats [0.00000, 0.00000]}SectionArray g_outfit_locked_items{	Floats [0.00000, 0.00000]}SectionArray g_all_outfit_locked_items{	Floats [0.00000, 0.00000]}SectionInteger g_sanity_check_preset_pieces_assert 0Script sanity_check_unlocks 0x2c06ddd1 [	${Unknown [000124003e3388346969696900000000]}$	:i if (~$g_e3_demo_flow$ = %i(1))		:i return 	:i endif	:i $ForEachIn$${		StructQBString master_editable_list		StructQBKey do = sanity_check_unlocks_fill_cas_items	}$		:i $ForEachIn$(~$car_presets_outfit$->$Female$)$do$ = $sanity_check_unlocks_fill_outfits$	:i $ForEachIn$(~$car_presets_outfit$->$Male$)$do$ = $sanity_check_unlocks_fill_outfits$	:i $change$$g_all_cas_locked_items$ = (~$g_cas_locked_items$)	:i $change$$g_all_cas_texture_locked_items$ = (~$g_cas_texture_locked_items$)	:i $change$$g_all_outfit_locked_items$ = (~$g_outfit_locked_items$)	:i $sanity_check_unlock_build_rewards_array$$quest_first$ = %GLOBAL%$quest_first$	:i $fastgetarraysize$$array$ = %GLOBAL%$rewards_array$	:i %GLOBAL%$i$ = %i(0)	:i while 	:i $sanity_check_unlocks_set$$unlocks$ = (%GLOBAL%$rewards_array$:a{%GLOBAL%$i$:a})	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i $RemoveParameter$${StructQBKey rewards_array}$	:i %GLOBAL%$assert$ = %i(0)	:i $fastgetarraysize$${StructQBString array = g_cas_locked_items}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $printstruct$:s{$CAS_PIECES$ = (~$g_cas_locked_items$):s}		:i %GLOBAL%$assert$ = %i(1)	:i endif	:i $fastgetarraysize$${StructQBString array = g_cas_texture_locked_items}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $printstruct$:s{$cas_textures$ = (~$g_cas_texture_locked_items$):s}		:i %GLOBAL%$assert$ = %i(1)	:i endif	:i $fastgetarraysize$${StructQBString array = g_outfit_locked_items}$	:i if (%GLOBAL%$array_size$ > %i(0))		:i $printstruct$:s{$outfits$ = (~$g_outfit_locked_items$):s}		:i %GLOBAL%$assert$ = %i(1)	:i endif	:i if (%GLOBAL%$assert$ = %i(1))		:i $scriptassert$${StructString 0x00000000 = "Some locked items are impossible to get unlocked by playing through the game! See above for details"}$	:i endif	:i if (~$g_sanity_check_preset_pieces_assert$ = %i(1))		:i $scriptassert$${StructString 0x00000000 = "Some outfits are unlocked before their CAS pieces are!"}$	:i endif	:i $printf$${StructString 0x00000000 = ""}$	:i $printf$${StructString 0x00000000 = ""}$	:i $printf$%s(" Done sanity_check_unlocks quest_first=%q")$q$ = %GLOBAL%$quest_first$	:i $printf$${StructString 0x00000000 = ""}$	:i $printf$${StructString 0x00000000 = ""}$	:i endfunction]Script sanity_check_unlocks_set 0x126f6e87 [	${Unknown [00012c00d42e2bad6969696900000000]}$	:i $ForEachIn$%GLOBAL%$unlocks$$do$ = $sanity_check_unlocks_set_check_cas_items$	:i endfunction]Script sanity_check_unlocks_set_check_cas_items a7613d11 [	:i if $GotParam$${StructQBKey reward_type}$		:i if (%GLOBAL%$reward_type$ = $cas$)			:i if $GotParam$${StructQBKey car_pieces}$				:i $ForEachIn$%GLOBAL%$car_pieces$$do$ = $sanity_check_unlocks_set_check_cas_items_foreach$			:i endif		:i endif		:i if (%GLOBAL%$reward_type$ = $CAS_texture$)			:i if $GotParam$${StructQBKey texture}$				:i $sanity_check_reward_unlock_cas_texture$$CAS_texture$ = %GLOBAL%$texture$			:i endif		:i endif		:i if (%GLOBAL%$reward_type$ = $outfit_preset$)			:i if $GotParam$${StructQBKey outfit_preset}$				:i $sanity_check_reward_unlock_outfit_preset$$outfit_preset$ = %GLOBAL%$outfit_preset$			:i endif		:i endif	:i endif	:i endfunction]Script sanity_check_find_outfit_preset_struct ea3038e5 [	${Unknown [00012c005ef311486969696900000018000126004bb2084e6969696900000000]}$	:i $GetArraySize$%GLOBAL%$array$	:i %GLOBAL%$i$ = %i(0)	:i while 	:i %GLOBAL%$this_desc_id$ = ((%GLOBAL%$array$:a{%GLOBAL%$i$:a})->$desc_id$)	:i if (%GLOBAL%$this_desc_id$ = %GLOBAL%$desc_id$)		:i return $true$$preset_struct$ = (%GLOBAL%$array$:a{%GLOBAL%$i$:a})	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i return ${StructQBKey false}$	:i endfunction]Script sanity_check_reward_unlock_outfit_preset 0x85bab21b [	${Unknown [00012600673961ee6969696900000000]}$	:i %GLOBAL%$preset_struct$ = :s{:s}	:i if $sanity_check_find_outfit_preset_struct$$array$ = (~$car_presets_outfit$->$Female$)$desc_id$ = %GLOBAL%$outfit_preset$	:i elseif $sanity_check_find_outfit_preset_struct$$array$ = (~$car_presets_outfit$->$Male$)$desc_id$ = %GLOBAL%$outfit_preset$	:i else 		:i $scriptassert$%s("%s not found")$s$ = %GLOBAL%$outfit_preset$	:i endif	:i $ForEachIn$~$master_editable_list$$do$ = $sanity_check_preset_pieces_unlocked$$params$ = :s{$outfit_preset$ = %GLOBAL%$outfit_preset$$preset_struct$ = %GLOBAL%$preset_struct$:s}	:i if NOT $ArrayContains$$array$ = (~$g_all_outfit_locked_items$)$contains$ = %GLOBAL%$outfit_preset$		:i $scriptassert$%s("Unlock reward for preset outfit %b, but this is not a locked outfit!")$b$ = %GLOBAL%$outfit_preset$	:i else 		:i if NOT $ArrayContains$$array$ = (~$g_outfit_locked_items$)$contains$ = %GLOBAL%$outfit_preset$			:i $scriptassert$%s("Dupe unlock reward for outfit %b. Items should only unlock once!")$b$ = %GLOBAL%$outfit_preset$		:i else 			:i $RemoveArrayElement$$array$ = (~$g_outfit_locked_items$)$element$ = %GLOBAL%$outfit_preset$			:i $change$$g_outfit_locked_items$ = %GLOBAL%$array$		:i endif	:i endif	:i endfunction]Script sanity_check_is_cas_piece_unlocked 0x528a20fb [	${Unknown [00012600b6f08f396969696900000018000126004bb2084e6969696900000000]}$	:i if $GetActualCASOptionStruct$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$		:i if $GotParam$${StructQBKey locked}$			:i $MangleChecksums$$a$ = %GLOBAL%$part$$b$ = %GLOBAL%$desc_id$			:i if $ArrayContains$$array$ = (~$g_cas_locked_items$)$contains$ = %GLOBAL%$mangled_id$				:i return ${StructQBKey false}$			:i endif		:i endif	:i endif	:i return ${StructQBKey true}$	:i endfunction]Script sanity_check_preset_pieces_unlocked 0x9862802b [	${Unknown [00012600673961ee696969690000001800012600b6f08f39696969690000002800012b005ed06a216969696900000000]}$	:i if $StructureContains$$structure$ = %GLOBAL%$preset_struct$%GLOBAL%$part$		:i if $StructureContains$$structure$ = (%GLOBAL%$preset_struct$->%GLOBAL%$part$)$desc_id$			:i $desc_id$ = ((%GLOBAL%$preset_struct$->%GLOBAL%$part$)->$desc_id$)			:i if NOT $sanity_check_is_cas_piece_unlocked$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$				:i $printf$%s("Preset %p contains piece %a %b which is not unlocked before the preset is!")$p$ = %GLOBAL%$outfit_preset$$a$ = %GLOBAL%$part$$b$ = %GLOBAL%$desc_id$				:i $change$${StructInt g_sanity_check_preset_pieces_assert = 1}$			:i endif		:i endif	:i endif	:i endfunction]Script sanity_check_reward_unlock_cas_texture c49a8cd3 [	${Unknown [0001260039491d126969696900000000]}$	:i if NOT $ArrayContains$$array$ = (~$g_all_cas_texture_locked_items$)$contains$ = %GLOBAL%$CAS_texture$		:i $scriptassert$%s("Unlock reward for CAS_texture %b, but this is not a locked CAS texture!")$b$ = %GLOBAL%$CAS_texture$	:i else 		:i if NOT $ArrayContains$$array$ = (~$g_cas_texture_locked_items$)$contains$ = %GLOBAL%$CAS_texture$			:i $scriptassert$%s("Dupe unlock reward for %CAS_texture %b. Items should only unlock once!")$b$ = %GLOBAL%$CAS_texture$		:i else 			:i $RemoveArrayElement$$array$ = (~$g_cas_texture_locked_items$)$element$ = %GLOBAL%$CAS_texture$			:i $change$$g_cas_texture_locked_items$ = %GLOBAL%$array$		:i endif	:i endif	:i endfunction]Script sanity_check_unlocks_fill_outfits 0x26c70cd3 [	${Unknown [000126004bb2084e6969696900000000]}$	:i if $GotParam$${StructQBKey locked}$		:i $AddArrayElement$$array$ = ~$g_outfit_locked_items$$element$ = %GLOBAL%$desc_id$		:i $change$$g_outfit_locked_items$ = %GLOBAL%$array$	:i endif	:i endfunction]Script sanity_check_unlocks_fill_cas_items 0x62d5a0bc [	${Unknown [00012600b6f08f396969696900000000]}$	:i if $globalexists$$name$ = %GLOBAL%$part$$type$ = $array$		:i $ForEachIn$(~%GLOBAL%$part$)$do$ = $sanity_check_unlocks_fill_cas_items_foreach$$params$ = :s{$part$ = %GLOBAL%$part$:s}	:i endif	:i endfunction]Script sanity_check_guitar_preset_unlock c29c1ade [	${Unknown [00012600b6f08f396969696900000018000126004bb2084e696969690000002800012600a08bb1956969696900000000]}$	:i $GetArraySize$~%GLOBAL%$global_name$	:i $i$ = %i(0)	:i while 	:i $preset_struct$ = (~%GLOBAL%$global_name$:a{%GLOBAL%$i$:a})	:i if $StructureContains$$structure$ = %GLOBAL%$preset_struct$%GLOBAL%$part$		:i if ((%GLOBAL%$preset_struct$->%GLOBAL%$part$->$desc_id$) = %GLOBAL%$desc_id$)			:i $found_preset$ = %i(1)			:i continue		:i endif	:i endif	:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))	:i loop_to %GLOBAL%$array_size$	:i if NOT $GotParam$${StructQBKey found_preset}$		:i $scriptassert$%s(" No preset found for guitar piece %a %b")$a$ = %GLOBAL%$part$$b$ = %GLOBAL%$desc_id$	:i endif	:i $ForEachIn$~$master_editable_list$$do$ = $sanity_check_preset_pieces_unlocked$$params$ = :s{$outfit_preset$ = %GLOBAL%$desc_id$$preset_struct$ = %GLOBAL%$preset_struct$:s}	:i endfunction]Script sanity_check_unlocks_set_check_cas_items_foreach 0x93e54f08 [	${Unknown [00012600b6f08f396969696900000018000126004bb2084e6969696900000000]}$	:i $MangleChecksums$$a$ = %GLOBAL%$part$$b$ = %GLOBAL%$desc_id$	:i if NOT $ArrayContains$$array$ = (~$g_all_cas_locked_items$)$contains$ = %GLOBAL%$mangled_id$		:i $scriptassert$%s("Unlock reward for %a %b, but this is not a locked CAS item!")$a$ = %GLOBAL%$part$$b$ = %GLOBAL%$desc_id$	:i else 		:i if NOT $ArrayContains$$array$ = (~$g_cas_locked_items$)$contains$ = %GLOBAL%$mangled_id$			:i $scriptassert$%s("Dupe unlock reward for %a %b. Items should only unlock once!")$a$ = %GLOBAL%$part$$b$ = %GLOBAL%$desc_id$		:i else 			:i $RemoveArrayElement$$array$ = (~$g_cas_locked_items$)$element$ = %GLOBAL%$mangled_id$			:i $change$$g_cas_locked_items$ = %GLOBAL%$array$		:i endif	:i endif	:i switch (%GLOBAL%$part$)		:i case $CAS_Guitar_Body$			:i endcase		case $CAS_Full_Guitar$			:i $sanity_check_guitar_preset_unlock$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$$global_name$ = $cag_factory_presets$			:i endcase		case $CAS_Bass_Body$			:i endcase		case $CAS_Full_Bass$			:i $sanity_check_guitar_preset_unlock$$part$ = %GLOBAL%$part$$desc_id$ = %GLOBAL%$desc_id$$global_name$ = $cab_factory_presets$			:i endcase		default 			:i $NullScript$	:i end_switch	:i endfunction]Script sanity_check_unlocks_fill_cas_items_foreach 0x5c4cbc8f [	${Unknown [000126004bb2084e696969690000001800012600b6f08f396969696900000000]}$	:i if $GotParam$${StructQBKey locked}$		:i $MangleChecksums$$a$ = %GLOBAL%$part$$b$ = %GLOBAL%$desc_id$		:i $AddArrayElement$$array$ = ~$g_cas_locked_items$$element$ = %GLOBAL%$mangled_id$		:i $change$$g_cas_locked_items$ = %GLOBAL%$array$	:i endif	:i if $GotParam$${StructQBKey cap_textures}$		:i $ForEachIn$%GLOBAL%$cap_textures$$do$ = $sanity_check_foreach_cap_textures$	:i endif	:i endfunction]Script sanity_check_foreach_cap_textures 0x0973feed [	:i if $GotParam$${StructQBKey preset_layers}$		:i $ForEachIn$%GLOBAL%$preset_layers$$do$ = $sanity_check_foreach_preset_layers$	:i endif	:i endfunction]Script sanity_check_foreach_preset_layers f633e577 [	:i if $GotParam$${StructQBKey mask}$		:i $ForEachIn$%GLOBAL%$mask$$do$ = $sanity_check_foreach_mask$	:i endif	:i endfunction]Script sanity_check_foreach_mask 0x2eda6ac3 [	:i if $GotParam$${StructQBKey locked}$		:i if $GotParam$${StructQBKey pattern}$			:i if NOT $ArrayContains$$array$ = (~$g_cas_texture_locked_items$)$contains$ = %GLOBAL%$pattern$				:i $AddArrayElement$$array$ = ~$g_cas_texture_locked_items$$element$ = %GLOBAL%$pattern$				:i $change$$g_cas_texture_locked_items$ = %GLOBAL%$array$			:i endif		:i endif	:i endif	:i endfunction]Script sanity_check_unlock_build_rewards_array a64884ad [	${Unknown [000124003e3388346969696900000000]}$	:i %GLOBAL%$array$ = :a{:a}	:i %GLOBAL%$iteration$ = %i(0)	:i while 	:i if (((%GLOBAL%$quest_first$ = %i(1)) AND (%GLOBAL%$iteration$ = %i(0))) OR ((%GLOBAL%$quest_first$ = %i(0)) AND (%GLOBAL%$iteration$ = %i(1))))		:i $fastgetarraysize$${StructQBString array = quest_progression_unlocks}$		:i $num_quest_slots$ = %GLOBAL%$array_size$		:i if (%GLOBAL%$num_quest_slots$ > %i(0))			:i %GLOBAL%$i$ = %i(0)			:i while 			:i $quest_array$ = (~$quest_progression_unlocks$:a{%GLOBAL%$i$:a})			:i $fastgetarraysize$$array$ = %GLOBAL%$quest_array$			:i %GLOBAL%$quest_array_size$ = %GLOBAL%$array_size$			:i if (%GLOBAL%$quest_array_size$ > %i(0))				:i %GLOBAL%$j$ = %i(0)				:i while 				:i %GLOBAL%$global_name$ = (%GLOBAL%$quest_array$:a{%GLOBAL%$j$:a})				:i if $FastStructureContains$$structure$ = (~%GLOBAL%$global_name$)$name$ = $chapter_unlocks$					:i %GLOBAL%$unlocks$ = (~%GLOBAL%$global_name$->$chapter_unlocks$)					:i $fastgetarraysize$$array$ = %GLOBAL%$unlocks$					:i %GLOBAL%$k$ = %i(0)					:i if (%GLOBAL%$array_size$ > %i(0))						:i while 						:i %GLOBAL%$entry$ = (%GLOBAL%$unlocks$:a{%GLOBAL%$k$:a})						:i if $FastStructureContains$$structure$ = %GLOBAL%$entry$$name$ = $rewards$							:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = (%GLOBAL%$entry$->$rewards$)						:i endif						:i %GLOBAL%$k$ = (%GLOBAL%$k$ + %i(1))						:i loop_to %GLOBAL%$array_size$					:i endif				:i endif				:i %GLOBAL%$j$ = (%GLOBAL%$j$ + %i(1))				:i loop_to %GLOBAL%$quest_array_size$			:i endif			:i %GLOBAL%$i$ = (%GLOBAL%$i$ + %i(1))			:i loop_to %GLOBAL%$num_quest_slots$		:i endif	:i else 		:i $fastgetarraysize$${StructQBString array = award_point_progression}$		:i %GLOBAL%$k$ = %i(0)		:i while 		:i %GLOBAL%$entry$ = ((~$award_point_progression$):a{%GLOBAL%$k$:a})		:i if $FastStructureContains$$structure$ = %GLOBAL%$entry$$name$ = $rewards$			:i $AddArrayElement$$array$ = %GLOBAL%$array$$element$ = (%GLOBAL%$entry$->$rewards$)		:i endif		:i %GLOBAL%$k$ = (%GLOBAL%$k$ + %i(1))		:i loop_to %GLOBAL%$array_size$	:i endif	:i %GLOBAL%$iteration$ = %i(1)	:i loop_to %i(2)	:i return $rewards_array$ = %GLOBAL%$array$	:i endfunction]